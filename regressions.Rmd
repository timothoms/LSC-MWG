---
title: "Cross-sectional regressions"
params: 
  cache: false
  optimize: true
---

```{r setup, include = FALSE}
source("setup.R")
```

```{r startup}
IsTrue <- function(x) { !is.na(x) & x }
load("_data/LSCMWG_working_class.RData")
df <- new
RunModel <- function(equation, data = df) {
  fit <- eval(bquote(lm(.(equation), data = data)))
  print(list(
    classical = summary(fit), ## classical SEs
    robust = lmtest::coeftest(fit, vcov = sandwich::vcovHC(fit, type = "HC1")) ## CRSEs;  Stata robust default
    # can also use: coeftest(fit, vcov = vcovCL, cluster = ~ country)
  ))
  invisible(fit)
}
```

### {.tabset .tabset-fade .tabset-pills}

#### Life expectancy regressions {.tabset .tabset-fade .tabset-pills}

##### Column 1
```{r life_col1}
fit <- RunModel(life_exp_wpp_avg_growth1995_2015 ~ life_exp_wpp_avg_1995 + imr_wpp_avg_1995 + asfr_adol_wpp_avg_1995 + conflict_internal_cumulative1989_1995 + deaths_civilians_int_rate_cumulative1996_2015 + pc_rgdpe_avg_growth1995_2015 + v2x_polyarchy_cumulative1996_2015)
df$samplelife <- ifelse(df$country %in% 
                        na.omit(get_all_vars(fit$call$formula, data = df, country = country))[, "country"], 1, 0)
# auxilliary checks
# RunModel(life_exp_wpp_avg_growth1995_2015 ~ life_exp_wpp_avg_1995 + imr_wpp_avg_1995 + asfr_adol_wpp_avg_1995 + deaths_civilians_osv_rate_1995 + deaths_civilians_int_rate_cumulative1996_2015 + pc_rgdpe_avg_growth1995_2015 + v2x_polyarchy_cumulative1996_2015)
```

##### Column 2 (no lag DV)
```{r life_col2}
RunModel(life_exp_wpp_avg_growth1995_2015 ~ imr_wpp_avg_1995 + asfr_adol_wpp_avg_1995 + conflict_internal_cumulative1989_1995 + deaths_civilians_int_rate_cumulative1996_2015 + pc_rgdpe_avg_growth1995_2015 + v2x_polyarchy_cumulative1991_1995)
# auxilliary checks
# RunModel(life_exp_wpp_avg_growth1995_2015 ~ imr_wpp_avg_1995 + asfr_adol_wpp_avg_1995 + deaths_civilians_osv_rate_1995 + deaths_civilians_int_rate_cumulative1996_2015 + pc_rgdpe_avg_growth1995_2015 + v2x_polyarchy_cumulative1991_1995)
# RunModel(life_exp_wpp_avg_growth1995_2015 ~ imr_wpp_avg_1995 + asfr_adol_wpp_avg_1995 + deaths_civilians_int_rate_1995 + deaths_civilians_int_rate_cumulative1996_2015 + pc_rgdpe_avg_growth1995_2015 + v2x_polyarchy_cumulative1991_1995)
# RunModel(life_exp_wpp_avg_growth1995_2015 ~ imr_wpp_avg_1995 + asfr_adol_wpp_avg_1995 + conflict_internal_cumulative1989_1995 + deaths_civilians_osv_rate_cumulative1996_2015 + pc_rgdpe_avg_growth1995_2015 + v2x_polyarchy_cumulative1991_1995)
# RunModel(life_exp_wpp_avg_growth1995_2015 ~ imr_wpp_avg_1995 + asfr_adol_wpp_avg_1995 + deaths_civilians_osv_rate_1995 + deaths_civilians_osv_rate_cumulative1996_2015 + pc_rgdpe_avg_growth1995_2015 + v2x_polyarchy_cumulative1991_1995)
# RunModel(life_exp_wpp_avg_growth1995_2015 ~ imr_wpp_avg_1995 + asfr_adol_wpp_avg_1995 + deaths_civilians_int_rate_1995 + deaths_civilians_osv_rate_cumulative1996_2015 + pc_rgdpe_avg_growth1995_2015 + v2x_polyarchy_cumulative1991_1995)
# RunModel(life_exp_wpp_avg_growth1995_2015 ~ imr_wpp_avg_1995 + asfr_adol_wpp_avg_1995 + conflict_internal_cumulative1989_1995 + conflict_internal_cumulative1996_2015 + pc_rgdpe_avg_growth1995_2015 + v2x_polyarchy_cumulative1991_1995)
# RunModel(life_exp_wpp_avg_growth1995_2015 ~ imr_wpp_avg_1995 + asfr_adol_wpp_avg_1995 + deaths_civilians_osv_rate_1995 + conflict_internal_cumulative1996_2015 + pc_rgdpe_avg_growth1995_2015 + v2x_polyarchy_cumulative1991_1995)
# RunModel(life_exp_wpp_avg_growth1995_2015 ~ imr_wpp_avg_1995 + asfr_adol_wpp_avg_1995 + deaths_civilians_int_rate_1995 + conflict_internal_cumulative1996_2015 + pc_rgdpe_avg_growth1995_2015 + v2x_polyarchy_cumulative1991_1995)
```

##### Column 3 (prediction)
```{r life_col3}
RunModel(life_exp_wpp_avg_growth1995_2015 ~ life_exp_wpp_avg_1995 + imr_wpp_avg_1995 + asfr_adol_wpp_avg_1995 + v2x_polyarchy_cumulative1991_1995 + deaths_civilians_osv_rate_1995)
# auxilliary checks
# RunModel(life_exp_wpp_avg_growth1995_2015 ~ life_exp_wpp_avg_1995 + imr_wpp_avg_1995 + asfr_adol_wpp_avg_1995 + v2x_polyarchy_cumulative1991_1995 + deaths_civilians_int_rate_1995)
# RunModel(life_exp_wpp_avg_growth1995_2015 ~ life_exp_wpp_avg_1995 + imr_wpp_avg_1995 + asfr_adol_wpp_avg_1995 + v2x_polyarchy_cumulative1991_1995 + conflict_internal_cumulative1989_1995)
```

##### Column 4 (performance version)
```{r life_col4}
RunModel(perf_life_exp_wpp_avg_growth1995_2015 ~ perf_imr_wpp_avg_1995 + perf_asfr_adol_wpp_avg_1995 + conflict_internal_cumulative1989_1995 + pc_rgdpe_pwt_avg_1995 + pc_rgdpe_avg_growth1995_2015 + v2x_polyarchy_cumulative1991_1995)
# auxilliary checks
# RunModel(perf_life_exp_wpp_avg_growth1995_2015 ~ perf_imr_wpp_avg_1995 + perf_asfr_adol_wpp_avg_1995 + deaths_civilians_osv_rate_1995 + pc_rgdpe_pwt_avg_1995 + pc_rgdpe_avg_growth1995_2015 + v2x_polyarchy_cumulative1991_1995)
```

##### no health variables (not reported)
```{r life_supp}
## no health variables (not reported)
RunModel(life_exp_wpp_avg_growth1995_2015 ~ mys_age_ratio_ihme_avg_1995 + deaths_civilians_int_rate_cumulative1996_2015)
cor(df[df$samplelife == 1, c("life_exp_wpp_avg_1995", "imr_wpp_avg_1995")])
cor(df[df$samplelife == 1, c("v2x_polyarchy_cumulative1996_2015", "v2x_polyarchy_cumulative1991_1995")])
cor(df[df$samplelife == 1, c("perf_life_exp_wpp_avg_growth1995_2015", "life_exp_wpp_avg_1995")])
```

#### IMR regressions {.tabset .tabset-fade .tabset-pills}

##### Base model
```{r imr_base}
fit <- RunModel(imr_wpp_avg_growth1995_2015 ~ imr_wpp_avg_1995 + asfr_adol_wpp_avg_1995 + pc_rgdpe_pwt_avg_1995 + pc_rgdpe_avg_growth1995_2015 + v2x_polyarchy_cumulative1991_1995)
car::vif(fit)
RunModel(imr_wpp_avg_growth1995_2015 ~ imr_wpp_avg_1995 + asfr_adol_wpp_avg_1995 + pc_rgdpe_avg_growth1995_2015 + v2x_polyarchy_cumulative1991_1995)
RunModel(imr_wpp_avg_growth1995_2015 ~ imr_wpp_avg_1995 + asfr_adol_wpp_avg_1995 + pc_rgdpe_pwt_avg_1995 + v2x_polyarchy_cumulative1991_1995)
cor(df[df$samplelife == 1, c("pc_rgdpe_pwt_avg_1995", "pc_rgdpe_avg_growth1995_2015")])
```

##### Prediction model
```{r imr_prediction}
RunModel(imr_wpp_avg_growth1995_2015 ~ imr_wpp_avg_1995 + asfr_adol_wpp_avg_1995)
RunModel(imr_wpp_avg_growth1995_2015 ~ imr_wpp_avg_1995 + asfr_adol_wpp_avg_1995, data = df[df$samplelife == 1, ])
```

#### MYS regressions {.tabset .tabset-fade .tabset-pills}

##### Column 1 (base model)
```{r mys_col1}
fit <- RunModel(mys_age_ratio_ihme_avg_growth1995_2015 ~ mys_age_ratio_ihme_avg_1995 + asfr_adol_wpp_avg_1995 + v2x_polyarchy_cumulative1996_2015 + deaths_civilians_osv_rate_1995 + deaths_civilians_osv_rate_cumulative1996_2015)
df$samplemys <- ifelse(df$country %in% na.omit(get_all_vars(fit$call$formula, data = df, country = country))[, "country"], 1, 0)
## (checks)
RunModel(mys_age_ratio_ihme_avg_growth1995_2015 ~ mys_age_ratio_ihme_avg_1995 + asfr_adol_wpp_avg_1995 + v2x_polyarchy_cumulative1996_2015)
RunModel(mys_age_ratio_ihme_avg_growth1995_2015 ~ mys_age_ratio_ihme_avg_1995 + asfr_adol_wpp_avg_1995 + deaths_civilians_osv_rate_cumulative1996_2015)
RunModel(mys_age_ratio_ihme_avg_growth1995_2015 ~ mys_age_ratio_ihme_avg_1995 + asfr_adol_wpp_avg_1995 + deaths_civilians_osv_rate_1995)
RunModel(mys_age_ratio_ihme_avg_growth1995_2015 ~ mys_age_ratio_ihme_avg_1995 + asfr_adol_wpp_avg_1995 + v2x_polyarchy_cumulative1996_2015 + deaths_civilians_osv_rate_cumulative1996_2015)
cor(df[df$samplemys == 1, c("deaths_civilians_osv_rate_1995", "deaths_civilians_osv_rate_cumulative1996_2015")])
# auxilliary checks
# RunModel(mys_age_ratio_ihme_avg_growth1995_2015 ~ mys_age_ratio_ihme_avg_1995 + asfr_adol_wpp_avg_1995 + v2x_polyarchy_cumulative1996_2015 + deaths_civilians_int_rate_1995 + deaths_civilians_osv_rate_cumulative1996_2015)
# RunModel(mys_age_ratio_ihme_avg_growth1995_2015 ~ mys_age_ratio_ihme_avg_1995 + asfr_adol_wpp_avg_1995 + v2x_polyarchy_cumulative1996_2015 + conflict_internal_cumulative1989_1995 + deaths_civilians_osv_rate_cumulative1996_2015)
# RunModel(mys_age_ratio_ihme_avg_growth1995_2015 ~ mys_age_ratio_ihme_avg_1995 + asfr_adol_wpp_avg_1995 + v2x_polyarchy_cumulative1996_2015 + deaths_civilians_osv_rate_1995 + conflict_internal_cumulative1996_2015)
# RunModel(mys_age_ratio_ihme_avg_growth1995_2015 ~ mys_age_ratio_ihme_avg_1995 + asfr_adol_wpp_avg_1995 + v2x_polyarchy_cumulative1996_2015 + deaths_civilians_osv_rate_1995 + deaths_civilians_int_rate_cumulative1996_2015)
# RunModel(mys_age_ratio_ihme_avg_growth1995_2015 ~ mys_age_ratio_ihme_avg_1995 + asfr_adol_wpp_avg_1995 + v2x_polyarchy_cumulative1996_2015 + deaths_civilians_int_rate_1995 + deaths_civilians_osv_rate_cumulative1996_2015)
# RunModel(mys_age_ratio_ihme_avg_growth1995_2015 ~ mys_age_ratio_ihme_avg_1995 + asfr_adol_wpp_avg_1995 + v2x_polyarchy_cumulative1996_2015 + deaths_civilians_int_rate_1995 + conflict_internal_cumulative1996_2015)
# RunModel(mys_age_ratio_ihme_avg_growth1995_2015 ~ mys_age_ratio_ihme_avg_1995 + asfr_adol_wpp_avg_1995 + v2x_polyarchy_cumulative1996_2015 + conflict_internal_cumulative1989_1995 + conflict_internal_cumulative1996_2015)
# RunModel(mys_age_ratio_ihme_avg_growth1995_2015 ~ mys_age_ratio_ihme_avg_1995 + asfr_adol_wpp_avg_1995 + v2x_polyarchy_cumulative1996_2015 + conflict_internal_cumulative1989_1995 + deaths_civilians_int_rate_cumulative1996_2015)
```

##### Column 2 (prediction model)
```{r mys_col2}
RunModel(mys_age_ratio_ihme_avg_growth1995_2015 ~ mys_age_ratio_ihme_avg_1995 + asfr_adol_wpp_avg_1995 + v2x_polyarchy_cumulative1991_1995 + deaths_civilians_osv_rate_1995)
# auxilliary checks
# RunModel(mys_age_ratio_ihme_avg_growth1995_2015 ~ mys_age_ratio_ihme_avg_1995 + asfr_adol_wpp_avg_1995 + v2x_polyarchy_cumulative1991_1995 + deaths_civilians_int_rate_1995)
# RunModel(mys_age_ratio_ihme_avg_growth1995_2015 ~ mys_age_ratio_ihme_avg_1995 + asfr_adol_wpp_avg_1995 + v2x_polyarchy_cumulative1991_1995 + conflict_internal_cumulative1989_1995)
```

#### ASFR regressions {.tabset .tabset-fade .tabset-pills}

##### Column 3 (base model)
```{r asfr_col3}
RunModel(asfr_adol_wpp_avg_growth1995_2015 ~ imr_wpp_avg_1995 + asfr_adol_wpp_avg_1995 + v2x_partip_cumulative1996_2015)
```

##### Column 4 (prediction model)
```{r asfr_col4}
RunModel(asfr_adol_wpp_avg_growth1995_2015 ~ imr_wpp_avg_1995 + asfr_adol_wpp_avg_1995 + v2x_partip_cumulative1991_1995)
```

#### Conflict regressions {.tabset .tabset-fade .tabset-pills}

##### Column 1
```{r conflict_col1}
RunModel(conflict_internal_cumulative1996_2015 ~ life_exp_wpp_avg_1995 + conflict_internal_cumulative1989_1995)
```

##### Column 2
```{r conflict_col2}
RunModel(conflict_internal_cumulative1996_2015 ~ imr_wpp_avg_1995 + conflict_internal_cumulative1989_1995)
```

##### Column 3
```{r conflict_col3}
RunModel(conflict_internal_cumulative1996_2015 ~ mys_age_ratio_ihme_avg_1995 + conflict_internal_cumulative1989_1995)
```

##### Column 4
```{r conflict_col4}
RunModel(deaths_civilians_int_rate_cumulative1996_2015 ~ mys_age_ratio_ihme_avg_1995)
```

##### Column 5
```{r conflict_col5}
RunModel(deaths_civilians_osv_rate_cumulative1996_2015 ~ mys_age_ratio_ihme_avg_1995 + deaths_civilians_osv_rate_1995)
```

#### Non-regression evidence {.tabset .tabset-fade .tabset-pills}

##### Life expectancy

```{r descriptives_life}
hist(df$life_exp_wpp_avg_growth1995_2015) 
summary(df$life_exp_wpp_avg_growth1995_2015)
summary(df$class_low_1995)
summary(df$class_low_1995[df$life_exp_wpp_avg_growth1995_2015 < 2.3])
summary(df$class_upp_1995)
summary(df$class_upp_1995[df$life_exp_wpp_avg_growth1995_2015 < 2.3])
```

##### IMR
```{r descriptives_imr}
hist(df$imr_wpp_avg_growth1995_2015)
summary(df$imr_wpp_avg_growth1995_2015)
summary(df$class_low_1995)
summary(df$class_low_1995[df$imr_wpp_avg_growth1995_2015 < 2.71])
summary(df$class_upp_1995)
summary(df$class_upp_1995[df$imr_wpp_avg_growth1995_2015 < 2.71])
```

##### MYS
```{r descriptives_mys}
hist(df$mys_age_ratio_ihme_avg_growth1995_2015)
summary(df$mys_age_ratio_ihme_avg_growth1995_2015)
summary(df$class_low_1995)
summary(df$class_low_1995[df$mys_age_ratio_ihme_avg_growth1995_2015 < -0.00437])
summary(df$class_upp_1995)
summary(df$class_upp_1995[df$mys_age_ratio_ihme_avg_growth1995_2015 < -0.00437])
```

```{r new0}
# summ asfr_adol_wpp_grow95_2015 life_exp_wpp_1995 imr_wpp_1995 mys_age_ratio_ihme_1995 asfr_adol_wpp_1995 pc_rgdpe_avg_1995 pc_rgdpe_avg_grow95_2015 v2x_polyarchy_cum91_1995 v2x_polyarchy_cum96_2015 conflict_interl_cum89_19 conflict_interl_cum96_2015 deathciv_int_rate_1995 deathciv_int_rate_cum96_2015 deathciv_osv_rate_1995 deathciv_osv_rate_cum96_2015
```

##### ASFR
```{r descriptives_asfr}
hist(df$asfr_adol_wpp_avg_growth1995_2015)
summary(df$asfr_adol_wpp_avg_growth1995_2015)
summary(df$class_low_1995)
summary(df$class_low_1995[df$asfr_adol_wpp_avg_growth1995_2015 < 2.7085])
summary(df$class_upp_1995)
summary(df$class_upp_1995[df$asfr_adol_wpp_avg_growth1995_2015 < 2.7085])
```

##### GDP growth
```{r descriptives_gdp}
hist(df$pc_rgdpe_avg_growth1995_2015)
summary(df$pc_rgdpe_avg_growth1995_2015) 
summary(df$class_low_1995)
summary(df$class_low_1995[df$pc_rgdpe_avg_growth1995_2015 < 144]) 
summary(df$class_upp_1995)
summary(df$class_upp_1995[df$pc_rgdpe_avg_growth1995_2015 < 144])
```

##### Polyarchy
```{r descriptives_polyarchy}
df$authority <- df$v2x_polyarchy_cumulative1996_2015 - df$v2x_polyarchy_cumulative1991_1995
hist(df$authority)
summary(df$authority)
```

```{r new, include = FALSE, eval = FALSE}

load("_data/sequences.RData", verbose = TRUE)
df <- merge(new, seq[, c("country", "typology1995")], by = "country")
vars <- names(df)
vars <- vars[!str_detect(vars, "perf")]
vars <- vars[!str_detect(vars, "_1990")]
df$class_vv_1995 <- factor(df$class_vv_1995, c("upp", "mid", "low", "H>G", "G>H"))
RunModel(life_exp_wpp_avg_growth1995_2015 ~ class_vv_1995 + conflict_internal_cumulative1989_1995 + conflict_internal_cumulative1996_2015 + pc_rgdpe_pwt_avg_1995 + pc_rgdpe_avg_growth1995_2015 + v2x_polyarchy_cumulative1996_2015)
RunModel(imr_wpp_avg_growth1995_2015 ~ class_vv_1995 + conflict_internal_cumulative1989_1995 + conflict_internal_cumulative1996_2015 + pc_rgdpe_pwt_avg_1995 + pc_rgdpe_avg_growth1995_2015 + v2x_polyarchy_cumulative1996_2015)
RunModel(asfr_adol_wpp_avg_growth1995_2015 ~ class_vv_1995 + conflict_internal_cumulative1989_1995 + conflict_internal_cumulative1996_2015 + pc_rgdpe_pwt_avg_1995 + pc_rgdpe_avg_growth1995_2015 + v2x_polyarchy_cumulative1996_2015)
RunModel(mys_age_ratio_ihme_avg_growth1995_2015 ~ class_vv_1995 + conflict_internal_cumulative1989_1995 + conflict_internal_cumulative1996_2015 + pc_rgdpe_pwt_avg_1995 + pc_rgdpe_avg_growth1995_2015 + v2x_polyarchy_cumulative1996_2015)

table(df$conflict_internal_cumulative1996_2015)
RunModel(conflict_internal_cumulative1996_2015 ~ conflict_internal_cumulative1989_1995 + class_vv_1995 + pc_rgdpe_avg_growth1995_2015 + v2x_polyarchy_cumulative1996_2015)



df$class_mid_1990 <- ifelse(df$class_vv_1990 == "mid", 1, 0)
df$class_HG_1990 <- ifelse(df$class_vv_1990 == "H>G", 1, 0)
df$class_GH_1990 <- ifelse(df$class_vv_1990 == "G>H", 1, 0)
summary(as.factor(df$class_vv_1995))
df$class_mid_1995 <- ifelse(df$class_vv_1995 == "mid", 1, 0)
df$class_HG_1995 <- ifelse(df$class_vv_1995 == "H>G", 1, 0)
df$class_GH_1995 <- ifelse(df$class_vv_1995 == "G>H", 1, 0)

names(df)[str_detect(names(df), "deaths")]
names(df)[str_detect(names(df), "conflict")]

RunModel(life_exp_wpp_avg_growth1995_2015 ~ life_exp_wpp_avg_1995 + deaths_all_int_rate_cumulative1996_2015 + deaths_all_nsc_rate_cumulative1996_2015 + deaths_civilians_osv_rate_cumulative1996_2015 + pc_rgdpe_avg_growth1995_2015 + v2x_polyarchy_cumulative1996_2015 + class_HG_1995 + class_GH_1995 + class_mid_1995 + class_upp_1995)
RunModel(life_exp_wpp_avg_growth1995_2015 ~ life_exp_wpp_avg_1995 + pc_rgdpe_avg_growth1995_2015 + v2x_polyarchy_cumulative1996_2015 + conflict_internal_cumulative1989_1995 + conflict_internal_cumulative1996_2015 + class_HG_1995*conflict_internal_cumulative1996_2015+ class_GH_1995*conflict_internal_cumulative1996_2015+ class_mid_1995*conflict_internal_cumulative1996_2015+ class_upp_1995*conflict_internal_cumulative1996_2015)
# conflict_non_state_cumulative1989_1995 + conflict_non_state_cumulative1996_2015 + conflict_one_sided_cumulative1989_1995 + conflict_one_sided_cumulative1996_2015

v2x_partip_cumulative1991_1995
RunModel(deaths_civilians_osv_rate_cumulative1996_2015 ~ pc_rgdpe_avg_growth1995_2015 + v2x_partip_cumulative1996_2015 + deaths_civilians_osv_rate_1995*class_HG_1995 + deaths_civilians_osv_rate_1995*class_GH_1995 + deaths_civilians_osv_rate_1995*class_mid_1995 + deaths_civilians_osv_rate_1995*class_upp_1995)
RunModel(deaths_all_int_rate_cumulative1996_2015 ~ pc_rgdpe_avg_growth1995_2015 + v2x_partip_cumulative1996_2015 + deaths_all_int_rate_1995*class_HG_1995 + deaths_all_int_rate_1995*class_GH_1995 + deaths_all_int_rate_1995*class_mid_1995 + deaths_all_int_rate_1995*class_upp_1995)
RunModel(deaths_all_nsc_rate_cumulative1996_2015 ~ pc_rgdpe_avg_growth1995_2015 + v2x_partip_cumulative1996_2015 + deaths_all_nsc_rate_1995*class_HG_1995 + deaths_all_nsc_rate_1995*class_GH_1995 + deaths_all_nsc_rate_1995*class_mid_1995 + deaths_all_nsc_rate_1995*class_upp_1995)
RunModel(conflict_internal_cumulative1996_2015 ~ pc_rgdpe_avg_growth1995_2015 + v2x_partip_cumulative1996_2015 + conflict_internal_cumulative1989_1995*class_HG_1995 + conflict_internal_cumulative1989_1995*class_GH_1995 + conflict_internal_cumulative1989_1995*class_mid_1995 + conflict_internal_cumulative1989_1995*class_upp_1995)

RunModel(conflict_1996_2015 ~ class_vv_1995 + pc_rgdpe_pwt_avg_1995 + pc_rgdpe_avg_growth1995_2015 + v2x_partip_cumulative1991_1995)



df$conflict_1996_2015 <- ifelse(df$conflict_internal_cumulative1996_2015 == 0, 0, 1)
df$conflict_1989_1995 <- ifelse(df$conflict_internal_cumulative1989_1995 == 0, 0, 1)
df$war_1996_2015 <- ifelse(df$war_internal_cumulative1996_2015 == 0, 0, 1)
df$war_1989_1995 <- ifelse(df$war_internal_cumulative1989_1995 == 0, 0, 1)
round(prop.table(table(df$class_vv_1995, df$conflict_1989_1995), margin = 1), 2)
round(prop.table(table(df$class_vv_1995, df$conflict_1996_2015), margin = 1), 2)
round(prop.table(table(df$class_vv_1995, df$war_1989_1995), margin = 1), 2)
round(prop.table(table(df$class_vv_1995, df$war_1996_2015), margin = 1), 2)
round(prop.table(table(df[, c("class_vv_1995", "conflict_1996_2015", "conflict_1989_1995")]), margin = c(1, 3)), 2)
round(prop.table(table(df[, c("class_vv_1995", "war_1996_2015", "war_1989_1995")]), margin = c(1, 3)), 2)
```


```{r new1}
# ***TABLE 1: SIMPLE MODEL
# **TABLE 1: COLUMN 1
# reg life_exp_wpp_grow95_2015 life_exp_wpp_1995 asfr_adol_wpp_1995 , robust
# estat vif
# *TABLE 1 COLUMN 2
# reg imr_wpp_grow95_2015 imr_wpp_1995 mys_age_ratio_ihme_1995 asfr_adol_wpp_1995 , robust
# *TABLE 1 COLUMN 3
# reg mys_age_ratio_ihme_grow95_2015  mys_age_ratio_ihme_1995 asfr_adol_wpp_1995, robust
# *TABLE 1 COLUMN 4
# reg asfr_adol_wpp_grow95_2015 imr_wpp_1995  mys_age_ratio_ihme_1995 asfr_adol_wpp_1995, robust
```

```{r new2}
# ***TABLE 2: add in 1995 political and economic variables
# *life expectancy
# ** TABLE 2 COLUMN 1 LIFE EXPECTANCY
# reg life_exp_wpp_grow95_2015 life_exp_wpp_1995  mys_age_ratio_ihme_1995 asfr_adol_wpp_1995 pc_rgdpe_avg_1995 v2x_polyarchy_cum91_1995, robust
# **TABLE 2 COLUMN 2 IMR
# reg imr_wpp_grow95_2015 imr_wpp_1995  mys_age_ratio_ihme_1995 asfr_adol_wpp_1995 pc_rgdpe_avg_1995 v2x_polyarchy_cum91_1995, robust
# **TABLE 2 COLUMN 3 MYS
# reg mys_age_ratio_ihme_grow95_2015 imr_wpp_1995  mys_age_ratio_ihme_1995 asfr_adol_wpp_1995 pc_rgdpe_avg_1995 v2x_polyarchy_cum91_1995, robust
# **TABLE 2 COLUMN 4
# reg asfr_adol_wpp_grow95_2015 imr_wpp_1995  mys_age_ratio_ihme_1995 asfr_adol_wpp_1995 pc_rgdpe_avg_1995 v2x_polyarchy_cum91_1995, robust
```

```{r new3}
# ***ADDING IN PAST CONFLICT AND VIOLENCE FOR TABLE 3
# **TABLE 3 COLUMN 1 life expectancy
# reg life_exp_wpp_grow95_2015 life_exp_wpp_1995 mys_age_ratio_ihme_1995 asfr_adol_wpp_1995 pc_rgdpe_avg_1995 v2x_polyarchy_cum91_1995 conflict_interl_cum89_19 deathciv_int_rate_1995 deathciv_osv_rate_1995, robust
# **TABLE 3 COLUMN 2 IMR
# reg imr_wpp_grow95_2015 imr_wpp_1995 mys_age_ratio_ihme_1995 asfr_adol_wpp_1995 pc_rgdpe_avg_1995 v2x_polyarchy_cum91_1995 conflict_interl_cum89_19 deathciv_int_rate_1995 deathciv_osv_rate_1995, robust
# **TABLE 3 COLUMN 3 MYS
# reg mys_age_ratio_ihme_grow95_2015 imr_wpp_1995 mys_age_ratio_ihme_1995 asfr_adol_wpp_1995 pc_rgdpe_avg_1995 v2x_polyarchy_cum91_1995 conflict_interl_cum89_19 deathciv_int_rate_1995 deathciv_osv_rate_1995, robust
# **TABLE 3 COLUMN 4 ASFR
# reg asfr_adol_wpp_grow95_2015 imr_wpp_1995 mys_age_ratio_ihme_1995 asfr_adol_wpp_1995 pc_rgdpe_avg_1995 v2x_polyarchy_cum91_1995 conflict_interl_cum89_19 deathciv_int_rate_1995 deathciv_osv_rate_1995, robust
```

```{r new4}
# **ADDING IN CONTEMPOREANEOUS VARIABLES TABLE 4
# *life_exp_wpp_1995 imr_wpp_1995  mys_age_ratio_ihme_1995 asfr_adol_wpp_1995 pc_rgdpe_avg_1995 v2x_polyarchy_cum91_1995 conflict_interl_cum89_19 deathciv_int_rate_1995 deathciv_osv_rate_1995 pc_rgdpe_avg_grow95_2015 v2x_polyarchy_cum96_2015 conflict_interl_cum96_2015 deathciv_int_rate_cum96_2015 deathciv_osv_rate_cum96_2015 , robust
# *TABLE 4 col 1  life expectancy
# reg life_exp_wpp_grow95_2015  life_exp_wpp_1995 mys_age_ratio_ihme_1995 asfr_adol_wpp_1995 pc_rgdpe_avg_1995 v2x_polyarchy_cum91_1995 conflict_interl_cum89_19  deathciv_osv_rate_1995 pc_rgdpe_avg_grow95_2015   deathciv_int_rate_cum96_2015 ,  robust
# **TABLE 4 COL 2 IMR
# reg imr_wpp_grow95_2015 imr_wpp_1995 mys_age_ratio_ihme_1995 asfr_adol_wpp_1995  deathciv_int_rate_1995 deathciv_osv_rate_1995 ,  robust
# **TABLE 4 COL 3 mys
# reg mys_age_ratio_ihme_grow95_2015 imr_wpp_1995 mys_age_ratio_ihme_1995 asfr_adol_wpp_1995 pc_rgdpe_avg_1995 v2x_polyarchy_cum91_1995 conflict_interl_cum89_19 deathciv_int_rate_1995 conflict_interl_cum96_2015 deathciv_int_rate_cum96_2015 ,  robust
# **TABLE 4 COL 4 ASFR
# reg asfr_adol_wpp_grow95_2015 imr_wpp_1995 mys_age_ratio_ihme_1995 asfr_adol_wpp_1995     deathciv_osv_rate_cum96_2015,  robust
```

```{r new5}
# **TABLE 5 analysis of current variables on future conflict growth and democracy
# *TABLE 5 COL 1 gdppc growth
# gen rgdpgrow = (pc_rgdpe_avg_grow95_2015 - pc_rgdpe_avg_1995)*100/pc_rgdpe_avg_1995
# reg rgdpgrow life_exp_wpp_1995 imr_wpp_1995 mys_age_ratio_ihme_1995 asfr_adol_wpp_1995 pc_rgdpe_avg_1995 v2x_polyarchy_cum91_1995 conflict_interl_cum89_19 deathciv_int_rate_1995 deathciv_osv_rate_1995, robust
# reg rgdpgrow pc_rgdpe_avg_1995 v2x_polyarchy_cum91_1995  , robust
# 
# reg rgdpgrow pc_rgdpe_avg_1995 v2x_polyarchy_cum91_1995  class_low_1995 classgh95 classhg95 class_upp_1995, robust
# sum rgdpgrow
# 
# reg pc_rgdpe_avg_grow95_2015  life_exp_wpp_1995 asfr_adol_wpp_1995  conflict_interl_cum89_19  ,  robust
# **TABLE 5 COL 2 polyarchy
# reg v2x_polyarchy_cum96_2015  v2x_polyarchy_cum91_1995 deathciv_osv_rate_1995 ,  robust
# **TABLE 5 COL 3 conflict full model
# reg conflict_interl_cum96_2015 imr_wpp_1995 asfr_adol_wpp_1995 conflict_interl_cum89_19 ,  robust
# ** TABLE 5 COL 4 civ death rate internal
# reg deathciv_int_rate_cum96_2015 mys_age_ratio_ihme_1995  ,  robust
# ** TABLE 5 COL 5 civ death osv
# reg deathciv_osv_rate_cum96_2015  imr_wpp_1995  asfr_adol_wpp_1995  ,  robust
```

```{r new6}
# **CLASSIFICATION ANALYSIS : WITH DUMMIES BY CLASSIFICATION
# **TABLE 6
# *TABLE 6 COL 1 LIFE EXPECTANCY
# reg life_exp_wpp_grow95_2015  life_exp_wpp_1995 asfr_adol_wpp_1995 pc_rgdpe_avg_1995 v2x_polyarchy_cum91_1995 conflict_interl_cum89_19 deathciv_int_rate_1995 deathciv_osv_rate_1995 class_low_1995 classgh95 classhg95 class_upp_1995 , robust
# **Table 6 col 2 IMR
# reg imr_wpp_grow95_2015  imr_wpp_1995  asfr_adol_wpp_1995  deathciv_int_rate_1995 deathciv_osv_rate_1995 class_low_1995 classgh95 classhg95 class_upp_1995, robust
# **Table 6 col 3 MYS
# reg mys_age_ratio_ihme_grow95_2015  mys_age_ratio_ihme_1995 asfr_adol_wpp_1995 pc_rgdpe_avg_1995 v2x_polyarchy_cum91_1995  class_low_1995 classgh95 classhg95 class_upp_1995, robust
# **Table 6 col 4 asfr
# reg asfr_adol_wpp_grow95_2015  imr_wpp_1995 mys_age_ratio_ihme_1995 asfr_adol_wpp_1995 class_low_1995 classgh95 classhg95 class_upp_1995 , robust
```

```{r new7}
# **Table 7 analysis of current variables on future conflict growth and democracy, including classifiactions
# 
# *TABLE 7 COL 1 gdppc growth
# reg pc_rgdpe_avg_grow95_2015  deathciv_int_rate_1995 class_low_1995 classgh95 classhg95 class_upp_1995 ,  robust

# **TABLE 7 COL 2 polyarchy
# reg v2x_polyarchy_cum96_2015  asfr_adol_wpp_1995 v2x_polyarchy_cum91_1995  deathciv_int_rate_1995 class_low_1995 classgh95 classhg95 class_upp_1995 ,  robust

# **TABLE 7 COL 3 conflict full model
# reg conflict_interl_cum96_2015  imr_wpp_1995 mys_age_ratio_ihme_1995 conflict_interl_cum89_19 class_low_1995 classgh95 classhg95 class_upp_1995 ,  robust

# ** TABLE 7 COL 4 civ death rate internal
# reg deathciv_int_rate_cum96_2015  class_low_1995 classgh95 classhg95 class_upp_1995 ,  robust

# ** TABLE 7 COL 5 civ death osv
# reg deathciv_osv_rate_cum96_2015 life_exp_wpp_1995 class_low_1995 classgh95 classhg95 class_upp_1995 ,  robust
```
