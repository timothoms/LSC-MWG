<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Classifications</title>

<script src="site_libs/header-attrs-2.8/header-attrs.js"></script>
<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script>
<script src="site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>


<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

.sourceCode .row {
  width: 100%;
}
.sourceCode {
  overflow-x: auto;
}
.code-folding-btn {
  margin-right: -30px;
}
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">LSC-MWG</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="intro.html">Introduction</a>
</li>
<li>
  <a href="data.html">Data</a>
</li>
<li>
  <a href="classifications.html">Classifications</a>
</li>
<li>
  <a href="regressions.html">Cross-sectional Models</a>
</li>
<li>
  <a href="panel.html">Panel Models</a>
</li>
<li>
  <a href="cases.html">Cases</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Classifications</h1>

</div>

<div id="TOC">
<ul>
<li><a href="#classification-for-1990-with-two-variables-each-on-the-health-and-gender-dimensions">Classification for 1990 with two variables each on the health and gender dimensions</a>
<ul>
<li><a href="#this-is-the-fuzzy-version-of-the-above-classification-only-for-illustration-not-for-analyses">This is the fuzzy version of the above classification (only for illustration, not for analyses)</a></li>
<li><a href="#merging-the-classifications-into-the-dataset">Merging the classifications into the dataset</a></li>
<li><a href="#subset-of-1990-classifications-data-for-which-the-floor-rule-was-applied">Subset of 1990 classifications data for which the “floor” rule was applied</a></li>
<li><a href="#which-countries-move-more-than-2-cells-in-the-classifications">Which countries move more than 2 cells in the classifications?</a></li>
<li><a href="#removing-countries-with-untrustworthy-statistics">Removing countries with untrustworthy statistics</a></li>
<li><a href="#trends-by-classification-group">Trends by classification group</a></li>
<li><a href="#cumulative-death-rate-trends-by-1995-classification-groups">Cumulative death rate trends by 1995 classification groups</a></li>
<li><a href="#cumulative-repression-trends-by-1995-classification-groups">Cumulative repression trends by 1995 classification groups</a></li>
<li><a href="#conflict-incidence-by-1995-classification-groups">Conflict incidence by 1995 classification groups</a></li>
<li><a href="#mean-growth-rates-by-classification-with-t-test-alt-h-mean-different-from-global">Mean growth rates by classification with t-test (alt H: mean different from global)</a></li>
</ul></li>
<li><a href="#preparing-cross-sectional-dataset-for-later-analyses">Preparing cross-sectional dataset for later analyses</a></li>
<li><a href="#performance-rankings-within-classification-groups">Performance Rankings within classification groups</a>
<ul>
<li><a href="#low-classification">Low classification</a></li>
<li><a href="#h-g-classification">H &gt; G classification</a></li>
<li><a href="#g-h-classification">G &gt; H classification</a></li>
<li><a href="#high-classification">High classification</a></li>
</ul></li>
</ul>
</div>

<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>IsTrue <span class="ot">&lt;-</span> <span class="cf">function</span>(x) { <span class="sc">!</span><span class="fu">is.na</span>(x) <span class="sc">&amp;</span> x }</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">&quot;_data/LSCMWG_working_data.RData&quot;</span>)</span></code></pre></div>
<div id="classification-for-1990-with-two-variables-each-on-the-health-and-gender-dimensions" class="section level2">
<h2>Classification for 1990 with two variables each on the health and gender dimensions</h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>Classification <span class="ot">&lt;-</span> <span class="cf">function</span>(health, gender, </span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">df =</span> data, </span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">year_to_show =</span> <span class="dv">1990</span>, </span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">min_to_include =</span> <span class="dv">1</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>){</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  qs <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;q&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">sep =</span> <span class="st">&quot;&quot;</span>) </span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>  vars <span class="ot">=</span> <span class="fu">c</span>(health, gender)</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>  df <span class="ot">&lt;-</span> df[, <span class="fu">c</span>(<span class="st">&quot;country&quot;</span>, <span class="st">&quot;year&quot;</span>, <span class="st">&quot;period&quot;</span>, vars)]</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>  df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(country, period) <span class="sc">%&gt;%</span> </span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">all_of</span>(vars), <span class="sc">~</span><span class="fu">mean</span>(.x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">.names =</span> <span class="st">&quot;{col}_avg&quot;</span>), <span class="at">.keep =</span> <span class="st">&quot;all&quot;</span>)</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>  df <span class="ot">&lt;-</span> df[df<span class="sc">$</span>year <span class="sc">%in%</span> <span class="fu">c</span>(<span class="fu">seq</span>(<span class="dv">1965</span>, <span class="dv">2015</span>, <span class="dv">5</span>), <span class="dv">2018</span>), ]</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>  df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(year)</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>  df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">paste</span>(vars, <span class="st">&quot;avg&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>), </span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>                      <span class="sc">~</span><span class="fu">quantile</span>(.x, <span class="at">probs =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="fl">0.2</span>), <span class="at">na.rm =</span> <span class="cn">TRUE</span>)[<span class="dv">2</span>], <span class="at">.names =</span> <span class="st">&quot;{col}_q20&quot;</span>))</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>  df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">paste</span>(vars, <span class="st">&quot;avg&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>), </span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>                      <span class="sc">~</span><span class="fu">quantile</span>(.x, <span class="at">probs =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="fl">0.2</span>), <span class="at">na.rm =</span> <span class="cn">TRUE</span>)[<span class="dv">3</span>], <span class="at">.names =</span> <span class="st">&quot;{col}_q40&quot;</span>))</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>  df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">paste</span>(vars, <span class="st">&quot;avg&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>), </span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>                      <span class="sc">~</span><span class="fu">quantile</span>(.x, <span class="at">probs =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="fl">0.2</span>), <span class="at">na.rm =</span> <span class="cn">TRUE</span>)[<span class="dv">4</span>], <span class="at">.names =</span> <span class="st">&quot;{col}_q60&quot;</span>))</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>  df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">paste</span>(vars, <span class="st">&quot;avg&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>), </span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>                      <span class="sc">~</span><span class="fu">quantile</span>(.x, <span class="at">probs =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="fl">0.2</span>), <span class="at">na.rm =</span> <span class="cn">TRUE</span>)[<span class="dv">5</span>], <span class="at">.names =</span> <span class="st">&quot;{col}_q80&quot;</span>))</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>  df <span class="ot">&lt;-</span> <span class="fu">ungroup</span>(df)</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>  df[, <span class="fu">paste</span>(vars, <span class="st">&quot;quintile&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>)] <span class="ot">&lt;-</span> parallel<span class="sc">::</span><span class="fu">mclapply</span>(vars, <span class="cf">function</span>(var) {</span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>    col <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="cn">NA</span>, <span class="fu">nrow</span>(df))</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>    col[df[, <span class="fu">paste</span>(var, <span class="st">&quot;avg&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>)] <span class="sc">&lt;</span> df[, <span class="fu">paste</span>(var, <span class="st">&quot;avg_q20&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>)]] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>    col[df[, <span class="fu">paste</span>(var, <span class="st">&quot;avg&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>)] <span class="sc">&gt;=</span> df[, <span class="fu">paste</span>(var, <span class="st">&quot;avg_q20&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>)] <span class="sc">&amp;</span> </span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>      df[, <span class="fu">paste</span>(var, <span class="st">&quot;avg&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>)] <span class="sc">&lt;</span> df[, <span class="fu">paste</span>(var, <span class="st">&quot;avg_q40&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>)]] <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>    col[df[, <span class="fu">paste</span>(var, <span class="st">&quot;avg&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>)] <span class="sc">&gt;=</span> df[, <span class="fu">paste</span>(var, <span class="st">&quot;avg_q40&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>)] <span class="sc">&amp;</span></span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>      df[, <span class="fu">paste</span>(var, <span class="st">&quot;avg&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>)] <span class="sc">&lt;</span> df[, <span class="fu">paste</span>(var, <span class="st">&quot;avg_q60&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>)]] <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>    col[df[, <span class="fu">paste</span>(var, <span class="st">&quot;avg&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>)] <span class="sc">&gt;=</span> df[, <span class="fu">paste</span>(var, <span class="st">&quot;avg_q60&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>)] <span class="sc">&amp;</span></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>      df[, <span class="fu">paste</span>(var, <span class="st">&quot;avg&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>)] <span class="sc">&lt;</span> df[, <span class="fu">paste</span>(var, <span class="st">&quot;avg_q80&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>)]] <span class="ot">&lt;-</span> <span class="dv">4</span></span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>    col[df[, <span class="fu">paste</span>(var, <span class="st">&quot;avg&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>)] <span class="sc">&gt;=</span> df[, <span class="fu">paste</span>(var, <span class="st">&quot;avg_q80&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>)]] <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(col)</span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>  df <span class="ot">&lt;-</span> df[, <span class="fu">c</span>(<span class="st">&quot;country&quot;</span>, <span class="st">&quot;year&quot;</span>, <span class="st">&quot;period&quot;</span>, <span class="fu">names</span>(df)[<span class="fu">str_detect</span>(<span class="fu">names</span>(df), <span class="fu">fixed</span>(<span class="st">&quot;quintile&quot;</span>))])]</span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>  <span class="co"># combis &lt;- expand.grid(health = health, gender = gender, stringsAsFactors = FALSE)</span></span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>  <span class="co"># combis &lt;- split(combis, seq(nrow(combis)))</span></span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>health_q1 <span class="ot">&lt;-</span> <span class="fu">rowSums</span>(df[, <span class="fu">paste</span>(health, <span class="st">&quot;quintile&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>)] <span class="sc">==</span> <span class="dv">1</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>health_q2 <span class="ot">&lt;-</span> <span class="fu">rowSums</span>(df[, <span class="fu">paste</span>(health, <span class="st">&quot;quintile&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>)] <span class="sc">==</span> <span class="dv">2</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>health_q3 <span class="ot">&lt;-</span> <span class="fu">rowSums</span>(df[, <span class="fu">paste</span>(health, <span class="st">&quot;quintile&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>)] <span class="sc">==</span> <span class="dv">3</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>health_q4 <span class="ot">&lt;-</span> <span class="fu">rowSums</span>(df[, <span class="fu">paste</span>(health, <span class="st">&quot;quintile&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>)] <span class="sc">==</span> <span class="dv">4</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) </span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>health_q5 <span class="ot">&lt;-</span> <span class="fu">rowSums</span>(df[, <span class="fu">paste</span>(health, <span class="st">&quot;quintile&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>)] <span class="sc">==</span> <span class="dv">5</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) </span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>gender_q1 <span class="ot">&lt;-</span> <span class="fu">rowSums</span>(df[, <span class="fu">paste</span>(gender, <span class="st">&quot;quintile&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>)] <span class="sc">==</span> <span class="dv">1</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) </span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>gender_q2 <span class="ot">&lt;-</span> <span class="fu">rowSums</span>(df[, <span class="fu">paste</span>(gender, <span class="st">&quot;quintile&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>)] <span class="sc">==</span> <span class="dv">2</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) </span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>gender_q3 <span class="ot">&lt;-</span> <span class="fu">rowSums</span>(df[, <span class="fu">paste</span>(gender, <span class="st">&quot;quintile&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>)] <span class="sc">==</span> <span class="dv">3</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) </span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>gender_q4 <span class="ot">&lt;-</span> <span class="fu">rowSums</span>(df[, <span class="fu">paste</span>(gender, <span class="st">&quot;quintile&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>)] <span class="sc">==</span> <span class="dv">4</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) </span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>gender_q5 <span class="ot">&lt;-</span> <span class="fu">rowSums</span>(df[, <span class="fu">paste</span>(gender, <span class="st">&quot;quintile&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>)] <span class="sc">==</span> <span class="dv">5</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a>  health_vars <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;health&quot;</span>, qs, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>)</span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a>  gender_vars <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;gender&quot;</span>, qs, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>)</span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>health_valid <span class="ot">&lt;-</span> <span class="fu">rowSums</span>(df[, health_vars])</span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>gender_valid <span class="ot">&lt;-</span> <span class="fu">rowSums</span>(df[, gender_vars])</span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>valid <span class="ot">&lt;-</span> df<span class="sc">$</span>health_valid <span class="sc">*</span> df<span class="sc">$</span>gender_valid</span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a>  to_keep <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;country&quot;</span>, <span class="st">&quot;year&quot;</span>, <span class="st">&quot;period&quot;</span>, <span class="st">&quot;valid&quot;</span>, <span class="st">&quot;health_valid&quot;</span>, <span class="st">&quot;gender_valid&quot;</span>, health_vars, gender_vars)</span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a>  df <span class="ot">&lt;-</span> df[df<span class="sc">$</span>valid <span class="sc">&gt;</span> <span class="dv">0</span>, to_keep]</span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true" tabindex="-1"></a>  health_true <span class="ot">&lt;-</span> df[, health_vars] <span class="sc">==</span> <span class="fu">apply</span>(df[, health_vars], <span class="at">MARGIN =</span> <span class="dv">1</span>, <span class="at">FUN =</span> max)</span>
<span id="cb2-55"><a href="#cb2-55" aria-hidden="true" tabindex="-1"></a>  gender_true <span class="ot">&lt;-</span> df[, gender_vars] <span class="sc">==</span> <span class="fu">apply</span>(df[, gender_vars], <span class="at">MARGIN =</span> <span class="dv">1</span>, <span class="at">FUN =</span> max)</span>
<span id="cb2-56"><a href="#cb2-56" aria-hidden="true" tabindex="-1"></a>  health_help <span class="ot">&lt;-</span> health_true <span class="sc">*</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">nrow =</span> <span class="fu">nrow</span>(health_true), <span class="at">ncol =</span> <span class="dv">5</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>)</span>
<span id="cb2-57"><a href="#cb2-57" aria-hidden="true" tabindex="-1"></a>  gender_help <span class="ot">&lt;-</span> gender_true <span class="sc">*</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">nrow =</span> <span class="fu">nrow</span>(gender_true), <span class="at">ncol =</span> <span class="dv">5</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>)</span>
<span id="cb2-58"><a href="#cb2-58" aria-hidden="true" tabindex="-1"></a>  help_floor <span class="ot">&lt;-</span> <span class="cf">function</span>(set) { <span class="fu">return</span>(<span class="fu">floor</span>(<span class="fu">mean</span>(set[set <span class="sc">!=</span> <span class="dv">0</span>]))) }</span>
<span id="cb2-59"><a href="#cb2-59" aria-hidden="true" tabindex="-1"></a>  help_ceiling <span class="ot">&lt;-</span> <span class="cf">function</span>(set) { <span class="fu">return</span>(<span class="fu">ceiling</span>(<span class="fu">mean</span>(set[set <span class="sc">!=</span> <span class="dv">0</span>]))) }</span>
<span id="cb2-60"><a href="#cb2-60" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>health_class <span class="ot">&lt;-</span> <span class="fu">apply</span>(health_help, <span class="at">MARGIN =</span> <span class="dv">1</span>, help_floor)</span>
<span id="cb2-61"><a href="#cb2-61" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>gender_class <span class="ot">&lt;-</span> <span class="fu">apply</span>(gender_help, <span class="at">MARGIN =</span> <span class="dv">1</span>, help_floor)</span>
<span id="cb2-62"><a href="#cb2-62" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>health_class_alt <span class="ot">&lt;-</span> <span class="fu">apply</span>(health_help, <span class="at">MARGIN =</span> <span class="dv">1</span>, help_ceiling)</span>
<span id="cb2-63"><a href="#cb2-63" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>gender_class_alt <span class="ot">&lt;-</span> <span class="fu">apply</span>(gender_help, <span class="at">MARGIN =</span> <span class="dv">1</span>, help_ceiling)</span>
<span id="cb2-64"><a href="#cb2-64" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>health_flag <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(df<span class="sc">$</span>health_class <span class="sc">!=</span> df<span class="sc">$</span>health_class_alt, <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb2-65"><a href="#cb2-65" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>gender_flag <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(df<span class="sc">$</span>gender_class <span class="sc">!=</span> df<span class="sc">$</span>gender_class_alt, <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb2-66"><a href="#cb2-66" aria-hidden="true" tabindex="-1"></a>  health_index <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;health_q&quot;</span>, df<span class="sc">$</span>health_class, <span class="at">sep =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb2-67"><a href="#cb2-67" aria-hidden="true" tabindex="-1"></a>  gender_index <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;gender_q&quot;</span>, df<span class="sc">$</span>gender_class, <span class="at">sep =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb2-68"><a href="#cb2-68" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>health_n <span class="ot">&lt;-</span> <span class="fu">unlist</span>(<span class="fu">lapply</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(health_index), <span class="cf">function</span>(index) { </span>
<span id="cb2-69"><a href="#cb2-69" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.integer</span>(df[index, health_index[index]]) </span>
<span id="cb2-70"><a href="#cb2-70" aria-hidden="true" tabindex="-1"></a>  }))</span>
<span id="cb2-71"><a href="#cb2-71" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>gender_n <span class="ot">&lt;-</span> <span class="fu">unlist</span>(<span class="fu">lapply</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(gender_index), <span class="cf">function</span>(index) { </span>
<span id="cb2-72"><a href="#cb2-72" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.integer</span>(df[index, gender_index[index]]) </span>
<span id="cb2-73"><a href="#cb2-73" aria-hidden="true" tabindex="-1"></a>  }))</span>
<span id="cb2-74"><a href="#cb2-74" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>combi <span class="ot">&lt;-</span> df<span class="sc">$</span>health_n <span class="sc">*</span> df<span class="sc">$</span>gender_n</span>
<span id="cb2-75"><a href="#cb2-75" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>class <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;H&quot;</span>, df<span class="sc">$</span>health_class, <span class="st">&quot;G&quot;</span>, df<span class="sc">$</span>gender_class, <span class="at">sep =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb2-76"><a href="#cb2-76" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>class_num <span class="ot">&lt;-</span>df<span class="sc">$</span>health_class <span class="sc">*</span> df<span class="sc">$</span>gender_class</span>
<span id="cb2-77"><a href="#cb2-77" aria-hidden="true" tabindex="-1"></a>  test <span class="ot">&lt;-</span> <span class="fu">table</span>(df[df<span class="sc">$</span>year <span class="sc">==</span> year_to_show <span class="sc">&amp;</span> df<span class="sc">$</span>valid <span class="sc">&gt;=</span> min_to_include, <span class="fu">c</span>(<span class="st">&quot;health_class&quot;</span>, <span class="st">&quot;gender_class&quot;</span>)])</span>
<span id="cb2-78"><a href="#cb2-78" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(test)</span>
<span id="cb2-79"><a href="#cb2-79" aria-hidden="true" tabindex="-1"></a>  number_of_countries <span class="ot">&lt;-</span> <span class="fu">sum</span>(test)</span>
<span id="cb2-80"><a href="#cb2-80" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>support <span class="ot">&lt;-</span> <span class="fu">paste</span>(df<span class="sc">$</span>country, <span class="st">&quot; (&quot;</span>, df<span class="sc">$</span>combi, <span class="st">&quot;/&quot;</span>, df<span class="sc">$</span>valid, <span class="st">&quot;)&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb2-81"><a href="#cb2-81" aria-hidden="true" tabindex="-1"></a>  dat <span class="ot">&lt;-</span> df[df<span class="sc">$</span>year <span class="sc">==</span> year_to_show, ]</span>
<span id="cb2-82"><a href="#cb2-82" aria-hidden="true" tabindex="-1"></a>  table_to_return <span class="ot">&lt;-</span> <span class="fu">tapply</span>(dat<span class="sc">$</span>support, </span>
<span id="cb2-83"><a href="#cb2-83" aria-hidden="true" tabindex="-1"></a>                            <span class="at">INDEX =</span> <span class="fu">list</span>(<span class="at">health =</span> dat<span class="sc">$</span>health_class, <span class="at">gender =</span> dat<span class="sc">$</span>gender_class), </span>
<span id="cb2-84"><a href="#cb2-84" aria-hidden="true" tabindex="-1"></a>                            paste, <span class="at">collapse =</span> <span class="st">&quot;; &quot;</span>)</span>
<span id="cb2-85"><a href="#cb2-85" aria-hidden="true" tabindex="-1"></a>  table_to_return[<span class="fu">is.na</span>(table_to_return)] <span class="ot">&lt;-</span> <span class="st">&quot;&quot;</span></span>
<span id="cb2-86"><a href="#cb2-86" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dimnames</span>(table_to_return) <span class="ot">&lt;-</span> <span class="fu">lapply</span>(<span class="fu">dimnames</span>(table_to_return), <span class="cf">function</span>(name) { <span class="fu">paste</span>(<span class="st">&quot;Q&quot;</span>, name, <span class="at">sep =</span> <span class="st">&quot;&quot;</span>) })</span>
<span id="cb2-87"><a href="#cb2-87" aria-hidden="true" tabindex="-1"></a>  <span class="do">## from here, this is the old way, to create the fuzzy table, not needed anymore but useful for comparison</span></span>
<span id="cb2-88"><a href="#cb2-88" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>H1G1 <span class="ot">&lt;-</span> df<span class="sc">$</span>health_q1 <span class="sc">*</span> df<span class="sc">$</span>gender_q1</span>
<span id="cb2-89"><a href="#cb2-89" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>H2G1 <span class="ot">&lt;-</span> df<span class="sc">$</span>health_q2 <span class="sc">*</span> df<span class="sc">$</span>gender_q1</span>
<span id="cb2-90"><a href="#cb2-90" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>H3G1 <span class="ot">&lt;-</span> df<span class="sc">$</span>health_q3 <span class="sc">*</span> df<span class="sc">$</span>gender_q1</span>
<span id="cb2-91"><a href="#cb2-91" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>H4G1 <span class="ot">&lt;-</span> df<span class="sc">$</span>health_q4 <span class="sc">*</span> df<span class="sc">$</span>gender_q1</span>
<span id="cb2-92"><a href="#cb2-92" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>H5G1 <span class="ot">&lt;-</span> df<span class="sc">$</span>health_q5 <span class="sc">*</span> df<span class="sc">$</span>gender_q1</span>
<span id="cb2-93"><a href="#cb2-93" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>H1G2 <span class="ot">&lt;-</span> df<span class="sc">$</span>health_q1 <span class="sc">*</span> df<span class="sc">$</span>gender_q2</span>
<span id="cb2-94"><a href="#cb2-94" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>H2G2 <span class="ot">&lt;-</span> df<span class="sc">$</span>health_q2 <span class="sc">*</span> df<span class="sc">$</span>gender_q2</span>
<span id="cb2-95"><a href="#cb2-95" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>H3G2 <span class="ot">&lt;-</span> df<span class="sc">$</span>health_q3 <span class="sc">*</span> df<span class="sc">$</span>gender_q2</span>
<span id="cb2-96"><a href="#cb2-96" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>H4G2 <span class="ot">&lt;-</span> df<span class="sc">$</span>health_q4 <span class="sc">*</span> df<span class="sc">$</span>gender_q2</span>
<span id="cb2-97"><a href="#cb2-97" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>H5G2 <span class="ot">&lt;-</span> df<span class="sc">$</span>health_q5 <span class="sc">*</span> df<span class="sc">$</span>gender_q2</span>
<span id="cb2-98"><a href="#cb2-98" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>H1G3 <span class="ot">&lt;-</span> df<span class="sc">$</span>health_q1 <span class="sc">*</span> df<span class="sc">$</span>gender_q3</span>
<span id="cb2-99"><a href="#cb2-99" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>H2G3 <span class="ot">&lt;-</span> df<span class="sc">$</span>health_q2 <span class="sc">*</span> df<span class="sc">$</span>gender_q3</span>
<span id="cb2-100"><a href="#cb2-100" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>H3G3 <span class="ot">&lt;-</span> df<span class="sc">$</span>health_q3 <span class="sc">*</span> df<span class="sc">$</span>gender_q3</span>
<span id="cb2-101"><a href="#cb2-101" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>H4G3 <span class="ot">&lt;-</span> df<span class="sc">$</span>health_q4 <span class="sc">*</span> df<span class="sc">$</span>gender_q3</span>
<span id="cb2-102"><a href="#cb2-102" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>H5G3 <span class="ot">&lt;-</span> df<span class="sc">$</span>health_q5 <span class="sc">*</span> df<span class="sc">$</span>gender_q3</span>
<span id="cb2-103"><a href="#cb2-103" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>H1G4 <span class="ot">&lt;-</span> df<span class="sc">$</span>health_q1 <span class="sc">*</span> df<span class="sc">$</span>gender_q4</span>
<span id="cb2-104"><a href="#cb2-104" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>H2G4 <span class="ot">&lt;-</span> df<span class="sc">$</span>health_q2 <span class="sc">*</span> df<span class="sc">$</span>gender_q4</span>
<span id="cb2-105"><a href="#cb2-105" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>H3G4 <span class="ot">&lt;-</span> df<span class="sc">$</span>health_q3 <span class="sc">*</span> df<span class="sc">$</span>gender_q4</span>
<span id="cb2-106"><a href="#cb2-106" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>H4G4 <span class="ot">&lt;-</span> df<span class="sc">$</span>health_q4 <span class="sc">*</span> df<span class="sc">$</span>gender_q4</span>
<span id="cb2-107"><a href="#cb2-107" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>H5G4 <span class="ot">&lt;-</span> df<span class="sc">$</span>health_q5 <span class="sc">*</span> df<span class="sc">$</span>gender_q4</span>
<span id="cb2-108"><a href="#cb2-108" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>H1G5 <span class="ot">&lt;-</span> df<span class="sc">$</span>health_q1 <span class="sc">*</span> df<span class="sc">$</span>gender_q5</span>
<span id="cb2-109"><a href="#cb2-109" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>H2G5 <span class="ot">&lt;-</span> df<span class="sc">$</span>health_q2 <span class="sc">*</span> df<span class="sc">$</span>gender_q5</span>
<span id="cb2-110"><a href="#cb2-110" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>H3G5 <span class="ot">&lt;-</span> df<span class="sc">$</span>health_q3 <span class="sc">*</span> df<span class="sc">$</span>gender_q5</span>
<span id="cb2-111"><a href="#cb2-111" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>H4G5 <span class="ot">&lt;-</span> df<span class="sc">$</span>health_q4 <span class="sc">*</span> df<span class="sc">$</span>gender_q5</span>
<span id="cb2-112"><a href="#cb2-112" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>H5G5 <span class="ot">&lt;-</span> df<span class="sc">$</span>health_q5 <span class="sc">*</span> df<span class="sc">$</span>gender_q5</span>
<span id="cb2-113"><a href="#cb2-113" aria-hidden="true" tabindex="-1"></a>  vars <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;H1G1&quot;</span>, <span class="st">&quot;H2G1&quot;</span>, <span class="st">&quot;H3G1&quot;</span>, <span class="st">&quot;H4G1&quot;</span>, <span class="st">&quot;H5G1&quot;</span>, </span>
<span id="cb2-114"><a href="#cb2-114" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;H1G2&quot;</span>, <span class="st">&quot;H2G2&quot;</span>, <span class="st">&quot;H3G2&quot;</span>, <span class="st">&quot;H4G2&quot;</span>, <span class="st">&quot;H5G2&quot;</span>, </span>
<span id="cb2-115"><a href="#cb2-115" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;H1G3&quot;</span>, <span class="st">&quot;H2G3&quot;</span>, <span class="st">&quot;H3G3&quot;</span>, <span class="st">&quot;H4G3&quot;</span>, <span class="st">&quot;H5G3&quot;</span>, </span>
<span id="cb2-116"><a href="#cb2-116" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;H1G4&quot;</span>, <span class="st">&quot;H2G4&quot;</span>, <span class="st">&quot;H3G4&quot;</span>, <span class="st">&quot;H4G4&quot;</span>, <span class="st">&quot;H5G4&quot;</span>, </span>
<span id="cb2-117"><a href="#cb2-117" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;H1G5&quot;</span>, <span class="st">&quot;H2G5&quot;</span>, <span class="st">&quot;H3G5&quot;</span>, <span class="st">&quot;H4G5&quot;</span>, <span class="st">&quot;H5G5&quot;</span>)</span>
<span id="cb2-118"><a href="#cb2-118" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>(vars) <span class="ot">&lt;-</span> vars</span>
<span id="cb2-119"><a href="#cb2-119" aria-hidden="true" tabindex="-1"></a>  dat <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(df[df<span class="sc">$</span>year <span class="sc">==</span> year_to_show, <span class="fu">c</span>(<span class="st">&quot;country&quot;</span>, <span class="st">&quot;valid&quot;</span>, vars)])</span>
<span id="cb2-120"><a href="#cb2-120" aria-hidden="true" tabindex="-1"></a>  classifications <span class="ot">&lt;-</span> parallel<span class="sc">::</span><span class="fu">mclapply</span>(vars, <span class="cf">function</span>(var_name) {</span>
<span id="cb2-121"><a href="#cb2-121" aria-hidden="true" tabindex="-1"></a>    new <span class="ot">&lt;-</span> dat[dat[, var_name] <span class="sc">&gt;=</span> min_to_include, <span class="fu">c</span>(<span class="st">&quot;country&quot;</span>, var_name, <span class="st">&quot;valid&quot;</span>)]</span>
<span id="cb2-122"><a href="#cb2-122" aria-hidden="true" tabindex="-1"></a>    countries <span class="ot">&lt;-</span> new<span class="sc">$</span>country</span>
<span id="cb2-123"><a href="#cb2-123" aria-hidden="true" tabindex="-1"></a>    new <span class="ot">&lt;-</span> <span class="fu">paste</span>(new[, <span class="st">&quot;country&quot;</span>], <span class="st">&quot; (&quot;</span>, new[, var_name], <span class="st">&quot;/&quot;</span>, new[, <span class="st">&quot;valid&quot;</span>], <span class="st">&quot;)&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb2-124"><a href="#cb2-124" aria-hidden="true" tabindex="-1"></a>    new <span class="ot">&lt;-</span> new[new <span class="sc">!=</span> <span class="st">&quot; (/)&quot;</span>]    </span>
<span id="cb2-125"><a href="#cb2-125" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">list</span>(<span class="at">class =</span> new, <span class="at">ctry =</span> countries))</span>
<span id="cb2-126"><a href="#cb2-126" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb2-127"><a href="#cb2-127" aria-hidden="true" tabindex="-1"></a>  countries <span class="ot">&lt;-</span> <span class="fu">sort</span>(<span class="fu">unique</span>(<span class="fu">unlist</span>(<span class="fu">lapply</span>(classifications, <span class="cf">function</span>(x) { x<span class="sc">$</span>ctry }))))</span>
<span id="cb2-128"><a href="#cb2-128" aria-hidden="true" tabindex="-1"></a>  classifications <span class="ot">&lt;-</span> <span class="fu">lapply</span>(classifications, <span class="cf">function</span>(class) { class<span class="sc">$</span>class })</span>
<span id="cb2-129"><a href="#cb2-129" aria-hidden="true" tabindex="-1"></a>  classifications <span class="ot">&lt;-</span> <span class="fu">lapply</span>(classifications, paste, <span class="at">collapse =</span> <span class="st">&quot;; &quot;</span>)</span>
<span id="cb2-130"><a href="#cb2-130" aria-hidden="true" tabindex="-1"></a>  <span class="co"># print(matrix(names(classifications), 5, 5, dimnames = list(health = qs, gender = qs)))</span></span>
<span id="cb2-131"><a href="#cb2-131" aria-hidden="true" tabindex="-1"></a>  fuzzy_table <span class="ot">&lt;-</span> <span class="fu">matrix</span>(classifications, <span class="dv">5</span>, <span class="dv">5</span>, <span class="at">dimnames =</span> <span class="fu">list</span>(<span class="at">health =</span> qs, <span class="at">gender =</span> qs))</span>
<span id="cb2-132"><a href="#cb2-132" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;Number of countries classified: &quot;</span>, number_of_countries, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb2-133"><a href="#cb2-133" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(number_of_countries <span class="sc">!=</span> <span class="fu">length</span>(countries)) {</span>
<span id="cb2-134"><a href="#cb2-134" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">&quot;</span><span class="sc">\n</span><span class="st">Not classifying the same number of countries as the old way!&quot;</span>)</span>
<span id="cb2-135"><a href="#cb2-135" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-136"><a href="#cb2-136" aria-hidden="true" tabindex="-1"></a>  df <span class="ot">&lt;-</span> df[, <span class="sc">!</span><span class="fu">names</span>(df) <span class="sc">%in%</span> vars]</span>
<span id="cb2-137"><a href="#cb2-137" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">list</span>(<span class="at">df =</span> df, <span class="at">n =</span> number_of_countries, <span class="at">table =</span> table_to_return, <span class="at">fuzzy =</span> fuzzy_table))  </span>
<span id="cb2-138"><a href="#cb2-138" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-139"><a href="#cb2-139" aria-hidden="true" tabindex="-1"></a>result <span class="ot">&lt;-</span> <span class="fu">Classification</span>(<span class="at">health =</span> variables<span class="sc">$</span>health, <span class="at">gender =</span> variables<span class="sc">$</span>gender)</span></code></pre></div>
<pre><code>##             gender_class
## health_class  1  2  3  4  5
##            1 26  7  1  0  0
##            2  8 15  7  4  0
##            3  0  8 14 10  1
##            4  0  2 10 15  0
##            5  0  0  1 20  7
## Number of countries classified:  156</code></pre>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>kableExtra<span class="sc">::</span><span class="fu">kable</span>(result<span class="sc">$</span>table, <span class="at">format =</span> <span class="st">&quot;html&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>(<span class="st">&quot;striped&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">add_header_above</span>(<span class="fu">c</span>(<span class="st">&quot; &quot;</span> <span class="ot">=</span> <span class="dv">1</span>, <span class="st">&quot;Gender&quot;</span> <span class="ot">=</span> <span class="dv">5</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">group_rows</span>(<span class="st">&quot;Health&quot;</span>, <span class="dv">1</span>, <span class="dv">5</span>)</span></code></pre></div>
<table class="table table-striped" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="empty-cells: hide;border-bottom:hidden;" colspan="1">
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="5">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Gender
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
Q1
</th>
<th style="text-align:left;">
Q2
</th>
<th style="text-align:left;">
Q3
</th>
<th style="text-align:left;">
Q4
</th>
<th style="text-align:left;">
Q5
</th>
</tr>
</thead>
<tbody>
<tr grouplength="5">
<td colspan="6" style="border-bottom: 1px solid;">
<strong>Health</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Q1
</td>
<td style="text-align:left;">
Afghanistan (4/4); Angola (2/2); Bangladesh (1/4); Benin (2/4); Burkina Faso (2/2); Cameroon (1/4); Central African Republic (4/4); Chad (2/2); Congo, DRC (4/4); Cote d’Ivoire (4/4); Equatorial Guinea (2/2); Gambia (2/4); Guinea (2/2); Laos (2/4); Liberia (4/4); Madagascar (2/2); Malawi (4/4); Mali (4/4); Mozambique (4/4); Nepal (2/4); Niger (4/4); Nigeria (2/2); Sierra Leone (4/4); Tanzania (2/4); Uganda (2/4); Zambia (2/4)
</td>
<td style="text-align:left;">
Bhutan (1/2); Burundi (0/4); Cambodia (0/4); Guinea-Bissau (2/2); Haiti (0/4); Pakistan (0/4); Rwanda (2/4)
</td>
<td style="text-align:left;">
Somalia (2/2)
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Q2
</td>
<td style="text-align:left;">
Egypt (1/4); India (2/4); Kenya (2/4); Nicaragua (1/4); Senegal (2/4); Sudan (2/4); Togo (2/4); Yemen (4/4)
</td>
<td style="text-align:left;">
Bolivia (2/4); Comoros (2/2); Congo (2/4); El Salvador (2/4); Ghana (4/4); Guatemala (2/4); Indonesia (2/4); Iran (2/4); Maldives (0/4); Mauritania (4/4); Namibia (1/4); Papua New Guinea (2/4); Sao Tome &amp; Principe (2/2); Turkey (1/4); Zimbabwe (2/4)
</td>
<td style="text-align:left;">
Botswana (0/4); Dominican Republic (0/4); Eswatini (0/4); Gabon (0/4); Morocco (0/4); Myanmar (2/4); Peru (2/4)
</td>
<td style="text-align:left;">
Djibouti (2/2); Kiribati (2/2); Lesotho (0/4); Mongolia (4/4)
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Q3
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
Algeria (0/4); Cape Verde (2/2); Grenada (1/2); Honduras (0/4); Iraq (0/4); Saudi Arabia (2/4); Solomon Islands (2/2); Syria (1/4)
</td>
<td style="text-align:left;">
Belize (0/4); Ecuador (2/4); Jordan (0/4); Libya (0/4); Mauritius (0/4); Mexico (2/4); Oman (2/2); Paraguay (2/4); South Africa (0/4); Suriname (2/2); Thailand (1/4); Trinidad &amp; Tobago (1/4); Tunisia (0/4); Vanuatu (2/2)
</td>
<td style="text-align:left;">
Albania (1/4); Brazil (0/4); China (1/4); Fiji (2/4); Guyana (0/4); Micronesia (2/2); Philippines (2/4); Samoa (1/2); Tonga (1/4); Viet Nam (0/4)
</td>
<td style="text-align:left;">
North Korea (1/2)
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Q4
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
Panama (2/2); Saint Lucia (2/2)
</td>
<td style="text-align:left;">
Antigua &amp; Barbuda (2/2); Bahamas (2/2); Brunei (1/4); Colombia (2/4); Costa Rica (0/4); Hungary (2/4); Jamaica (0/4); Romania (2/4); Saint Vincent &amp; the Grenadines (2/2); Venezuela (0/4)
</td>
<td style="text-align:left;">
Argentina (0/4); Bahrain (4/4); Barbados (1/4); Bulgaria (0/4); Chile (2/4); Kuwait (4/4); Lebanon (2/2); Malaysia (0/4); Poland (2/4); Qatar (1/4); Seychelles (2/2); South Korea (0/4); Sri Lanka (4/4); United Arab Emirates (0/4); Uruguay (2/4)
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Q5
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
Cyprus (2/4)
</td>
<td style="text-align:left;">
Australia (2/4); Austria (0/4); Belgium (2/4); Cuba (0/4); Denmark (0/4); Finland (0/4); France (2/4); Greece (0/4); Israel (2/4); Italy (0/4); Japan (2/4); Luxembourg (0/4); Netherlands (2/4); New Zealand (4/4); Portugal (0/4); Singapore (0/4); Spain (0/4); Switzerland (0/4); United Kingdom (2/4); United States of America (2/4)
</td>
<td style="text-align:left;">
Canada (4/4); Iceland (4/4); Ireland (4/4); Malta (4/4); Norway (4/4); Sweden (4/4); Taiwan (2/2)
</td>
</tr>
</tbody>
</table>
<div id="this-is-the-fuzzy-version-of-the-above-classification-only-for-illustration-not-for-analyses" class="section level3">
<h3>This is the fuzzy version of the above classification (only for illustration, not for analyses)</h3>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>kableExtra<span class="sc">::</span><span class="fu">kable</span>(result<span class="sc">$</span>fuzzy, <span class="at">format =</span> <span class="st">&quot;html&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>(<span class="st">&quot;striped&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">add_header_above</span>(<span class="fu">c</span>(<span class="st">&quot; &quot;</span> <span class="ot">=</span> <span class="dv">1</span>, <span class="st">&quot;Gender&quot;</span> <span class="ot">=</span> <span class="dv">5</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">group_rows</span>(<span class="st">&quot;Health&quot;</span>, <span class="dv">1</span>, <span class="dv">5</span>)</span></code></pre></div>
<table class="table table-striped" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="empty-cells: hide;border-bottom:hidden;" colspan="1">
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="5">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Gender
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
q1
</th>
<th style="text-align:left;">
q2
</th>
<th style="text-align:left;">
q3
</th>
<th style="text-align:left;">
q4
</th>
<th style="text-align:left;">
q5
</th>
</tr>
</thead>
<tbody>
<tr grouplength="5">
<td colspan="6" style="border-bottom: 1px solid;">
<strong>Health</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
q1
</td>
<td style="text-align:left;">
Afghanistan (4/4); Angola (2/2); Bangladesh (1/4); Benin (2/4); Burkina Faso (2/2); Burundi (2/4); Cambodia (1/4); Cameroon (1/4); Central African Republic (4/4); Chad (2/2); Congo, DRC (4/4); Cote d’Ivoire (4/4); Equatorial Guinea (2/2); Gambia (2/4); Guinea (2/2); Haiti (2/4); Laos (2/4); Liberia (4/4); Madagascar (2/2); Malawi (4/4); Mali (4/4); Mozambique (4/4); Nepal (2/4); Niger (4/4); Nigeria (2/2); Pakistan (1/4); Sierra Leone (4/4); Tanzania (2/4); Uganda (2/4); Zambia (2/4)
</td>
<td style="text-align:left;">
Bangladesh (1/4); Benin (2/4); Bhutan (1/2); Cameroon (1/4); Guinea-Bissau (2/2); Laos (2/4); Nepal (2/4); Rwanda (2/4); Tanzania (2/4); Uganda (2/4); Zambia (2/4)
</td>
<td style="text-align:left;">
Burundi (2/4); Cambodia (1/4); Haiti (2/4); Pakistan (1/4); Rwanda (2/4); Somalia (2/2)
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
q2
</td>
<td style="text-align:left;">
Bangladesh (1/4); Cambodia (1/4); Cameroon (1/4); Egypt (1/4); Eswatini (1/4); Gabon (2/4); Gambia (2/4); India (2/4); Kenya (2/4); Maldives (2/4); Nicaragua (1/4); Pakistan (1/4); Senegal (2/4); Sudan (2/4); Togo (2/4); Yemen (4/4)
</td>
<td style="text-align:left;">
Bangladesh (1/4); Bhutan (1/2); Bolivia (2/4); Botswana (1/4); Cameroon (1/4); Comoros (2/2); Congo (2/4); Dominican Republic (1/4); Egypt (1/4); El Salvador (2/4); Ghana (4/4); Guatemala (2/4); India (2/4); Indonesia (2/4); Iran (2/4); Kenya (2/4); Mauritania (4/4); Morocco (1/4); Namibia (1/4); Nicaragua (1/4); Papua New Guinea (2/4); Sao Tome &amp; Principe (2/2); Senegal (2/4); Sudan (2/4); Togo (2/4); Turkey (1/4); Zimbabwe (2/4)
</td>
<td style="text-align:left;">
Bolivia (2/4); Cambodia (1/4); El Salvador (2/4); Guatemala (2/4); Indonesia (2/4); Lesotho (2/4); Maldives (2/4); Myanmar (2/4); Namibia (1/4); Pakistan (1/4); Papua New Guinea (2/4); Peru (2/4); Turkey (1/4)
</td>
<td style="text-align:left;">
Botswana (1/4); Djibouti (2/2); Dominican Republic (1/4); Kiribati (2/2); Mongolia (4/4); Morocco (1/4); Myanmar (2/4)
</td>
<td style="text-align:left;">
Eswatini (1/4); Gabon (2/4); Lesotho (2/4)
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
q3
</td>
<td style="text-align:left;">
Algeria (2/4); Egypt (1/4); Eswatini (1/4); Honduras (2/4); Iraq (2/4); Nicaragua (1/4)
</td>
<td style="text-align:left;">
Belize (1/4); Botswana (1/4); Cape Verde (2/2); Congo (2/4); Dominican Republic (1/4); Egypt (1/4); Grenada (1/2); Iran (2/4); Jordan (1/4); Libya (2/4); Mauritius (1/4); Morocco (1/4); Namibia (1/4); Nicaragua (1/4); Saudi Arabia (2/4); Solomon Islands (2/2); South Africa (2/4); Syria (1/4); Tunisia (2/4); Turkey (1/4); Zimbabwe (2/4)
</td>
<td style="text-align:left;">
Brazil (2/4); Ecuador (2/4); Guyana (2/4); Iraq (2/4); Mexico (2/4); Namibia (1/4); Oman (2/2); Paraguay (2/4); Peru (2/4); Saudi Arabia (2/4); Suriname (2/2); Syria (1/4); Thailand (1/4); Trinidad &amp; Tobago (1/4); Turkey (1/4); Vanuatu (2/2); Viet Nam (1/4)
</td>
<td style="text-align:left;">
Albania (1/4); Algeria (2/4); Botswana (1/4); China (1/4); Dominican Republic (1/4); Ecuador (2/4); Fiji (2/4); Honduras (2/4); Jordan (1/4); Mauritius (1/4); Micronesia (2/2); Morocco (1/4); Paraguay (2/4); Philippines (2/4); Samoa (1/2); South Africa (2/4); Thailand (1/4); Tonga (1/4); Trinidad &amp; Tobago (1/4)
</td>
<td style="text-align:left;">
Albania (1/4); Belize (1/4); Brazil (2/4); China (1/4); Eswatini (1/4); Guyana (2/4); Libya (2/4); North Korea (1/2); Philippines (2/4); Tonga (1/4); Tunisia (2/4); Viet Nam (1/4)
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
q4
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
Belize (1/4); Costa Rica (1/4); Grenada (1/2); Jamaica (2/4); Jordan (1/4); Mauritius (1/4); Panama (2/2); Saint Lucia (2/2); Syria (1/4); Venezuela (2/4)
</td>
<td style="text-align:left;">
Antigua &amp; Barbuda (2/2); Argentina (2/4); Bahamas (2/2); Brunei (1/4); Bulgaria (1/4); Colombia (2/4); Hungary (2/4); Malaysia (1/4); Mexico (2/4); Romania (2/4); Saint Vincent &amp; the Grenadines (2/2); South Korea (1/4); Syria (1/4); Thailand (1/4); Trinidad &amp; Tobago (1/4); United Arab Emirates (2/4); Viet Nam (1/4)
</td>
<td style="text-align:left;">
Albania (1/4); Bahrain (4/4); Barbados (1/4); Brunei (1/4); Chile (2/4); China (1/4); Colombia (2/4); Fiji (2/4); Hungary (2/4); Jordan (1/4); Kuwait (4/4); Lebanon (2/2); Mauritius (1/4); Poland (2/4); Qatar (1/4); Romania (2/4); Samoa (1/2); Seychelles (2/2); Sri Lanka (4/4); Thailand (1/4); Tonga (1/4); Trinidad &amp; Tobago (1/4); Uruguay (2/4); Venezuela (2/4)
</td>
<td style="text-align:left;">
Albania (1/4); Argentina (2/4); Barbados (1/4); Belize (1/4); Bulgaria (1/4); China (1/4); Costa Rica (1/4); Jamaica (2/4); Malaysia (1/4); North Korea (1/2); Poland (2/4); Qatar (1/4); South Korea (1/4); Tonga (1/4); United Arab Emirates (2/4); Uruguay (2/4); Viet Nam (1/4)
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
q5
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
Costa Rica (1/4)
</td>
<td style="text-align:left;">
Austria (2/4); Brunei (1/4); Bulgaria (1/4); Cuba (2/4); Cyprus (2/4); Denmark (2/4); Finland (2/4); Greece (2/4); Italy (2/4); Luxembourg (2/4); Malaysia (1/4); Portugal (2/4); Singapore (2/4); South Korea (1/4); Spain (2/4); Switzerland (2/4)
</td>
<td style="text-align:left;">
Australia (2/4); Barbados (1/4); Belgium (2/4); Brunei (1/4); Chile (2/4); Cyprus (2/4); France (2/4); Israel (2/4); Japan (2/4); Netherlands (2/4); New Zealand (4/4); Qatar (1/4); United Kingdom (2/4); United States of America (2/4)
</td>
<td style="text-align:left;">
Australia (2/4); Austria (2/4); Barbados (1/4); Belgium (2/4); Bulgaria (1/4); Canada (4/4); Costa Rica (1/4); Cuba (2/4); Denmark (2/4); Finland (2/4); France (2/4); Greece (2/4); Iceland (4/4); Ireland (4/4); Israel (2/4); Italy (2/4); Japan (2/4); Luxembourg (2/4); Malaysia (1/4); Malta (4/4); Netherlands (2/4); Norway (4/4); Portugal (2/4); Qatar (1/4); Singapore (2/4); South Korea (1/4); Spain (2/4); Sweden (4/4); Switzerland (2/4); Taiwan (2/2); United Kingdom (2/4); United States of America (2/4)
</td>
</tr>
</tbody>
</table>
<!-- ### Classification using the performance versions of the health and gender inputs -->
</div>
<div id="merging-the-classifications-into-the-dataset" class="section level3">
<h3>Merging the classifications into the dataset</h3>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>variables<span class="sc">$</span>class <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;health_valid&quot;</span>, <span class="st">&quot;gender_valid&quot;</span>, <span class="st">&quot;health_class&quot;</span>, <span class="st">&quot;gender_class&quot;</span>, </span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>                     <span class="st">&quot;health_class_alt&quot;</span>, <span class="st">&quot;gender_class_alt&quot;</span>, <span class="st">&quot;health_flag&quot;</span>, <span class="st">&quot;gender_flag&quot;</span>, </span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>                     <span class="st">&quot;health_n&quot;</span>, <span class="st">&quot;gender_n&quot;</span>, <span class="st">&quot;class&quot;</span>, <span class="st">&quot;support&quot;</span>)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(result<span class="sc">$</span>df[, <span class="fu">c</span>(<span class="st">&quot;country&quot;</span>, <span class="st">&quot;year&quot;</span>, <span class="st">&quot;period&quot;</span>, <span class="st">&quot;class_num&quot;</span>, variables<span class="sc">$</span>class)])</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>flagged <span class="ot">&lt;-</span> df[df<span class="sc">$</span>year <span class="sc">==</span> <span class="dv">1990</span> <span class="sc">&amp;</span> (df<span class="sc">$</span>health_flag <span class="sc">==</span> <span class="dv">1</span> <span class="sc">|</span> df<span class="sc">$</span>gender_flag <span class="sc">==</span> <span class="dv">1</span>), </span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>              <span class="fu">c</span>(<span class="st">&quot;country&quot;</span>, <span class="st">&quot;class_num&quot;</span>, variables<span class="sc">$</span>class)]</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>class_vv <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>class_vv[df<span class="sc">$</span>health_class <span class="sc">&lt;</span> <span class="dv">3</span> <span class="sc">&amp;</span> df<span class="sc">$</span>gender_class <span class="sc">&lt;</span> <span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="st">&quot;low&quot;</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>class_vv[df<span class="sc">$</span>health_class <span class="sc">&gt;</span> <span class="dv">3</span> <span class="sc">&amp;</span> df<span class="sc">$</span>gender_class <span class="sc">&gt;</span> <span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="st">&quot;upp&quot;</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>class_vv[<span class="sc">!</span>(df<span class="sc">$</span>health_class <span class="sc">&lt;</span> <span class="dv">3</span> <span class="sc">&amp;</span> df<span class="sc">$</span>gender_class <span class="sc">&lt;</span> <span class="dv">3</span>) <span class="sc">&amp;</span> <span class="sc">!</span>(df<span class="sc">$</span>health_class <span class="sc">&gt;</span> <span class="dv">3</span> <span class="sc">&amp;</span> df<span class="sc">$</span>gender_class <span class="sc">&gt;</span> <span class="dv">3</span>)] <span class="ot">&lt;-</span> <span class="st">&quot;mid&quot;</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>class_vv[df<span class="sc">$</span>class_vv <span class="sc">==</span> <span class="st">&quot;mid&quot;</span> <span class="sc">&amp;</span> df<span class="sc">$</span>health_class <span class="sc">&gt;</span> df<span class="sc">$</span>gender_class] <span class="ot">&lt;-</span> <span class="st">&quot;H &gt; G&quot;</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>class_vv[df<span class="sc">$</span>class_vv <span class="sc">==</span> <span class="st">&quot;mid&quot;</span> <span class="sc">&amp;</span> df<span class="sc">$</span>health_class <span class="sc">&lt;</span> df<span class="sc">$</span>gender_class] <span class="ot">&lt;-</span> <span class="st">&quot;G &gt; H&quot;</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a><span class="co"># addmargins(table(df$class_vv, df$class))</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>class_low <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(df<span class="sc">$</span>class_vv <span class="sc">==</span> <span class="st">&quot;low&quot;</span>, <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>class_upp <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(df<span class="sc">$</span>class_vv <span class="sc">==</span> <span class="st">&quot;upp&quot;</span>, <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>variables<span class="sc">$</span>class_core <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;country&quot;</span>, <span class="st">&quot;class&quot;</span>, <span class="st">&quot;health_class&quot;</span>, <span class="st">&quot;gender_class&quot;</span>, <span class="st">&quot;class_vv&quot;</span>)</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>class1990 <span class="ot">&lt;-</span> df[df<span class="sc">$</span>year <span class="sc">==</span> <span class="dv">1990</span>, variables<span class="sc">$</span>class_core]</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(class1990) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;country&quot;</span>, <span class="fu">paste</span>(<span class="fu">c</span>(<span class="st">&quot;class&quot;</span>, <span class="st">&quot;health&quot;</span>, <span class="st">&quot;gender&quot;</span>, <span class="st">&quot;class_vv&quot;</span>), <span class="dv">1990</span>, <span class="at">sep =</span> <span class="st">&quot;&quot;</span>))</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>class1995 <span class="ot">&lt;-</span> df[df<span class="sc">$</span>year <span class="sc">==</span> <span class="dv">1995</span>, variables<span class="sc">$</span>class_core]</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(class1995) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;country&quot;</span>, <span class="fu">paste</span>(<span class="fu">c</span>(<span class="st">&quot;class&quot;</span>, <span class="st">&quot;health&quot;</span>, <span class="st">&quot;gender&quot;</span>, <span class="st">&quot;class_vv&quot;</span>), <span class="dv">1995</span>, <span class="at">sep =</span> <span class="st">&quot;&quot;</span>))</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">merge</span>(data, df[, <span class="fu">names</span>(df) <span class="sc">!=</span> <span class="st">&quot;year&quot;</span>], <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;country&quot;</span>, <span class="st">&quot;period&quot;</span>), <span class="at">all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">merge</span>(df, class1990, <span class="at">by =</span> <span class="st">&quot;country&quot;</span>, <span class="at">all.x =</span> <span class="cn">TRUE</span>)</span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">merge</span>(df, class1995, <span class="at">by =</span> <span class="st">&quot;country&quot;</span>, <span class="at">all.x =</span> <span class="cn">TRUE</span>)</span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df[<span class="fu">order</span>(df<span class="sc">$</span>country, df<span class="sc">$</span>year), </span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>         <span class="fu">c</span>(<span class="st">&quot;country&quot;</span>, <span class="st">&quot;year&quot;</span>, <span class="st">&quot;period&quot;</span>, <span class="fu">names</span>(df)[<span class="sc">!</span><span class="fu">names</span>(df) <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;country&quot;</span>, <span class="st">&quot;year&quot;</span>, <span class="st">&quot;period&quot;</span>)])]</span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df[df<span class="sc">$</span>year <span class="sc">!=</span> <span class="dv">1960</span> <span class="sc">&amp;</span> df<span class="sc">$</span>year <span class="sc">!=</span> <span class="dv">2019</span>, ]</span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>filepath <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;~/Dropbox/Lancet-SIGHT Commission/Working Groups/Metrics/Datasets/dataset_cy_class_&quot;</span>,</span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a>                  lubridate<span class="sc">::</span><span class="fu">today</span>(), <span class="st">&quot;.csv&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;&quot;</span> )</span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(df, <span class="at">file =</span> filepath)</span></code></pre></div>
</div>
<div id="subset-of-1990-classifications-data-for-which-the-floor-rule-was-applied" class="section level3">
<h3>Subset of 1990 classifications data for which the “floor” rule was applied</h3>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>flagged</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["country"],"name":[1],"type":["chr"],"align":["left"]},{"label":["class_num"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["health_valid"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["gender_valid"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["health_class"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["gender_class"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["health_class_alt"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["gender_class_alt"],"name":[8],"type":["dbl"],"align":["right"]},{"label":["health_flag"],"name":[9],"type":["dbl"],"align":["right"]},{"label":["gender_flag"],"name":[10],"type":["dbl"],"align":["right"]},{"label":["health_n"],"name":[11],"type":["int"],"align":["right"]},{"label":["gender_n"],"name":[12],"type":["int"],"align":["right"]},{"label":["class"],"name":[13],"type":["chr"],"align":["left"]},{"label":["support"],"name":[14],"type":["chr"],"align":["left"]}],"data":[{"1":"Albania","2":"12","3":"2","4":"2","5":"3","6":"4","7":"4","8":"5","9":"1","10":"1","11":"1","12":"1","13":"H3G4","14":"Albania (1/4)"},{"1":"Algeria","2":"6","3":"2","4":"2","5":"3","6":"2","7":"3","8":"3","9":"0","10":"1","11":"2","12":"0","13":"H3G2","14":"Algeria (0/4)"},{"1":"Australia","2":"20","3":"2","4":"2","5":"5","6":"4","7":"5","8":"5","9":"0","10":"1","11":"2","12":"1","13":"H5G4","14":"Australia (2/4)"},{"1":"Bangladesh","2":"1","3":"2","4":"2","5":"1","6":"1","7":"2","8":"2","9":"1","10":"1","11":"1","12":"1","13":"H1G1","14":"Bangladesh (1/4)"},{"1":"Barbados","2":"16","3":"2","4":"2","5":"4","6":"4","7":"5","8":"5","9":"1","10":"1","11":"1","12":"1","13":"H4G4","14":"Barbados (1/4)"},{"1":"Belgium","2":"20","3":"2","4":"2","5":"5","6":"4","7":"5","8":"5","9":"0","10":"1","11":"2","12":"1","13":"H5G4","14":"Belgium (2/4)"},{"1":"Belize","2":"9","3":"2","4":"2","5":"3","6":"3","7":"4","8":"4","9":"1","10":"1","11":"1","12":"0","13":"H3G3","14":"Belize (0/4)"},{"1":"Benin","2":"1","3":"2","4":"2","5":"1","6":"1","7":"1","8":"2","9":"0","10":"1","11":"2","12":"1","13":"H1G1","14":"Benin (2/4)"},{"1":"Bhutan","2":"2","3":"2","4":"1","5":"1","6":"2","7":"2","8":"2","9":"1","10":"0","11":"1","12":"1","13":"H1G2","14":"Bhutan (1/2)"},{"1":"Bolivia","2":"4","3":"2","4":"2","5":"2","6":"2","7":"2","8":"3","9":"0","10":"1","11":"2","12":"1","13":"H2G2","14":"Bolivia (2/4)"},{"1":"Botswana","2":"6","3":"2","4":"2","5":"2","6":"3","7":"3","8":"3","9":"1","10":"0","11":"1","12":"0","13":"H2G3","14":"Botswana (0/4)"},{"1":"Brunei","2":"12","3":"2","4":"2","5":"4","6":"3","7":"5","8":"4","9":"1","10":"1","11":"1","12":"1","13":"H4G3","14":"Brunei (1/4)"},{"1":"Bulgaria","2":"16","3":"2","4":"2","5":"4","6":"4","7":"5","8":"4","9":"1","10":"0","11":"1","12":"0","13":"H4G4","14":"Bulgaria (0/4)"},{"1":"Cambodia","2":"2","3":"2","4":"2","5":"1","6":"2","7":"2","8":"2","9":"1","10":"0","11":"1","12":"0","13":"H1G2","14":"Cambodia (0/4)"},{"1":"Cameroon","2":"1","3":"2","4":"2","5":"1","6":"1","7":"2","8":"2","9":"1","10":"1","11":"1","12":"1","13":"H1G1","14":"Cameroon (1/4)"},{"1":"Chile","2":"16","3":"2","4":"2","5":"4","6":"4","7":"5","8":"4","9":"1","10":"0","11":"1","12":"2","13":"H4G4","14":"Chile (2/4)"},{"1":"China","2":"12","3":"2","4":"2","5":"3","6":"4","7":"4","8":"5","9":"1","10":"1","11":"1","12":"1","13":"H3G4","14":"China (1/4)"},{"1":"Colombia","2":"12","3":"2","4":"2","5":"4","6":"3","7":"4","8":"4","9":"0","10":"1","11":"2","12":"1","13":"H4G3","14":"Colombia (2/4)"},{"1":"Congo","2":"4","3":"2","4":"2","5":"2","6":"2","7":"3","8":"2","9":"1","10":"0","11":"1","12":"2","13":"H2G2","14":"Congo (2/4)"},{"1":"Costa Rica","2":"12","3":"2","4":"2","5":"4","6":"3","7":"5","8":"4","9":"1","10":"1","11":"1","12":"0","13":"H4G3","14":"Costa Rica (0/4)"},{"1":"Cyprus","2":"15","3":"2","4":"2","5":"5","6":"3","7":"5","8":"4","9":"0","10":"1","11":"2","12":"1","13":"H5G3","14":"Cyprus (2/4)"},{"1":"Dominican Republic","2":"6","3":"2","4":"2","5":"2","6":"3","7":"3","8":"3","9":"1","10":"0","11":"1","12":"0","13":"H2G3","14":"Dominican Republic (0/4)"},{"1":"Ecuador","2":"9","3":"2","4":"2","5":"3","6":"3","7":"3","8":"4","9":"0","10":"1","11":"2","12":"1","13":"H3G3","14":"Ecuador (2/4)"},{"1":"Egypt","2":"2","3":"2","4":"2","5":"2","6":"1","7":"3","8":"2","9":"1","10":"1","11":"1","12":"1","13":"H2G1","14":"Egypt (1/4)"},{"1":"El Salvador","2":"4","3":"2","4":"2","5":"2","6":"2","7":"2","8":"3","9":"0","10":"1","11":"2","12":"1","13":"H2G2","14":"El Salvador (2/4)"},{"1":"Eswatini","2":"6","3":"2","4":"2","5":"2","6":"3","7":"3","8":"3","9":"1","10":"0","11":"1","12":"0","13":"H2G3","14":"Eswatini (0/4)"},{"1":"Fiji","2":"12","3":"2","4":"2","5":"3","6":"4","7":"4","8":"4","9":"1","10":"0","11":"1","12":"2","13":"H3G4","14":"Fiji (2/4)"},{"1":"France","2":"20","3":"2","4":"2","5":"5","6":"4","7":"5","8":"5","9":"0","10":"1","11":"2","12":"1","13":"H5G4","14":"France (2/4)"},{"1":"Gambia","2":"1","3":"2","4":"2","5":"1","6":"1","7":"2","8":"1","9":"1","10":"0","11":"1","12":"2","13":"H1G1","14":"Gambia (2/4)"},{"1":"Grenada","2":"6","3":"2","4":"1","5":"3","6":"2","7":"4","8":"2","9":"1","10":"0","11":"1","12":"1","13":"H3G2","14":"Grenada (1/2)"},{"1":"Guatemala","2":"4","3":"2","4":"2","5":"2","6":"2","7":"2","8":"3","9":"0","10":"1","11":"2","12":"1","13":"H2G2","14":"Guatemala (2/4)"},{"1":"Honduras","2":"6","3":"2","4":"2","5":"3","6":"2","7":"3","8":"3","9":"0","10":"1","11":"2","12":"0","13":"H3G2","14":"Honduras (0/4)"},{"1":"Hungary","2":"12","3":"2","4":"2","5":"4","6":"3","7":"4","8":"4","9":"0","10":"1","11":"2","12":"1","13":"H4G3","14":"Hungary (2/4)"},{"1":"India","2":"2","3":"2","4":"2","5":"2","6":"1","7":"2","8":"2","9":"0","10":"1","11":"2","12":"1","13":"H2G1","14":"India (2/4)"},{"1":"Indonesia","2":"4","3":"2","4":"2","5":"2","6":"2","7":"2","8":"3","9":"0","10":"1","11":"2","12":"1","13":"H2G2","14":"Indonesia (2/4)"},{"1":"Iran","2":"4","3":"2","4":"2","5":"2","6":"2","7":"3","8":"2","9":"1","10":"0","11":"1","12":"2","13":"H2G2","14":"Iran (2/4)"},{"1":"Israel","2":"20","3":"2","4":"2","5":"5","6":"4","7":"5","8":"5","9":"0","10":"1","11":"2","12":"1","13":"H5G4","14":"Israel (2/4)"},{"1":"Jamaica","2":"12","3":"2","4":"2","5":"4","6":"3","7":"4","8":"4","9":"0","10":"1","11":"2","12":"0","13":"H4G3","14":"Jamaica (0/4)"},{"1":"Japan","2":"20","3":"2","4":"2","5":"5","6":"4","7":"5","8":"5","9":"0","10":"1","11":"2","12":"1","13":"H5G4","14":"Japan (2/4)"},{"1":"Jordan","2":"9","3":"2","4":"2","5":"3","6":"3","7":"4","8":"3","9":"1","10":"0","11":"1","12":"0","13":"H3G3","14":"Jordan (0/4)"},{"1":"Kenya","2":"2","3":"2","4":"2","5":"2","6":"1","7":"2","8":"2","9":"0","10":"1","11":"2","12":"1","13":"H2G1","14":"Kenya (2/4)"},{"1":"Laos","2":"1","3":"2","4":"2","5":"1","6":"1","7":"1","8":"2","9":"0","10":"1","11":"2","12":"1","13":"H1G1","14":"Laos (2/4)"},{"1":"Libya","2":"9","3":"2","4":"2","5":"3","6":"3","7":"3","8":"4","9":"0","10":"1","11":"2","12":"0","13":"H3G3","14":"Libya (0/4)"},{"1":"Malaysia","2":"16","3":"2","4":"2","5":"4","6":"4","7":"5","8":"4","9":"1","10":"0","11":"1","12":"0","13":"H4G4","14":"Malaysia (0/4)"},{"1":"Mauritius","2":"9","3":"2","4":"2","5":"3","6":"3","7":"4","8":"3","9":"1","10":"0","11":"1","12":"0","13":"H3G3","14":"Mauritius (0/4)"},{"1":"Mexico","2":"9","3":"2","4":"2","5":"3","6":"3","7":"4","8":"3","9":"1","10":"0","11":"1","12":"2","13":"H3G3","14":"Mexico (2/4)"},{"1":"Morocco","2":"6","3":"2","4":"2","5":"2","6":"3","7":"3","8":"3","9":"1","10":"0","11":"1","12":"0","13":"H2G3","14":"Morocco (0/4)"},{"1":"Myanmar","2":"6","3":"2","4":"2","5":"2","6":"3","7":"2","8":"4","9":"0","10":"1","11":"2","12":"1","13":"H2G3","14":"Myanmar (2/4)"},{"1":"Namibia","2":"4","3":"2","4":"2","5":"2","6":"2","7":"3","8":"3","9":"1","10":"1","11":"1","12":"1","13":"H2G2","14":"Namibia (1/4)"},{"1":"Nepal","2":"1","3":"2","4":"2","5":"1","6":"1","7":"1","8":"2","9":"0","10":"1","11":"2","12":"1","13":"H1G1","14":"Nepal (2/4)"},{"1":"Netherlands","2":"20","3":"2","4":"2","5":"5","6":"4","7":"5","8":"5","9":"0","10":"1","11":"2","12":"1","13":"H5G4","14":"Netherlands (2/4)"},{"1":"Nicaragua","2":"2","3":"2","4":"2","5":"2","6":"1","7":"3","8":"2","9":"1","10":"1","11":"1","12":"1","13":"H2G1","14":"Nicaragua (1/4)"},{"1":"North Korea","2":"15","3":"2","4":"1","5":"3","6":"5","7":"4","8":"5","9":"1","10":"0","11":"1","12":"1","13":"H3G5","14":"North Korea (1/2)"},{"1":"Pakistan","2":"2","3":"2","4":"2","5":"1","6":"2","7":"2","8":"2","9":"1","10":"0","11":"1","12":"0","13":"H1G2","14":"Pakistan (0/4)"},{"1":"Papua New Guinea","2":"4","3":"2","4":"2","5":"2","6":"2","7":"2","8":"3","9":"0","10":"1","11":"2","12":"1","13":"H2G2","14":"Papua New Guinea (2/4)"},{"1":"Paraguay","2":"9","3":"2","4":"2","5":"3","6":"3","7":"3","8":"4","9":"0","10":"1","11":"2","12":"1","13":"H3G3","14":"Paraguay (2/4)"},{"1":"Peru","2":"6","3":"2","4":"2","5":"2","6":"3","7":"3","8":"3","9":"1","10":"0","11":"1","12":"2","13":"H2G3","14":"Peru (2/4)"},{"1":"Philippines","2":"12","3":"2","4":"2","5":"3","6":"4","7":"3","8":"5","9":"0","10":"1","11":"2","12":"1","13":"H3G4","14":"Philippines (2/4)"},{"1":"Poland","2":"16","3":"2","4":"2","5":"4","6":"4","7":"4","8":"5","9":"0","10":"1","11":"2","12":"1","13":"H4G4","14":"Poland (2/4)"},{"1":"Qatar","2":"16","3":"2","4":"2","5":"4","6":"4","7":"5","8":"5","9":"1","10":"1","11":"1","12":"1","13":"H4G4","14":"Qatar (1/4)"},{"1":"Romania","2":"12","3":"2","4":"2","5":"4","6":"3","7":"4","8":"4","9":"0","10":"1","11":"2","12":"1","13":"H4G3","14":"Romania (2/4)"},{"1":"Rwanda","2":"2","3":"2","4":"2","5":"1","6":"2","7":"1","8":"3","9":"0","10":"1","11":"2","12":"1","13":"H1G2","14":"Rwanda (2/4)"},{"1":"Samoa","2":"12","3":"2","4":"1","5":"3","6":"4","7":"4","8":"4","9":"1","10":"0","11":"1","12":"1","13":"H3G4","14":"Samoa (1/2)"},{"1":"Saudi Arabia","2":"6","3":"2","4":"2","5":"3","6":"2","7":"3","8":"3","9":"0","10":"1","11":"2","12":"1","13":"H3G2","14":"Saudi Arabia (2/4)"},{"1":"Senegal","2":"2","3":"2","4":"2","5":"2","6":"1","7":"2","8":"2","9":"0","10":"1","11":"2","12":"1","13":"H2G1","14":"Senegal (2/4)"},{"1":"South Korea","2":"16","3":"2","4":"2","5":"4","6":"4","7":"5","8":"4","9":"1","10":"0","11":"1","12":"0","13":"H4G4","14":"South Korea (0/4)"},{"1":"Sudan","2":"2","3":"2","4":"2","5":"2","6":"1","7":"2","8":"2","9":"0","10":"1","11":"2","12":"1","13":"H2G1","14":"Sudan (2/4)"},{"1":"Syria","2":"6","3":"2","4":"2","5":"3","6":"2","7":"4","8":"3","9":"1","10":"1","11":"1","12":"1","13":"H3G2","14":"Syria (1/4)"},{"1":"Tanzania","2":"1","3":"2","4":"2","5":"1","6":"1","7":"1","8":"2","9":"0","10":"1","11":"2","12":"1","13":"H1G1","14":"Tanzania (2/4)"},{"1":"Thailand","2":"9","3":"2","4":"2","5":"3","6":"3","7":"4","8":"4","9":"1","10":"1","11":"1","12":"1","13":"H3G3","14":"Thailand (1/4)"},{"1":"Togo","2":"2","3":"2","4":"2","5":"2","6":"1","7":"2","8":"2","9":"0","10":"1","11":"2","12":"1","13":"H2G1","14":"Togo (2/4)"},{"1":"Tonga","2":"12","3":"2","4":"2","5":"3","6":"4","7":"4","8":"5","9":"1","10":"1","11":"1","12":"1","13":"H3G4","14":"Tonga (1/4)"},{"1":"Trinidad & Tobago","2":"9","3":"2","4":"2","5":"3","6":"3","7":"4","8":"4","9":"1","10":"1","11":"1","12":"1","13":"H3G3","14":"Trinidad & Tobago (1/4)"},{"1":"Tunisia","2":"9","3":"2","4":"2","5":"3","6":"3","7":"3","8":"4","9":"0","10":"1","11":"2","12":"0","13":"H3G3","14":"Tunisia (0/4)"},{"1":"Turkey","2":"4","3":"2","4":"2","5":"2","6":"2","7":"3","8":"3","9":"1","10":"1","11":"1","12":"1","13":"H2G2","14":"Turkey (1/4)"},{"1":"Uganda","2":"1","3":"2","4":"2","5":"1","6":"1","7":"1","8":"2","9":"0","10":"1","11":"2","12":"1","13":"H1G1","14":"Uganda (2/4)"},{"1":"United Kingdom","2":"20","3":"2","4":"2","5":"5","6":"4","7":"5","8":"5","9":"0","10":"1","11":"2","12":"1","13":"H5G4","14":"United Kingdom (2/4)"},{"1":"United States of America","2":"20","3":"2","4":"2","5":"5","6":"4","7":"5","8":"5","9":"0","10":"1","11":"2","12":"1","13":"H5G4","14":"United States of America (2/4)"},{"1":"Uruguay","2":"16","3":"2","4":"2","5":"4","6":"4","7":"4","8":"5","9":"0","10":"1","11":"2","12":"1","13":"H4G4","14":"Uruguay (2/4)"},{"1":"Viet Nam","2":"12","3":"2","4":"2","5":"3","6":"4","7":"4","8":"4","9":"1","10":"0","11":"1","12":"0","13":"H3G4","14":"Viet Nam (0/4)"},{"1":"Zambia","2":"1","3":"2","4":"2","5":"1","6":"1","7":"1","8":"2","9":"0","10":"1","11":"2","12":"1","13":"H1G1","14":"Zambia (2/4)"},{"1":"Zimbabwe","2":"4","3":"2","4":"2","5":"2","6":"2","7":"3","8":"2","9":"1","10":"0","11":"1","12":"2","13":"H2G2","14":"Zimbabwe (2/4)"}],"options":{"columns":{"min":[8],"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<!-- ### Classification trajectories (in 5-year increments based on global distributions in same time period) -->
</div>
<div id="which-countries-move-more-than-2-cells-in-the-classifications" class="section level3">
<h3>Which countries move more than 2 cells in the classifications?</h3>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(years) <span class="ot">&lt;-</span> years <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1990</span>, <span class="dv">1995</span>, <span class="dv">2015</span>)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">&lt;-</span> <span class="fu">lapply</span>(years, <span class="cf">function</span>(year) {</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(df[df<span class="sc">$</span>year <span class="sc">==</span> year, <span class="fu">c</span>(<span class="st">&quot;country&quot;</span>, <span class="st">&quot;class_num&quot;</span>)])</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>(df)[<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;class&quot;</span>, year, <span class="at">sep =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(df)</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">&lt;-</span> <span class="fu">Reduce</span>(<span class="at">f =</span> <span class="cf">function</span>(...) <span class="fu">merge</span>(..., <span class="at">by =</span> <span class="st">&quot;country&quot;</span>, <span class="at">all =</span> <span class="cn">TRUE</span>), <span class="at">x =</span> dat)</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>dat<span class="sc">$</span>diff <span class="ot">&lt;-</span> dat<span class="sc">$</span>class2015 <span class="sc">-</span> dat<span class="sc">$</span>class1990</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>dat<span class="sc">$</span>diff_alt <span class="ot">&lt;-</span> dat<span class="sc">$</span>class2015 <span class="sc">-</span> dat<span class="sc">$</span>class1995</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>better <span class="ot">&lt;-</span> dat[<span class="fu">IsTrue</span>(dat<span class="sc">$</span>diff <span class="sc">&gt;</span> <span class="dv">2</span> <span class="sc">|</span> dat<span class="sc">$</span>diff_alt <span class="sc">&gt;</span> <span class="dv">2</span>), ]</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>worse <span class="ot">&lt;-</span> dat[<span class="fu">IsTrue</span>(dat<span class="sc">$</span>diff <span class="sc">&lt;</span> <span class="sc">-</span><span class="dv">2</span> <span class="sc">|</span> dat<span class="sc">$</span>diff_alt <span class="sc">&lt;</span> <span class="sc">-</span><span class="dv">2</span>), ]</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>better </span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["country"],"name":[1],"type":["chr"],"align":["left"]},{"label":["class1990"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["class1995"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["class2015"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["diff"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["diff_alt"],"name":[6],"type":["dbl"],"align":["right"]}],"data":[{"1":"Algeria","2":"6","3":"9","4":"9","5":"3","6":"0"},{"1":"Austria","2":"20","3":"15","4":"20","5":"0","6":"5"},{"1":"Belarus","2":"NA","3":"12","4":"16","5":"NA","6":"4"},{"1":"Brunei","2":"12","3":"12","4":"16","5":"4","6":"4"},{"1":"Canada","2":"25","3":"20","4":"25","5":"0","6":"5"},{"1":"Croatia","2":"NA","3":"12","4":"16","5":"NA","6":"4"},{"1":"Cyprus","2":"15","3":"20","4":"20","5":"5","6":"0"},{"1":"Czech Republic","2":"NA","3":"16","4":"20","5":"NA","6":"4"},{"1":"Egypt","2":"2","3":"4","4":"6","5":"4","6":"2"},{"1":"Estonia","2":"NA","3":"12","4":"16","5":"NA","6":"4"},{"1":"Finland","2":"20","3":"20","4":"25","5":"5","6":"5"},{"1":"Grenada","2":"6","3":"12","4":"9","5":"3","6":"-3"},{"1":"Honduras","2":"6","3":"6","4":"9","5":"3","6":"3"},{"1":"Hungary","2":"12","3":"12","4":"16","5":"4","6":"4"},{"1":"Iran","2":"4","3":"6","4":"9","5":"5","6":"3"},{"1":"Kuwait","2":"16","3":"16","4":"20","5":"4","6":"4"},{"1":"Kyrgyzstan","2":"NA","3":"6","4":"12","5":"NA","6":"6"},{"1":"Laos","2":"1","3":"1","4":"4","5":"3","6":"3"},{"1":"Libya","2":"9","3":"9","4":"15","5":"6","6":"6"},{"1":"Lithuania","2":"NA","3":"12","4":"16","5":"NA","6":"4"},{"1":"Madagascar","2":"1","3":"1","4":"6","5":"5","6":"5"},{"1":"Maldives","2":"4","3":"4","4":"16","5":"12","6":"12"},{"1":"Moldova","2":"NA","3":"9","4":"12","5":"NA","6":"3"},{"1":"Nicaragua","2":"2","3":"3","4":"9","5":"7","6":"6"},{"1":"Oman","2":"9","3":"9","4":"16","5":"7","6":"7"},{"1":"Qatar","2":"16","3":"16","4":"20","5":"4","6":"4"},{"1":"Romania","2":"12","3":"9","4":"12","5":"0","6":"3"},{"1":"Russian Federation","2":"NA","3":"9","4":"12","5":"NA","6":"3"},{"1":"Saint Lucia","2":"8","3":"8","4":"12","5":"4","6":"4"},{"1":"Saudi Arabia","2":"6","3":"6","4":"12","5":"6","6":"6"},{"1":"South Korea","2":"16","3":"12","4":"15","5":"-1","6":"3"},{"1":"Suriname","2":"9","3":"6","4":"9","5":"0","6":"3"},{"1":"Tajikistan","2":"NA","3":"3","4":"6","5":"NA","6":"3"},{"1":"Thailand","2":"9","3":"16","4":"12","5":"3","6":"-4"},{"1":"Turkey","2":"4","3":"4","4":"8","5":"4","6":"4"},{"1":"Ukraine","2":"NA","3":"9","4":"12","5":"NA","6":"3"}],"options":{"columns":{"min":[8],"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>worse</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["country"],"name":[1],"type":["chr"],"align":["left"]},{"label":["class1990"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["class1995"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["class2015"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["diff"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["diff_alt"],"name":[6],"type":["dbl"],"align":["right"]}],"data":[{"1":"Argentina","2":"16","3":"16","4":"12","5":"-4","6":"-4"},{"1":"Bahrain","2":"16","3":"20","4":"16","5":"0","6":"-4"},{"1":"Bosnia & Herzegovina","2":"NA","3":"16","4":"12","5":"NA","6":"-4"},{"1":"Brazil","2":"12","3":"12","4":"9","5":"-3","6":"-3"},{"1":"Bulgaria","2":"16","3":"12","4":"9","5":"-7","6":"-3"},{"1":"Chile","2":"16","3":"12","4":"12","5":"-4","6":"0"},{"1":"Colombia","2":"12","3":"9","4":"9","5":"-3","6":"0"},{"1":"Comoros","2":"4","3":"4","4":"1","5":"-3","6":"-3"},{"1":"Congo","2":"4","3":"1","4":"1","5":"-3","6":"0"},{"1":"Cuba","2":"20","3":"15","4":"15","5":"-5","6":"0"},{"1":"Djibouti","2":"8","3":"8","4":"4","5":"-4","6":"-4"},{"1":"Eswatini","2":"6","3":"2","4":"2","5":"-4","6":"0"},{"1":"Fiji","2":"12","3":"9","4":"8","5":"-4","6":"-1"},{"1":"Gabon","2":"6","3":"6","4":"2","5":"-4","6":"-4"},{"1":"Grenada","2":"6","3":"12","4":"9","5":"3","6":"-3"},{"1":"Guyana","2":"12","3":"6","4":"6","5":"-6","6":"0"},{"1":"Iceland","2":"25","3":"20","4":"20","5":"-5","6":"0"},{"1":"Iraq","2":"6","3":"6","4":"2","5":"-4","6":"-4"},{"1":"Israel","2":"20","3":"25","4":"20","5":"0","6":"-5"},{"1":"Jamaica","2":"12","3":"12","4":"9","5":"-3","6":"-3"},{"1":"Kiribati","2":"8","3":"8","4":"4","5":"-4","6":"-4"},{"1":"Lebanon","2":"16","3":"16","4":"12","5":"-4","6":"-4"},{"1":"Lesotho","2":"8","3":"6","4":"3","5":"-5","6":"-3"},{"1":"Malaysia","2":"16","3":"12","4":"12","5":"-4","6":"0"},{"1":"Malta","2":"25","3":"20","4":"12","5":"-13","6":"-8"},{"1":"Mauritania","2":"4","3":"4","4":"1","5":"-3","6":"-3"},{"1":"Mauritius","2":"9","3":"12","4":"9","5":"0","6":"-3"},{"1":"Mexico","2":"9","3":"9","4":"6","5":"-3","6":"-3"},{"1":"Micronesia","2":"12","3":"8","4":"8","5":"-4","6":"0"},{"1":"Namibia","2":"4","3":"6","4":"3","5":"-1","6":"-3"},{"1":"Norway","2":"25","3":"25","4":"20","5":"-5","6":"-5"},{"1":"Philippines","2":"12","3":"12","4":"8","5":"-4","6":"-4"},{"1":"Saint Vincent & the Grenadines","2":"12","3":"8","4":"9","5":"-3","6":"1"},{"1":"Samoa","2":"12","3":"12","4":"9","5":"-3","6":"-3"},{"1":"Seychelles","2":"16","3":"12","4":"6","5":"-10","6":"-6"},{"1":"Slovakia","2":"NA","3":"16","4":"12","5":"NA","6":"-4"},{"1":"South Africa","2":"9","3":"6","4":"2","5":"-7","6":"-4"},{"1":"Sri Lanka","2":"16","3":"12","4":"12","5":"-4","6":"0"},{"1":"Syria","2":"6","3":"8","4":"4","5":"-2","6":"-4"},{"1":"Thailand","2":"9","3":"16","4":"12","5":"3","6":"-4"},{"1":"Tonga","2":"12","3":"15","4":"12","5":"0","6":"-3"},{"1":"Trinidad & Tobago","2":"9","3":"9","4":"6","5":"-3","6":"-3"},{"1":"United States of America","2":"20","3":"20","4":"16","5":"-4","6":"-4"},{"1":"Uruguay","2":"16","3":"16","4":"12","5":"-4","6":"-4"},{"1":"Vanuatu","2":"9","3":"9","4":"6","5":"-3","6":"-3"},{"1":"Venezuela","2":"12","3":"12","4":"9","5":"-3","6":"-3"},{"1":"Viet Nam","2":"12","3":"9","4":"9","5":"-3","6":"0"},{"1":"Zimbabwe","2":"4","3":"2","4":"1","5":"-3","6":"-1"}],"options":{"columns":{"min":[8],"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div id="removing-countries-with-untrustworthy-statistics" class="section level3">
<h3>Removing countries with untrustworthy statistics</h3>
<p>All data is subject to measurement error. This is particularly problematic if measurement is systematically biased. Without other data to validate a given measure, this is a very difficult to problem to overcome. We only use data from reputable sources, such as academic centre and international organizations, but some self-reported data are still suspect. The World Bank and some NGOs have attempted to rate the capacity of National Statistical System, and some countries are not inlcuded in their rankings because assessments could be not be made based on available information. For instance, the ODIN rankings from 2015 to 2018 do not include the Central African Republic, Eritrea, Equatorial Guinea, and North Korea. Interestingly, among these, only North Korea is relatively highly ranked on the gender and health dimensions according to these data, which is simply not believable. Therefore, we remove only North Korea from the analyses.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df[df<span class="sc">$</span>country <span class="sc">!=</span> <span class="st">&quot;North Korea&quot;</span>, ]</span></code></pre></div>
<!-- ### Descriptives of control variables by 1990 classification: mean (SD) [currently not shown] -->
<!-- ### Change within classification categories & trajectories from 1995 classifications -->
</div>
<div id="trends-by-classification-group" class="section level3">
<h3>Trends by classification group</h3>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(<span class="fu">as.factor</span>(df<span class="sc">$</span>class_vv1990))</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(<span class="fu">as.factor</span>(df<span class="sc">$</span>class_vv1995))</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(<span class="fu">c</span>(variables<span class="sc">$</span>health_full, variables<span class="sc">$</span>gender_full), <span class="cf">function</span>(var) {</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  dat <span class="ot">&lt;-</span> df[<span class="sc">!</span><span class="fu">is.na</span>(df<span class="sc">$</span>class_vv1995) <span class="sc">&amp;</span> df<span class="sc">$</span>class_vv1995 <span class="sc">!=</span> <span class="st">&quot;mid&quot;</span>, ]</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(dat, <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> <span class="sc">!!</span><span class="fu">sym</span>(var), <span class="at">group =</span> class_vv1995, <span class="at">color =</span> class_vv1995)) <span class="sc">+</span> </span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stat_summary</span>(<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>, <span class="at">geom=</span><span class="st">&quot;line&quot;</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">xlim</span>(<span class="dv">1980</span>, <span class="dv">2018</span>) <span class="sc">+</span> </span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_bw</span>() <span class="sc">+</span> </span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggtitle</span>(<span class="fu">paste</span>(var, <span class="st">&quot;average by 1995 classification over time&quot;</span>))</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div>
<p><img src="classifications_files/figure-html/categories-1.png" width="67%" height="67%" /><img src="classifications_files/figure-html/categories-2.png" width="67%" height="67%" /><img src="classifications_files/figure-html/categories-3.png" width="67%" height="67%" /><img src="classifications_files/figure-html/categories-4.png" width="67%" height="67%" /><img src="classifications_files/figure-html/categories-5.png" width="67%" height="67%" /><img src="classifications_files/figure-html/categories-6.png" width="67%" height="67%" /><img src="classifications_files/figure-html/categories-7.png" width="67%" height="67%" /><img src="classifications_files/figure-html/categories-8.png" width="67%" height="67%" /><img src="classifications_files/figure-html/categories-9.png" width="67%" height="67%" /><img src="classifications_files/figure-html/categories-10.png" width="67%" height="67%" /></p>
</div>
<div id="cumulative-death-rate-trends-by-1995-classification-groups" class="section level3">
<h3>Cumulative death rate trends by 1995 classification groups</h3>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(variables<span class="sc">$</span>death_rates, <span class="cf">function</span>(var) {</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  dat <span class="ot">&lt;-</span> df[<span class="sc">!</span><span class="fu">is.na</span>(df<span class="sc">$</span>class_vv1995) <span class="sc">&amp;</span> df<span class="sc">$</span>class_vv1995 <span class="sc">!=</span> <span class="st">&quot;mid&quot;</span>, ]</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(dat, <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> <span class="fu">log</span>(<span class="sc">!!</span><span class="fu">sym</span>(<span class="fu">paste</span>(var, <span class="st">&quot;cumulative1991&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>)) <span class="sc">+</span> <span class="dv">1</span>), </span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>                  <span class="at">group =</span> class_vv1995, <span class="at">color =</span> class_vv1995)) <span class="sc">+</span> </span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stat_summary</span>(<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>, <span class="at">geom=</span><span class="st">&quot;line&quot;</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">xlim</span>(<span class="dv">1990</span>, <span class="dv">2018</span>) <span class="sc">+</span> </span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_bw</span>() <span class="sc">+</span> </span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggtitle</span>(<span class="fu">paste</span>(var, <span class="st">&quot;annual cumulative average (logged) since 1991 by 1995 classification&quot;</span>))</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div>
<p><img src="classifications_files/figure-html/deaths-1.png" width="67%" height="67%" /><img src="classifications_files/figure-html/deaths-2.png" width="67%" height="67%" /><img src="classifications_files/figure-html/deaths-3.png" width="67%" height="67%" /><img src="classifications_files/figure-html/deaths-4.png" width="67%" height="67%" /><img src="classifications_files/figure-html/deaths-5.png" width="67%" height="67%" /><img src="classifications_files/figure-html/deaths-6.png" width="67%" height="67%" /><img src="classifications_files/figure-html/deaths-7.png" width="67%" height="67%" /></p>
</div>
<div id="cumulative-repression-trends-by-1995-classification-groups" class="section level3">
<h3>Cumulative repression trends by 1995 classification groups</h3>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(variables<span class="sc">$</span>measurement_models, <span class="cf">function</span>(var) {</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  dat <span class="ot">&lt;-</span> df[<span class="sc">!</span><span class="fu">is.na</span>(df<span class="sc">$</span>class_vv1995) <span class="sc">&amp;</span> df<span class="sc">$</span>class_vv1995 <span class="sc">!=</span> <span class="st">&quot;mid&quot;</span>, ]</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(dat, <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> <span class="sc">!!</span><span class="fu">sym</span>(<span class="fu">paste</span>(var, <span class="st">&quot;cumulative1991&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>)), </span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>                  <span class="at">group =</span> class_vv1995, <span class="at">color =</span> class_vv1995)) <span class="sc">+</span> </span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>, <span class="at">geom=</span><span class="st">&quot;line&quot;</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="dv">1990</span>, <span class="dv">2018</span>) <span class="sc">+</span> </span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span> </span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="fu">paste</span>(var, <span class="st">&quot;annual cumulative average since 1991 by 1995 classification&quot;</span>))</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div>
<p><img src="classifications_files/figure-html/violence-1.png" width="67%" height="67%" /><img src="classifications_files/figure-html/violence-2.png" width="67%" height="67%" /><img src="classifications_files/figure-html/violence-3.png" width="67%" height="67%" /><img src="classifications_files/figure-html/violence-4.png" width="67%" height="67%" /></p>
</div>
<div id="conflict-incidence-by-1995-classification-groups" class="section level3">
<h3>Conflict incidence by 1995 classification groups</h3>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(variables<span class="sc">$</span>conflict_incidence, <span class="cf">function</span>(var) {</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  dat <span class="ot">&lt;-</span> df[df<span class="sc">$</span>year <span class="sc">&gt;</span> <span class="dv">1988</span>, ]</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  tbl <span class="ot">&lt;-</span> <span class="fu">tapply</span>(dat[, var], <span class="fu">list</span>(<span class="at">health =</span> dat<span class="sc">$</span>health1995, <span class="at">gender =</span> dat<span class="sc">$</span>gender1995), mean, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  dat <span class="ot">&lt;-</span> dat[<span class="sc">!</span><span class="fu">is.na</span>(dat<span class="sc">$</span>class_vv1995) <span class="sc">&amp;</span> dat<span class="sc">$</span>class_vv1995 <span class="sc">!=</span> <span class="st">&quot;mid&quot;</span>, ]</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(dat, <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> <span class="sc">!!</span><span class="fu">sym</span>(var), <span class="at">group =</span> class_vv1995, <span class="at">color =</span> class_vv1995)) <span class="sc">+</span> </span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stat_summary</span>(<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>, <span class="at">geom=</span><span class="st">&quot;line&quot;</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">xlim</span>(<span class="dv">1989</span>, <span class="dv">2018</span>) <span class="sc">+</span> </span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_bw</span>() <span class="sc">+</span> </span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggtitle</span>(<span class="fu">paste</span>(var, <span class="st">&quot; incidence by classification in 1995&quot;</span>))</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">list</span>(tbl, plot))</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div>
<p><img src="classifications_files/figure-html/incidence-1.png" width="67%" height="67%" /><img src="classifications_files/figure-html/incidence-2.png" width="67%" height="67%" /><img src="classifications_files/figure-html/incidence-3.png" width="67%" height="67%" /><img src="classifications_files/figure-html/incidence-4.png" width="67%" height="67%" /></p>
</div>
<div id="mean-growth-rates-by-classification-with-t-test-alt-h-mean-different-from-global" class="section level3">
<h3>Mean growth rates by classification with t-test (alt H: mean different from global)</h3>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>GrowthRatesTtest <span class="ot">&lt;-</span> <span class="cf">function</span>(var, <span class="at">min_obs =</span> <span class="dv">2</span>) { </span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  dat1995 <span class="ot">&lt;-</span> df[df<span class="sc">$</span>year <span class="sc">==</span> <span class="dv">1995</span>, <span class="fu">c</span>(<span class="st">&quot;country&quot;</span>, <span class="st">&quot;class&quot;</span>, <span class="st">&quot;health_class&quot;</span>, <span class="st">&quot;gender_class&quot;</span>, var)]</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  dat2015 <span class="ot">&lt;-</span> df[df<span class="sc">$</span>year <span class="sc">==</span> <span class="dv">2015</span>, <span class="fu">c</span>(<span class="st">&quot;country&quot;</span>, var)]</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>(dat1995)[<span class="fu">names</span>(dat1995) <span class="sc">!=</span> <span class="st">&quot;country&quot;</span>] <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="fu">names</span>(dat1995)[<span class="fu">names</span>(dat1995) <span class="sc">!=</span> <span class="st">&quot;country&quot;</span>] , </span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>                                                       <span class="dv">1995</span>, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>)</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>(dat2015)[<span class="fu">names</span>(dat2015) <span class="sc">!=</span> <span class="st">&quot;country&quot;</span>] <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="fu">names</span>(dat2015)[<span class="fu">names</span>(dat2015) <span class="sc">!=</span> <span class="st">&quot;country&quot;</span>] , </span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>                                                       <span class="dv">2015</span>, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>)</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>  dat <span class="ot">&lt;-</span> <span class="fu">merge</span>(dat1995, dat2015, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;country&quot;</span>), <span class="at">all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>  dat<span class="sc">$</span>growth <span class="ot">&lt;-</span> dat[, <span class="fu">paste</span>(var, <span class="dv">2015</span>, <span class="at">sep =</span><span class="st">&quot;_&quot;</span>)] <span class="sc">-</span> dat[, <span class="fu">paste</span>(var, <span class="dv">1995</span>, <span class="at">sep =</span><span class="st">&quot;_&quot;</span>)]</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>  tbl <span class="ot">&lt;-</span> <span class="fu">tapply</span>(dat<span class="sc">$</span>growth, <span class="fu">list</span>(<span class="at">health =</span> dat<span class="sc">$</span>health_class_1995, <span class="at">gender =</span> dat<span class="sc">$</span>gender_class_1995), <span class="cf">function</span>(df) {</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="fu">sum</span>(<span class="sc">!</span><span class="fu">is.na</span>(df)) <span class="sc">&gt;=</span> min_obs) {</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>      result <span class="ot">&lt;-</span> <span class="fu">t.test</span>(df, <span class="at">mu =</span> <span class="fu">mean</span>(dat<span class="sc">$</span>growth, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>      mean <span class="ot">&lt;-</span> <span class="fu">round</span>(result[[<span class="st">&quot;estimate&quot;</span>]][[<span class="st">&quot;mean of x&quot;</span>]], <span class="dv">2</span>)</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>      pvalue <span class="ot">&lt;-</span> <span class="fu">round</span>(result[[<span class="st">&quot;p.value&quot;</span>]], <span class="dv">2</span>)</span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>      df <span class="ot">&lt;-</span> result[[<span class="st">&quot;parameter&quot;</span>]][[<span class="st">&quot;df&quot;</span>]]</span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>      cell <span class="ot">&lt;-</span> <span class="fu">paste</span>(mean, <span class="st">&quot; (p-value &quot;</span>, pvalue, <span class="st">&quot;; df &quot;</span>, df, <span class="st">&quot;)&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> { cell <span class="ot">&lt;-</span> <span class="st">&quot;&quot;</span> }</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(cell)</span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>  tbl[<span class="fu">is.na</span>(tbl)] <span class="ot">&lt;-</span> <span class="st">&quot;&quot;</span></span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">list</span>(<span class="at">global_mean =</span> <span class="fu">mean</span>(dat<span class="sc">$</span>growth, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">ttests =</span> <span class="fu">noquote</span>(tbl)))</span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a>variables<span class="sc">$</span>outcomes <span class="ot">&lt;-</span> <span class="fu">c</span>(variables<span class="sc">$</span>health_full, variables<span class="sc">$</span>gender_full, variables<span class="sc">$</span>death_rates, variables<span class="sc">$</span>measurement_models)</span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a>parallel<span class="sc">::</span><span class="fu">mclapply</span>(variables<span class="sc">$</span>outcomes, GrowthRatesTtest)</span></code></pre></div>
<pre><code>## $imr_wpp
## $imr_wpp$global_mean
## [1] 22.86067
## 
## $imr_wpp$ttests
##       gender
## health 1                         2                           3                           4                           5                     
##      1 50.66 (p-value 0; df 28)  54.21 (p-value 0.02; df 10)                                                                               
##      2 30.62 (p-value 0.2; df 6) 30.81 (p-value 0.08; df 11) 23.66 (p-value 0.87; df 11) 21.77 (p-value 0.75; df 4)                        
##      3                           20.05 (p-value 0.22; df 7)  14.82 (p-value 0; df 18)    17.03 (p-value 0.03; df 11)                       
##      4                           5.58 (p-value 0; df 3)      6.77 (p-value 0; df 14)     9.16 (p-value 0; df 11)                           
##      5                                                       4.34 (p-value 0.03; df 1)   3.39 (p-value 0; df 22)     3.04 (p-value 0; df 4)
## 
## 
## $ufmr_wpp
## $ufmr_wpp$global_mean
## [1] 37.07946
## 
## $ufmr_wpp$ttests
##       gender
## health 1                          2                            3                           4                          5                  
##      1 93.01 (p-value 0; df 28)   104.83 (p-value 0.06; df 10)                                                                           
##      2 54.14 (p-value 0.12; df 6) 45.28 (p-value 0.2; df 11)   31.56 (p-value 0.39; df 11) 32.84 (p-value 0.42; df 4)                    
##      3                            26.61 (p-value 0.01; df 7)   18.68 (p-value 0; df 18)    20.58 (p-value 0; df 11)                      
##      4                            7.63 (p-value 0; df 3)       8.37 (p-value 0; df 14)     10.74 (p-value 0; df 11)                      
##      5                                                         6.17 (p-value 0.04; df 1)   4.18 (p-value 0; df 22)    4 (p-value 0; df 4)
## 
## 
## $life_exp_wpp
## $life_exp_wpp$global_mean
## [1] 5.835333
## 
## $life_exp_wpp$ttests
##       gender
## health 1                         2                           3                         4                          5                        
##      1 9.14 (p-value 0; df 28)   13.11 (p-value 0.06; df 10)                                                                               
##      2 5.25 (p-value 0.83; df 6) 7.3 (p-value 0.13; df 11)   2.8 (p-value 0.07; df 11) 5 (p-value 0.29; df 4)                              
##      3                           4.99 (p-value 0.25; df 7)   4.13 (p-value 0; df 18)   5.35 (p-value 0.33; df 11)                          
##      4                           1.75 (p-value 0.04; df 3)   3.59 (p-value 0; df 14)   4.66 (p-value 0.02; df 11)                          
##      5                                                       4.26 (p-value 0.22; df 1) 4.54 (p-value 0; df 22)    4.58 (p-value 0.01; df 4)
## 
## 
## $daly_ihme
## $daly_ihme$global_mean
## [1] 14551.19
## 
## $daly_ihme$ttests
##       gender
## health 1                            2                              3                             4                             5                        
##      1 47988.28 (p-value 0; df 28)  44097.91 (p-value 0; df 10)                                                                                         
##      2 21531.1 (p-value 0.26; df 6) 15662.09 (p-value 0.64; df 11) 6441.71 (p-value 0.01; df 11) 15452.03 (p-value 0.87; df 4)                          
##      3                              7955.44 (p-value 0.01; df 7)   3119.08 (p-value 0; df 18)    4205.14 (p-value 0; df 11)                             
##      4                              -3915.65 (p-value 0.01; df 3)  181.93 (p-value 0; df 14)     3659.28 (p-value 0; df 11)                             
##      5                                                             961.87 (p-value 0.1; df 1)    2197.38 (p-value 0; df 22)    3045.73 (p-value 0; df 4)
## 
## 
## $labor_mod_ratio15_ilo
## $labor_mod_ratio15_ilo$global_mean
## [1] 0.05810865
## 
## $labor_mod_ratio15_ilo$ttests
##       gender
## health 1                         2                          3                          4                          5                        
##      1 0.01 (p-value 0; df 28)   0.04 (p-value 0.26; df 10)                                                                                
##      2 0.04 (p-value 0.64; df 6) 0.04 (p-value 0.5; df 11)  0.07 (p-value 0.74; df 11) 0.02 (p-value 0.64; df 2)                           
##      3                           0.1 (p-value 0.06; df 7)   0.03 (p-value 0.11; df 18) 0.03 (p-value 0.11; df 11)                          
##      4                           0.06 (p-value 0.94; df 3)  0.08 (p-value 0.5; df 11)  0.05 (p-value 0.83; df 11)                          
##      5                                                      0.1 (p-value 0.37; df 1)   0.13 (p-value 0; df 22)    0.12 (p-value 0.11; df 4)
## 
## 
## $wmn_parl_wdi
## $wmn_parl_wdi$global_mean
## [1] NaN
## 
## $wmn_parl_wdi$ttests
##       gender
## health 1 2 3 4 5
##      1          
##      2          
##      3          
##      4          
##      5          
## 
## 
## $tfr_wpp
## $tfr_wpp$global_mean
## [1] 0.9533444
## 
## $tfr_wpp$ttests
##       gender
## health 1                          2                         3                          4                          5                     
##      1 1.36 (p-value 0.01; df 28) 1.8 (p-value 0; df 10)                                                                                
##      2 1.42 (p-value 0.01; df 6)  1.2 (p-value 0.23; df 11) 0.83 (p-value 0.39; df 11) 1.39 (p-value 0.29; df 4)                        
##      3                            1.92 (p-value 0.01; df 7) 1 (p-value 0.79; df 18)    0.51 (p-value 0; df 11)                          
##      4                            1.13 (p-value 0.64; df 3) 0.65 (p-value 0.02; df 14) 0.73 (p-value 0.26; df 11)                       
##      5                                                      -0.04 (p-value 0.05; df 1) 0.08 (p-value 0; df 22)    0.14 (p-value 0; df 4)
## 
## 
## $asfr_adol_wpp
## $asfr_adol_wpp$global_mean
## [1] 22.53888
## 
## $asfr_adol_wpp$ttests
##       gender
## health 1                          2                           3                           4                           5                     
##      1 34.17 (p-value 0; df 28)   26.25 (p-value 0.61; df 10)                                                                               
##      2 38.11 (p-value 0.05; df 6) 26.3 (p-value 0.58; df 11)  21.17 (p-value 0.84; df 11) 18.17 (p-value 0.46; df 4)                        
##      3                            32.47 (p-value 0.2; df 7)   20.92 (p-value 0.64; df 18) 19.61 (p-value 0.56; df 11)                       
##      4                            29.92 (p-value 0.44; df 3)  19.68 (p-value 0.45; df 14) 17.93 (p-value 0.14; df 11)                       
##      5                                                        12.29 (p-value 0.02; df 1)  8.02 (p-value 0; df 22)     8.36 (p-value 0; df 4)
## 
## 
## $daly_ratio_ihme
## $daly_ratio_ihme$global_mean
## [1] 0.00972674
## 
## $daly_ratio_ihme$ttests
##       gender
## health 1                          2                           3                          4                          5                        
##      1 0 (p-value 0.29; df 28)    -0.03 (p-value 0.05; df 10)                                                                                
##      2 -0.02 (p-value 0.07; df 6) -0.01 (p-value 0.21; df 11) 0.03 (p-value 0.48; df 11) -0.02 (p-value 0.01; df 4)                          
##      3                            -0.05 (p-value 0.01; df 7)  0 (p-value 0.41; df 18)    0.05 (p-value 0.08; df 11)                          
##      4                            -0.06 (p-value 0.17; df 3)  0.04 (p-value 0.11; df 14) 0.04 (p-value 0.24; df 11)                          
##      5                                                        0 (p-value 0.7; df 1)      0.04 (p-value 0; df 22)    0.05 (p-value 0.02; df 4)
## 
## 
## $mys_ratio_hdr
## $mys_ratio_hdr$global_mean
## [1] 0.09543494
## 
## $mys_ratio_hdr$ttests
##       gender
## health 1                         2                         3                          4                         5                     
##      1 0.19 (p-value 0; df 20)   0.15 (p-value 0.14; df 6)                                                                            
##      2 0.12 (p-value 0.76; df 5) 0.13 (p-value 0.24; df 9) 0.03 (p-value 0.19; df 10)                                                 
##      3                           0.19 (p-value 0.19; df 4) 0.13 (p-value 0.34; df 15) 0.03 (p-value 0; df 9)                          
##      4                                                     0.07 (p-value 0.19; df 10) 0.04 (p-value 0.07; df 9)                       
##      5                                                     0.08 (p-value 0.83; df 1)  0.05 (p-value 0; df 22)   0.02 (p-value 0; df 3)
## 
## 
## $deaths_all_int_rate
## $deaths_all_int_rate$global_mean
## [1] 1.082219
## 
## $deaths_all_int_rate$ttests
##       gender
## health 1                          2                          3                           4                           5                      
##      1 0.57 (p-value 0.76; df 28) 0.17 (p-value 0.35; df 10)                                                                                
##      2 -0.69 (p-value 0.01; df 6) -0.4 (p-value 0; df 11)    0 (p-value 0; df 11)        0.11 (p-value 0; df 4)                             
##      3                            3.18 (p-value 0.53; df 7)  -0.32 (p-value 0.04; df 18) 0.03 (p-value 0; df 11)                            
##      4                            66.08 (p-value 0.4; df 3)  -2.93 (p-value 0.07; df 14) -3.03 (p-value 0.19; df 11)                        
##      5                                                       0 (p-value 0; df 1)         0 (p-value 0; df 22)        -0.19 (p-value 0; df 4)
## 
## 
## $deaths_civilians_int_rate
## $deaths_civilians_int_rate$global_mean
## [1] 0.2311096
## 
## $deaths_civilians_int_rate$ttests
##       gender
## health 1                          2                          3                           4                           5                  
##      1 0.07 (p-value 0.51; df 28) 0.05 (p-value 0.04; df 10)                                                                            
##      2 0.07 (p-value 0.08; df 6)  0 (p-value 0; df 11)       -0.01 (p-value 0; df 11)    0.01 (p-value 0; df 4)                         
##      3                            0.3 (p-value 0.83; df 7)   0.06 (p-value 0; df 18)     0.01 (p-value 0; df 11)                        
##      4                            11.64 (p-value 0.4; df 3)  -0.17 (p-value 0.01; df 14) -0.54 (p-value 0.17; df 11)                    
##      5                                                       0 (p-value 0; df 1)         0 (p-value 0; df 22)        0 (p-value 0; df 4)
## 
## 
## $deaths_civilians_osv_rate
## $deaths_civilians_osv_rate$global_mean
## [1] -2.319773
## 
## $deaths_civilians_osv_rate$ttests
##       gender
## health 1                           2                           3                        4                           5                      
##      1 -5.45 (p-value 0.45; df 28) -6.38 (p-value 0.54; df 10)                                                                             
##      2 -0.26 (p-value 0; df 6)     0.01 (p-value 0; df 11)     0 (p-value 0; df 11)     -0.05 (p-value 0; df 4)                            
##      3                             0.32 (p-value 0; df 7)      0.05 (p-value 0; df 18)  0.02 (p-value 0; df 11)                            
##      4                             1.91 (p-value 0.11; df 3)   -0.21 (p-value 0; df 14) -18.22 (p-value 0.4; df 11)                        
##      5                                                         0 (p-value 0; df 1)      0.01 (p-value 0; df 22)     -0.06 (p-value 0; df 4)
## 
## 
## $deaths_all_nsc_rate
## $deaths_all_nsc_rate$global_mean
## [1] 0.2496955
## 
## $deaths_all_nsc_rate$ttests
##       gender
## health 1                          2                           3                          4                          5                  
##      1 0.21 (p-value 0.85; df 28) -0.56 (p-value 0.09; df 10)                                                                          
##      2 0.29 (p-value 0.88; df 6)  -0.08 (p-value 0; df 11)    -0.03 (p-value 0; df 11)   -1.02 (p-value 0.11; df 4)                    
##      3                            -0.41 (p-value 0.15; df 7)  1.05 (p-value 0.43; df 18) 0 (p-value 0; df 11)                          
##      4                            8.62 (p-value 0.4; df 3)    0 (p-value 0; df 14)       0.07 (p-value 0.02; df 11)                    
##      5                                                        0 (p-value 0; df 1)        0 (p-value 0; df 22)       0 (p-value 0; df 4)
## 
## 
## $deaths_civilians_nsc_rate
## $deaths_civilians_nsc_rate$global_mean
## [1] 0.01816283
## 
## $deaths_civilians_nsc_rate$ttests
##       gender
## health 1                           2                          3                          4                    5                  
##      1 -0.02 (p-value 0.15; df 28) 0 (p-value 0; df 10)                                                                          
##      2 0 (p-value 0; df 6)         0 (p-value 0; df 11)       0 (p-value 0; df 11)       0 (p-value 0; df 4)                     
##      3                             -0.01 (p-value 0.01; df 7) 0.11 (p-value 0.41; df 18) 0 (p-value 0; df 11)                    
##      4                             0.5 (p-value 0.41; df 3)   0 (p-value 0; df 14)       0 (p-value 0; df 11)                    
##      5                                                        0 (p-value 0; df 1)        0 (p-value 0; df 22) 0 (p-value 0; df 4)
## 
## 
## $deaths_all_ucdp_rate
## $deaths_all_ucdp_rate$global_mean
## [1] -0.9926033
## 
## $deaths_all_ucdp_rate$ttests
##       gender
## health 1                           2                           3                           4                            5                         
##      1 -4.66 (p-value 0.46; df 28) -6.77 (p-value 0.39; df 10)                                                                                    
##      2 -0.65 (p-value 0.55; df 6)  -0.5 (p-value 0.18; df 11)  -0.03 (p-value 0; df 11)    -0.95 (p-value 0.95; df 4)                             
##      3                             3.11 (p-value 0.22; df 7)   0.77 (p-value 0.24; df 18)  0.05 (p-value 0; df 11)                                
##      4                             76.7 (p-value 0.39; df 3)   -3.22 (p-value 0.33; df 14) -21.21 (p-value 0.36; df 11)                           
##      5                                                         0 (p-value 0; df 1)         0 (p-value 0; df 22)         -0.26 (p-value 0.05; df 4)
## 
## 
## $hom_odcwho_rate
## $hom_odcwho_rate$global_mean
## [1] -0.6334615
## 
## $hom_odcwho_rate$ttests
##       gender
## health 1                          2                          3                          4                           5                        
##      1                                                                                                                                       
##      2 -1.67 (p-value 0.15; df 1) 2.48 (p-value 0.31; df 1)  -8.34 (p-value 0.19; df 5)                                                      
##      3                            -2.29 (p-value 0.94; df 2) -1.31 (p-value 0.91; df 9) -3.8 (p-value 0.12; df 9)                            
##      4                            1.42 (p-value 0.65; df 1)  5.96 (p-value 0.1; df 10)  0.22 (p-value 0.49; df 6)                            
##      5                                                       -1.4 (p-value 0.57; df 1)  -0.54 (p-value 0.61; df 21) -0.4 (p-value 0.33; df 3)
## 
## 
## $latentmean_fariss
## $latentmean_fariss$global_mean
## [1] -0.5256115
## 
## $latentmean_fariss$ttests
##       gender
## health 1                          2                           3                           4                           5                         
##      1 -0.4 (p-value 0.5; df 28)  -0.3 (p-value 0.58; df 10)                                                                                    
##      2 -1.28 (p-value 0.05; df 6) -0.96 (p-value 0.09; df 11) -0.05 (p-value 0.04; df 11) -0.16 (p-value 0.38; df 3)                            
##      3                            -0.28 (p-value 0.13; df 6)  -0.46 (p-value 0.77; df 18) -0.33 (p-value 0.3; df 11)                            
##      4                            0 (p-value 0.51; df 3)      -0.71 (p-value 0.54; df 14) -0.64 (p-value 0.79; df 11)                           
##      5                                                        -0.63 (p-value 0.39; df 1)  -0.45 (p-value 0.57; df 22) -0.66 (p-value 0.65; df 4)
## 
## 
## $v2cltort
## $v2cltort$global_mean
## [1] -0.2589878
## 
## $v2cltort$ttests
##       gender
## health 1                           2                           3                           4                           5                         
##      1 -0.18 (p-value 0.72; df 28) -0.08 (p-value 0.51; df 10)                                                                                   
##      2 -0.71 (p-value 0.2; df 6)   -0.97 (p-value 0.13; df 10) -0.16 (p-value 0.68; df 11) -0.13 (p-value 0.89; df 2)                            
##      3                             -0.37 (p-value 0.54; df 7)  -0.61 (p-value 0.16; df 17) -0.54 (p-value 0.15; df 10)                           
##      4                             0.24 (p-value 0.52; df 1)   0.01 (p-value 0.43; df 10)  0.11 (p-value 0.17; df 10)                            
##      5                                                         -0.26 (p-value 0.99; df 1)  -0.02 (p-value 0.06; df 20) -0.12 (p-value 0.44; df 4)
## 
## 
## $v2clkill
## $v2clkill$global_mean
## [1] -0.2952073
## 
## $v2clkill$ttests
##       gender
## health 1                           2                           3                           4                           5                         
##      1 -0.42 (p-value 0.58; df 28) -0.37 (p-value 0.72; df 10)                                                                                   
##      2 -0.72 (p-value 0.29; df 6)  -0.86 (p-value 0.24; df 10) -0.07 (p-value 0.33; df 11) 0.1 (p-value 0.63; df 2)                              
##      3                             -0.17 (p-value 0.58; df 7)  -0.28 (p-value 0.94; df 17) -0.38 (p-value 0.74; df 10)                           
##      4                             0.62 (p-value 0.49; df 1)   -0.23 (p-value 0.79; df 10) -0.18 (p-value 0.71; df 10)                           
##      5                                                         -0.58 (p-value 0.35; df 1)  -0.04 (p-value 0.02; df 20) -0.23 (p-value 0.78; df 4)
## 
## 
## $v2caviol
## $v2caviol$global_mean
## [1] -0.1098632
## 
## $v2caviol$ttests
##       gender
## health 1                          2                         3                          4                          5                         
##      1 0.17 (p-value 0.47; df 14) 0.36 (p-value 0.11; df 5)                                                                                 
##      2 -1.04 (p-value 0.19; df 4) 0.12 (p-value 0.65; df 7) 0.09 (p-value 0.51; df 5)  -0.33 (p-value 0.32; df 1)                           
##      3                            0.15 (p-value 0.75; df 2) 0.33 (p-value 0.47; df 11) -0.35 (p-value 0.42; df 6)                           
##      4                                                      0.05 (p-value 0.82; df 7)  -0.6 (p-value 0.39; df 5)                            
##      5                                                      -0.69 (p-value 0.18; df 1) -0.72 (p-value 0.2; df 8)  -0.33 (p-value 0.24; df 4)</code></pre>
</div>
</div>
<div id="preparing-cross-sectional-dataset-for-later-analyses" class="section level2">
<h2>Preparing cross-sectional dataset for later analyses</h2>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>covariates <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;pc_rgdpe_avg&quot;</span>, <span class="st">&quot;life_exp_wpp&quot;</span>, <span class="st">&quot;imr_wpp&quot;</span>, <span class="st">&quot;mys_ratio_hdr&quot;</span>, <span class="st">&quot;asfr_adol_wpp&quot;</span>)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>vars <span class="ot">&lt;-</span> <span class="fu">unlist</span>(<span class="fu">lapply</span>(covariates, <span class="cf">function</span>(var) { <span class="fu">names</span>(df)[<span class="fu">str_detect</span>(<span class="fu">names</span>(df), var)] }))</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>vars <span class="ot">&lt;-</span> vars[vars <span class="sc">!=</span> <span class="st">&quot;pasfr_adol_wpp&quot;</span>]</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>include <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;country&quot;</span>, <span class="st">&quot;class&quot;</span>, <span class="st">&quot;class_vv&quot;</span>, <span class="st">&quot;class_low&quot;</span>, <span class="st">&quot;class_upp&quot;</span>, vars)</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>new1990 <span class="ot">&lt;-</span> df[df<span class="sc">$</span>year <span class="sc">==</span> <span class="dv">1990</span>, <span class="fu">c</span>(include, variables<span class="sc">$</span>death_rates, variables<span class="sc">$</span>measurement_models)]</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>new1995 <span class="ot">&lt;-</span> df[df<span class="sc">$</span>year <span class="sc">==</span> <span class="dv">1995</span>, <span class="fu">c</span>(include, variables<span class="sc">$</span>death_rates, variables<span class="sc">$</span>measurement_models, </span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste</span>(variables<span class="sc">$</span>conflict_incidence, <span class="st">&quot;cumulative1989&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>),</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste</span>(variables<span class="sc">$</span>political, <span class="st">&quot;cumulative1991&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>))]</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>new2015 <span class="ot">&lt;-</span> df[df<span class="sc">$</span>year <span class="sc">==</span> <span class="dv">2015</span>, <span class="fu">c</span>(include, </span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste</span>(<span class="fu">c</span>(variables<span class="sc">$</span>death_rates, variables<span class="sc">$</span>measurement_models), <span class="st">&quot;cumulative1991&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>),</span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste</span>(<span class="fu">c</span>(variables<span class="sc">$</span>death_rates, variables<span class="sc">$</span>measurement_models), <span class="st">&quot;cumulative1996&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>),</span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste</span>(variables<span class="sc">$</span>conflict_incidence, <span class="st">&quot;cumulative1991&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>),</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste</span>(variables<span class="sc">$</span>conflict_incidence, <span class="st">&quot;cumulative1996&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>),</span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste</span>(variables<span class="sc">$</span>political, <span class="st">&quot;cumulative1991&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>),</span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste</span>(variables<span class="sc">$</span>political, <span class="st">&quot;cumulative1996&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>))]</span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(new1990)[<span class="fu">names</span>(new1990) <span class="sc">!=</span> <span class="st">&quot;country&quot;</span>] <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="fu">names</span>(new1990)[<span class="fu">names</span>(new1990) <span class="sc">!=</span> <span class="st">&quot;country&quot;</span>], <span class="st">&quot;1990&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>)</span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(new1995)[<span class="fu">names</span>(new1995) <span class="sc">!=</span> <span class="st">&quot;country&quot;</span>] <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="fu">names</span>(new1995)[<span class="fu">names</span>(new1995) <span class="sc">!=</span> <span class="st">&quot;country&quot;</span>], <span class="st">&quot;1995&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>)</span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(new2015)[<span class="fu">names</span>(new2015) <span class="sc">!=</span> <span class="st">&quot;country&quot;</span>] <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="fu">names</span>(new2015)[<span class="fu">names</span>(new2015) <span class="sc">!=</span> <span class="st">&quot;country&quot;</span>], <span class="st">&quot;2015&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>)</span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>new <span class="ot">&lt;-</span> <span class="fu">merge</span>(new1990, new1995, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;country&quot;</span>), <span class="at">all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a>new <span class="ot">&lt;-</span> <span class="fu">merge</span>(new, new2015, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;country&quot;</span>), <span class="at">all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a><span class="do">## growth vars </span></span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a>new<span class="sc">$</span>pc_rgdpe_avg_growth1990_2015 <span class="ot">&lt;-</span> new<span class="sc">$</span>pc_rgdpe_avg_2015 <span class="sc">-</span> new<span class="sc">$</span>pc_rgdpe_avg_1990</span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a>new<span class="sc">$</span>life_exp_wpp_growth1990_2015 <span class="ot">&lt;-</span> new<span class="sc">$</span>life_exp_wpp_2015 <span class="sc">-</span> new<span class="sc">$</span>life_exp_wpp_1990</span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a>new<span class="sc">$</span>imr_wpp_growth1990_2015 <span class="ot">&lt;-</span> new<span class="sc">$</span>imr_wpp_2015 <span class="sc">-</span> new<span class="sc">$</span>imr_wpp_1990</span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a>new<span class="sc">$</span>mys_ratio_hdr_growth1990_2015 <span class="ot">&lt;-</span> new<span class="sc">$</span>mys_ratio_hdr_2015 <span class="sc">-</span> new<span class="sc">$</span>mys_ratio_hdr_1990</span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a>new<span class="sc">$</span>asfr_adol_wpp_growth1990_2015 <span class="ot">&lt;-</span> new<span class="sc">$</span>asfr_adol_wpp_2015 <span class="sc">-</span> new<span class="sc">$</span>asfr_adol_wpp_1990</span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a>new<span class="sc">$</span>pc_rgdpe_avg_growth1995_2015 <span class="ot">&lt;-</span> new<span class="sc">$</span>pc_rgdpe_avg_2015 <span class="sc">-</span> new<span class="sc">$</span>pc_rgdpe_avg_1995</span>
<span id="cb17-28"><a href="#cb17-28" aria-hidden="true" tabindex="-1"></a>new<span class="sc">$</span>life_exp_wpp_growth1995_2015 <span class="ot">&lt;-</span> new<span class="sc">$</span>life_exp_wpp_2015 <span class="sc">-</span> new<span class="sc">$</span>life_exp_wpp_1995</span>
<span id="cb17-29"><a href="#cb17-29" aria-hidden="true" tabindex="-1"></a>new<span class="sc">$</span>imr_wpp_growth1995_2015 <span class="ot">&lt;-</span> new<span class="sc">$</span>imr_wpp_2015 <span class="sc">-</span> new<span class="sc">$</span>imr_wpp_1995</span>
<span id="cb17-30"><a href="#cb17-30" aria-hidden="true" tabindex="-1"></a>new<span class="sc">$</span>mys_ratio_hdr_growth1995_2015 <span class="ot">&lt;-</span> new<span class="sc">$</span>mys_ratio_hdr_2015 <span class="sc">-</span> new<span class="sc">$</span>mys_ratio_hdr_1995</span>
<span id="cb17-31"><a href="#cb17-31" aria-hidden="true" tabindex="-1"></a>new<span class="sc">$</span>asfr_adol_wpp_growth1995_2015 <span class="ot">&lt;-</span> new<span class="sc">$</span>asfr_adol_wpp_2015 <span class="sc">-</span> new<span class="sc">$</span>asfr_adol_wpp_1995</span>
<span id="cb17-32"><a href="#cb17-32" aria-hidden="true" tabindex="-1"></a><span class="do">## logged version of pcGDP growth vars; need to account for negative values</span></span>
<span id="cb17-33"><a href="#cb17-33" aria-hidden="true" tabindex="-1"></a>new<span class="sc">$</span>lg_pc_rgdpe_avg_growth1990_2015[<span class="fu">IsTrue</span>(new<span class="sc">$</span>pc_rgdpe_avg_growth1990_2015 <span class="sc">&lt;</span> <span class="dv">0</span>)] <span class="ot">&lt;-</span> <span class="fu">log</span>(<span class="sc">-</span>new<span class="sc">$</span>pc_rgdpe_avg_growth1990_2015[<span class="fu">IsTrue</span>(new<span class="sc">$</span>pc_rgdpe_avg_growth1990_2015 <span class="sc">&lt;</span> <span class="dv">0</span>)])</span>
<span id="cb17-34"><a href="#cb17-34" aria-hidden="true" tabindex="-1"></a>new<span class="sc">$</span>lg_pc_rgdpe_avg_growth1990_2015[<span class="fu">IsTrue</span>(new<span class="sc">$</span>pc_rgdpe_avg_growth1990_2015 <span class="sc">&gt;=</span> <span class="dv">0</span>)] <span class="ot">&lt;-</span> <span class="fu">log</span>(new<span class="sc">$</span>pc_rgdpe_avg_growth1990_2015[<span class="fu">IsTrue</span>(new<span class="sc">$</span>pc_rgdpe_avg_growth1990_2015 <span class="sc">&gt;=</span> <span class="dv">0</span>)])</span>
<span id="cb17-35"><a href="#cb17-35" aria-hidden="true" tabindex="-1"></a>new<span class="sc">$</span>lg_pc_rgdpe_avg_growth1995_2015[<span class="fu">IsTrue</span>(new<span class="sc">$</span>pc_rgdpe_avg_growth1995_2015 <span class="sc">&lt;</span> <span class="dv">0</span>)] <span class="ot">&lt;-</span> <span class="fu">log</span>(<span class="sc">-</span>new<span class="sc">$</span>pc_rgdpe_avg_growth1995_2015[<span class="fu">IsTrue</span>(new<span class="sc">$</span>pc_rgdpe_avg_growth1995_2015 <span class="sc">&lt;</span> <span class="dv">0</span>)])</span>
<span id="cb17-36"><a href="#cb17-36" aria-hidden="true" tabindex="-1"></a>new<span class="sc">$</span>lg_pc_rgdpe_avg_growth1995_2015[<span class="fu">IsTrue</span>(new<span class="sc">$</span>pc_rgdpe_avg_growth1995_2015 <span class="sc">&gt;=</span> <span class="dv">0</span>)] <span class="ot">&lt;-</span> <span class="fu">log</span>(new<span class="sc">$</span>pc_rgdpe_avg_growth1995_2015[<span class="fu">IsTrue</span>(new<span class="sc">$</span>pc_rgdpe_avg_growth1995_2015 <span class="sc">&gt;=</span> <span class="dv">0</span>)])</span>
<span id="cb17-37"><a href="#cb17-37" aria-hidden="true" tabindex="-1"></a>CodePerformance <span class="ot">&lt;-</span> <span class="cf">function</span>(y_var, x_vars, <span class="at">show =</span> <span class="cn">FALSE</span>, <span class="at">prefix =</span> <span class="st">&quot;perf&quot;</span>) {</span>
<span id="cb17-38"><a href="#cb17-38" aria-hidden="true" tabindex="-1"></a>  x_vars <span class="ot">&lt;-</span> <span class="fu">paste</span>(x_vars, <span class="at">collapse =</span> <span class="st">&quot; + &quot;</span>)</span>
<span id="cb17-39"><a href="#cb17-39" aria-hidden="true" tabindex="-1"></a>  equation <span class="ot">&lt;-</span> <span class="fu">paste</span>(y_var, <span class="st">&quot; ~ &quot;</span>, x_vars, <span class="at">sep =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb17-40"><a href="#cb17-40" aria-hidden="true" tabindex="-1"></a>  df <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(<span class="fu">get_all_vars</span>(<span class="at">formula =</span> equation, <span class="at">data =</span> new, <span class="at">country =</span> country))</span>
<span id="cb17-41"><a href="#cb17-41" aria-hidden="true" tabindex="-1"></a>  mod <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="at">formula =</span> equation, <span class="at">data =</span> df)</span>
<span id="cb17-42"><a href="#cb17-42" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>predicted <span class="ot">&lt;-</span> <span class="fu">predict</span>(mod)</span>
<span id="cb17-43"><a href="#cb17-43" aria-hidden="true" tabindex="-1"></a>  df[, <span class="fu">paste</span>(prefix, y_var, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>)] <span class="ot">&lt;-</span> df[, y_var] <span class="sc">-</span> df<span class="sc">$</span>predicted</span>
<span id="cb17-44"><a href="#cb17-44" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(show) <span class="fu">print</span>(df)</span>
<span id="cb17-45"><a href="#cb17-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">invisible</span>(df[, <span class="fu">c</span>(<span class="st">&quot;country&quot;</span>, <span class="fu">paste</span>(prefix, y_var, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>))]))</span>
<span id="cb17-46"><a href="#cb17-46" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb17-47"><a href="#cb17-47" aria-hidden="true" tabindex="-1"></a>performance_measures <span class="ot">&lt;-</span> <span class="fu">unlist</span>(<span class="fu">lapply</span>(<span class="fu">c</span>(<span class="dv">1990</span>, <span class="dv">1995</span>), <span class="cf">function</span>(year) {</span>
<span id="cb17-48"><a href="#cb17-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unlist</span>(<span class="fu">lapply</span>(covariates[<span class="dv">2</span><span class="sc">:</span><span class="dv">5</span>], <span class="cf">function</span>(var) {</span>
<span id="cb17-49"><a href="#cb17-49" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">list</span>(</span>
<span id="cb17-50"><a href="#cb17-50" aria-hidden="true" tabindex="-1"></a>      <span class="fu">CodePerformance</span>(<span class="at">y_var =</span> <span class="fu">paste</span>(var, <span class="st">&quot;_growth&quot;</span>, year, <span class="st">&quot;_2015&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;&quot;</span>), </span>
<span id="cb17-51"><a href="#cb17-51" aria-hidden="true" tabindex="-1"></a>                      <span class="at">x_vars =</span> <span class="fu">paste</span>(<span class="fu">c</span>(<span class="fu">paste</span>(<span class="st">&quot;lg&quot;</span>, var, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>), <span class="st">&quot;lg_pc_rgdpe_avg&quot;</span>), year, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>)),</span>
<span id="cb17-52"><a href="#cb17-52" aria-hidden="true" tabindex="-1"></a>      <span class="fu">CodePerformance</span>(<span class="at">y_var =</span> <span class="fu">paste</span>(var, <span class="st">&quot;_growth&quot;</span>, year, <span class="st">&quot;_2015&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;&quot;</span>), </span>
<span id="cb17-53"><a href="#cb17-53" aria-hidden="true" tabindex="-1"></a>                      <span class="at">x_vars =</span> <span class="fu">c</span>(<span class="fu">paste</span>(<span class="fu">c</span>(<span class="fu">paste</span>(<span class="st">&quot;lg&quot;</span>, var, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>), <span class="st">&quot;lg_pc_rgdpe_avg&quot;</span>), year, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>),</span>
<span id="cb17-54"><a href="#cb17-54" aria-hidden="true" tabindex="-1"></a>                                 <span class="fu">paste</span>(<span class="st">&quot;lg_pc_rgdpe_avg_growth&quot;</span>, year, <span class="st">&quot;_2015&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;&quot;</span>)), <span class="at">prefix =</span> <span class="st">&quot;perfv2&quot;</span>)</span>
<span id="cb17-55"><a href="#cb17-55" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb17-56"><a href="#cb17-56" aria-hidden="true" tabindex="-1"></a>  }), <span class="at">recursive =</span> <span class="cn">FALSE</span>)</span>
<span id="cb17-57"><a href="#cb17-57" aria-hidden="true" tabindex="-1"></a>}), <span class="at">recursive =</span> <span class="cn">FALSE</span>)</span>
<span id="cb17-58"><a href="#cb17-58" aria-hidden="true" tabindex="-1"></a>performance_measures <span class="ot">&lt;-</span> <span class="fu">Reduce</span>(<span class="at">f =</span> <span class="cf">function</span>(...) <span class="fu">merge</span>(..., <span class="at">by =</span> <span class="st">&quot;country&quot;</span>, <span class="at">all =</span> <span class="cn">TRUE</span>), <span class="at">x =</span> performance_measures)</span>
<span id="cb17-59"><a href="#cb17-59" aria-hidden="true" tabindex="-1"></a>new <span class="ot">&lt;-</span> <span class="fu">merge</span>(new, performance_measures, <span class="at">by =</span> <span class="st">&quot;country&quot;</span>, <span class="at">all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb17-60"><a href="#cb17-60" aria-hidden="true" tabindex="-1"></a><span class="co"># filepath &lt;- paste(&quot;~/Dropbox/Lancet-SIGHT Commission/Working Groups/Metrics/Datasets/dataset_crosssectional_&quot;, lubridate::today(), &quot;.csv&quot;, sep = &quot;&quot; )</span></span>
<span id="cb17-61"><a href="#cb17-61" aria-hidden="true" tabindex="-1"></a><span class="co"># write.csv(new, file = filepath)</span></span></code></pre></div>
</div>
<div id="performance-rankings-within-classification-groups" class="section level2">
<h2>Performance Rankings within classification groups</h2>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>Performance <span class="ot">&lt;-</span> <span class="cf">function</span>(category, year, vars) {</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  countries <span class="ot">&lt;-</span> <span class="fu">unique</span>(df<span class="sc">$</span>country[df<span class="sc">$</span>year <span class="sc">==</span> year <span class="sc">&amp;</span> df<span class="sc">$</span>class_vv <span class="sc">%in%</span> category])</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  countries <span class="ot">&lt;-</span> countries[<span class="sc">!</span><span class="fu">is.na</span>(countries)]</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lapply</span>(vars, <span class="cf">function</span>(var) {</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>    var <span class="ot">&lt;-</span> <span class="fu">paste</span>(var, <span class="st">&quot;_growth&quot;</span>, year, <span class="st">&quot;_2015&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># other &lt;- paste(c(&quot;deaths_all_ucdp_rate_cumulative&quot;), year + 1, &quot;_2015&quot;, sep = &quot;&quot;)</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>    other <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>    select_vars <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;country&quot;</span>, var, <span class="fu">paste</span>(<span class="st">&quot;perf&quot;</span>, var, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>), other)</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># select_vars[!select_vars %in% names(new)]</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>    dat <span class="ot">&lt;-</span> new[new<span class="sc">$</span>country <span class="sc">%in%</span> countries, select_vars]</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>    dat[<span class="fu">order</span>(dat[, var], <span class="at">decreasing =</span> <span class="cn">TRUE</span>, <span class="at">na.last =</span> <span class="cn">NA</span>), ]</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<div id="low-classification" class="section level3">
<h3>Low classification</h3>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Performance</span>(<span class="at">category =</span> <span class="st">&quot;low&quot;</span>, <span class="at">year =</span> <span class="dv">1995</span>, <span class="at">vars =</span> <span class="fu">c</span>(variables<span class="sc">$</span>health, variables<span class="sc">$</span>gender))</span></code></pre></div>
<pre><code>## $life_exp_wpp
##                      country life_exp_wpp_growth1995_2015 perf_life_exp_wpp_growth1995_2015
## 146                   Rwanda                        44.00                        15.6370726
## 60                  Ethiopia                        15.63                         5.6604691
## 187                   Uganda                        14.94                         2.7052494
## 20                    Bhutan                        14.60                         5.8882904
## 99                   Liberia                        14.53                         3.9591625
## 129                    Niger                        14.15                         2.3535015
## 158             Sierra Leone                        13.86                        -2.8115245
## 106                   Malawi                        13.42                         1.8763556
## 29                  Cambodia                        13.34                         5.3515806
## 108                 Maldives                        13.05                         7.0621836
## 200                   Zambia                        12.93                         1.4358004
## 57                   Eritrea                        12.65                                NA
## 5                     Angola                        12.50                        -0.4680210
## 125                    Nepal                        12.05                         5.0213484
## 28                   Burundi                        11.89                         1.0646711
## 105               Madagascar                        11.84                         3.1958062
## 21                   Bolivia                        11.60                         4.1372284
## 177                 Tanzania                        11.24                         1.4725698
## 95                      Laos                        11.06                         3.0239962
## 14                Bangladesh                        10.89                         4.8788380
## 1                Afghanistan                        10.36                                NA
## 152      Sao Tome &amp; Principe                        10.24                         3.5484075
## 184                   Turkey                        10.10                         3.9775386
## 163                  Somalia                         9.90                                NA
## 109                     Mali                         9.66                        -1.3164510
## 27              Burkina Faso                         9.38                        -0.5357478
## 120                  Morocco                         9.06                         4.0079560
## 71                 Guatemala                         8.85                         3.1101402
## 79                     India                         8.65                         2.3663202
## 40                Congo, DRC                         8.51                        -1.3812439
## 154                  Senegal                         8.15                         0.7260010
## 73             Guinea-Bissau                         8.03                        -3.0481911
## 39                     Congo                         7.94                        -0.8249882
## 121               Mozambique                         7.92                        -2.7344273
## 198                    Yemen                         7.81                         2.0166379
## 170                    Sudan                         7.76                         0.2364652
## 139                     Peru                         7.48                         3.1433549
## 65                    Gambia                         7.42                        -1.9827570
## 90                     Kenya                         7.26                        -0.8033107
## 80                 Indonesia                         6.70                         0.8808579
## 72                    Guinea                         6.69                        -3.6054338
## 162          Solomon Islands                         6.64                                NA
## 56         Equatorial Guinea                         6.55                        -3.8326236
## 75                     Haiti                         6.38                        -1.2937167
## 130                  Nigeria                         6.08                        -4.8908092
## 137         Papua New Guinea                         5.42                                NA
## 54                     Egypt                         5.39                         0.6098402
## 133                 Pakistan                         5.20                        -1.0735387
## 34                      Chad                         5.09                        -6.0253812
## 38                   Comoros                         5.01                        -2.6493475
## 19                     Benin                         4.79                        -2.8871802
## 68                     Ghana                         4.04                        -3.4379136
## 30                  Cameroon                         3.68                        -5.7480138
## 180                     Togo                         3.30                        -4.2557120
## 112               Mauritania                         3.06                        -3.2304180
## 201                 Zimbabwe                         2.27                        -7.1765434
## 42             Cote d&#39;Ivoire                         1.97                        -7.4877519
## 33  Central African Republic                         0.79                        -9.8151182
## 59                  Eswatini                       -10.23                       -17.5566949
## 
## $imr_wpp
##                      country imr_wpp_growth1995_2015 perf_imr_wpp_growth1995_2015
## 146                   Rwanda                 156.846                  101.3413533
## 99                   Liberia                  95.964                   42.3460134
## 121               Mozambique                  75.594                   24.1016319
## 106                   Malawi                  74.605                   26.1920456
## 129                    Niger                  73.804                   24.4098564
## 60                  Ethiopia                  68.205                   20.0570134
## 5                     Angola                  66.809                   18.5152058
## 158             Sierra Leone                  65.676                   14.4822822
## 200                   Zambia                  63.350                   16.3859298
## 105               Madagascar                  63.279                   18.7583253
## 72                    Guinea                  62.458                   16.4746785
## 177                 Tanzania                  58.400                   12.6566076
## 28                   Burundi                  58.220                   11.3285023
## 73             Guinea-Bissau                  56.778                    9.4914976
## 29                  Cambodia                  55.983                   13.8484742
## 14                Bangladesh                  55.101                   13.1352285
## 125                    Nepal                  53.220                   10.8521199
## 108                 Maldives                  51.451                   18.3523536
## 130                  Nigeria                  50.889                    1.0891746
## 95                      Laos                  50.837                    6.9736949
## 21                   Bolivia                  50.737                   10.9705565
## 1                Afghanistan                  50.233                           NA
## 163                  Somalia                  49.977                           NA
## 57                   Eritrea                  49.419                           NA
## 109                     Mali                  48.481                   -0.6866388
## 152      Sao Tome &amp; Principe                  47.294                    7.0566717
## 187                   Uganda                  46.314                    0.5329932
## 20                    Bhutan                  45.121                    7.0300063
## 184                   Turkey                  44.359                   13.9817225
## 79                     India                  43.026                    2.1123658
## 56         Equatorial Guinea                  42.222                   -3.4075185
## 54                     Egypt                  40.630                    6.3901490
## 198                    Yemen                  40.258                   -2.7797131
## 27              Burkina Faso                  39.229                   -6.3409520
## 40                Congo, DRC                  36.507                   -9.6719667
## 139                     Peru                  36.046                    5.1078794
## 34                      Chad                  34.977                  -12.2552822
## 19                     Benin                  34.516                  -10.1592491
## 154                  Senegal                  33.307                   -4.3098911
## 42             Cote d&#39;Ivoire                  32.958                   -9.8410415
## 133                 Pakistan                  32.943                   -9.7668121
## 90                     Kenya                  32.477                   -5.9502655
## 30                  Cameroon                  32.255                  -11.0410226
## 170                    Sudan                  32.087                   -8.3896849
## 75                     Haiti                  31.413                  -11.8225649
## 80                 Indonesia                  30.908                   -1.7416743
## 120                  Morocco                  28.816                   -2.6391880
## 71                 Guatemala                  28.370                   -4.0619019
## 180                     Togo                  27.726                  -13.5287278
## 68                     Ghana                  27.665                   -9.8669485
## 65                    Gambia                  26.241                  -12.1945376
## 38                   Comoros                  22.888                  -15.9025083
## 39                     Congo                  22.552                  -13.8615527
## 33  Central African Republic                  20.741                  -25.5608883
## 137         Papua New Guinea                  15.575                           NA
## 112               Mauritania                  11.458                  -26.2089456
## 201                 Zimbabwe                  10.623                  -23.1217832
## 162          Solomon Islands                   9.230                           NA
## 59                  Eswatini                   2.495                  -28.2730190
## 
## $mys_ratio_hdr
##                      country mys_ratio_hdr_growth1995_2015 perf_mys_ratio_hdr_growth1995_2015
## 54                     Egypt                  0.2916080638                        0.122339021
## 19                     Benin                  0.2875264271                        0.050584543
## 95                      Laos                  0.2827380952                        0.119705726
## 106                   Malawi                  0.2800000000                        0.109914974
## 170                    Sudan                  0.2674216028                        0.079863141
## 125                    Nepal                  0.2626728111                       -0.023718296
## 29                  Cambodia                  0.2439746300                        0.058207622
## 129                    Niger                  0.2342857143                       -0.049720864
## 42             Cote d&#39;Ivoire                  0.2275795564                        0.012097660
## 137         Papua New Guinea                  0.2231132075                                 NA
## 198                    Yemen                  0.2229437229                       -0.153498062
## 28                   Burundi                  0.2222222222                        0.053776853
## 71                 Guatemala                  0.2153846154                        0.125884306
## 90                     Kenya                  0.2137931034                        0.072132923
## 177                 Tanzania                  0.2113095238                        0.094737206
## 79                     India                  0.2053658537                       -0.023555356
## 133                 Pakistan                  0.1978021978                       -0.039479678
## 39                     Congo                  0.1960652806                        0.071503754
## 158             Sierra Leone                  0.1904761905                       -0.014129419
## 14                Bangladesh                  0.1893772894                        0.053103240
## 184                   Turkey                  0.1877705628                        0.047314248
## 109                     Mali                  0.1820512821                       -0.040225847
## 99                   Liberia                  0.1808510638                       -0.076627595
## 146                   Rwanda                  0.1608695652                        0.029638956
## 68                     Ghana                  0.1588347494                        0.011794835
## 59                  Eswatini                  0.1582515194                        0.053247735
## 40                Congo, DRC                  0.1423709586                       -0.064356031
## 65                    Gambia                  0.1407867495                       -0.044020105
## 33  Central African Republic                  0.1303935514                       -0.097402003
## 187                   Uganda                  0.1284313725                       -0.027620536
## 75                     Haiti                  0.1136363636                       -0.066800831
## 201                 Zimbabwe                  0.1100694444                        0.009933556
## 120                  Morocco                  0.1093750000                       -0.070031540
## 180                     Togo                  0.1079365079                       -0.110107179
## 121               Mozambique                  0.0889328063                       -0.096163836
## 1                Afghanistan                  0.0883620690                                 NA
## 108                 Maldives                  0.0854309687                        0.012848684
## 80                 Indonesia                  0.0728571429                       -0.003308769
## 21                   Bolivia                  0.0561920349                       -0.023662447
## 112               Mauritania                  0.0522875817                       -0.099189748
## 139                     Peru                  0.0511549002                       -0.021239967
## 30                  Cameroon                  0.0147523709                       -0.117335790
## 200                   Zambia                 -0.0008067769                       -0.057740368
## 154                  Senegal                 -0.2368421053                       -0.331988405
## 
## $asfr_adol_wpp
##                      country asfr_adol_wpp_growth1995_2015 perf_asfr_adol_wpp_growth1995_2015
## 108                 Maldives                        91.781                         59.8200603
## 198                    Yemen                        78.568                         48.5394904
## 20                    Bhutan                        72.961                         43.5443108
## 79                     India                        65.924                         39.8990427
## 1                Afghanistan                        63.132                                 NA
## 65                    Gambia                        61.531                         26.1897721
## 30                  Cameroon                        56.723                         19.3759609
## 125                    Nepal                        55.789                         25.4308254
## 14                Bangladesh                        54.862                         22.2962156
## 158             Sierra Leone                        51.224                         15.1493570
## 71                 Guatemala                        49.724                         15.3561099
## 57                   Eritrea                        49.605                                 NA
## 5                     Angola                        45.600                          5.0954357
## 187                   Uganda                        45.266                         11.1241668
## 59                  Eswatini                        43.877                          8.1069710
## 34                      Chad                        39.874                          1.9195152
## 60                  Ethiopia                        39.696                         13.4983150
## 154                  Senegal                        39.530                          7.6146333
## 133                 Pakistan                        38.512                         12.8951882
## 95                      Laos                        37.221                          9.9159902
## 72                    Guinea                        34.428                         -4.1402866
## 38                   Comoros                        33.755                          2.7598411
## 68                     Ghana                        32.062                          2.3329430
## 73             Guinea-Bissau                        30.469                         -1.5326382
## 19                     Benin                        30.401                          0.4124152
## 56         Equatorial Guinea                        29.482                         -8.6484653
## 27              Burkina Faso                        29.414                         -1.6782629
## 105               Madagascar                        29.174                         -3.0543288
## 90                     Kenya                        29.107                         -1.3661345
## 184                   Turkey                        29.023                          2.7953056
## 121               Mozambique                        28.210                         -4.5363286
## 170                    Sudan                        28.040                         -0.1475028
## 130                  Nigeria                        26.383                         -2.6384502
## 112               Mauritania                        24.939                         -3.9163510
## 54                     Egypt                        24.676                         -1.5626247
## 28                   Burundi                        24.075                          1.7236570
## 152      Sao Tome &amp; Principe                        23.893                         -6.6387851
## 42             Cote d&#39;Ivoire                        23.647                        -11.0948529
## 99                   Liberia                        22.375                         -7.6826402
## 129                    Niger                        22.023                        -15.0031276
## 200                   Zambia                        20.739                        -12.1772835
## 137         Papua New Guinea                        19.258                                 NA
## 21                   Bolivia                        19.241                         -8.4596921
## 146                   Rwanda                        18.179                          1.1620082
## 29                  Cambodia                        17.965                         -2.0759585
## 139                     Peru                        17.937                         -9.2483630
## 177                 Tanzania                        17.539                        -13.1365101
## 109                     Mali                        17.434                        -17.5115791
## 75                     Haiti                        16.708                         -4.9594721
## 33  Central African Republic                        16.290                        -16.2226275
## 180                     Togo                        15.749                        -12.1741057
## 106                   Malawi                        15.100                        -17.8111240
## 80                 Indonesia                        12.635                        -10.8317346
## 39                     Congo                         7.054                        -24.3730158
## 162          Solomon Islands                         6.758                                 NA
## 120                  Morocco                         3.478                        -12.4133228
## 40                Congo, DRC                        -2.239                        -31.6450446
## 201                 Zimbabwe                        -6.097                        -37.6626173
## 163                  Somalia                        -8.646                                 NA</code></pre>
</div>
<div id="h-g-classification" class="section level3">
<h3>H &gt; G classification</h3>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Performance</span>(<span class="at">category =</span> <span class="st">&quot;H &gt; G&quot;</span>, <span class="at">year =</span> <span class="dv">1995</span>, <span class="at">vars =</span> <span class="fu">c</span>(variables<span class="sc">$</span>health, variables<span class="sc">$</span>gender))</span></code></pre></div>
<pre><code>## $life_exp_wpp
##                            country life_exp_wpp_growth1995_2015 perf_life_exp_wpp_growth1995_2015
## 165                    South Korea                         8.43                         4.2214007
## 81                            Iran                         8.13                         3.4443959
## 128                      Nicaragua                         7.00                         2.4565416
## 76                        Honduras                         6.22                         2.2220818
## 32                      Cape Verde                         6.03                         1.5622962
## 169                      Sri Lanka                         5.87                         2.4782158
## 55                     El Salvador                         5.74                         1.1597323
## 35                           Chile                         5.07                         1.8989982
## 10                         Austria                         4.84                         1.0609495
## 43                         Croatia                         4.64                         1.0876796
## 153                   Saudi Arabia                         4.27                        -0.9025512
## 25                          Brunei                         4.17                        -1.8034918
## 135          Palestinian Territory                         4.14                         0.4193966
## 6                Antigua &amp; Barbuda                         4.03                        -0.1625565
## 113                      Mauritius                         3.86                        -0.7785654
## 136                         Panama                         3.75                         0.6459770
## 44                            Cuba                         3.68                                NA
## 148                    Saint Lucia                         3.49                        -0.2187625
## 107                       Malaysia                         3.49                        -0.6208494
## 171                       Suriname                         3.31                        -1.5153235
## 26                        Bulgaria                         3.13                        -0.9514363
## 41                      Costa Rica                         3.08                         0.6169143
## 157                     Seychelles                         2.33                        -2.6278055
## 70                         Grenada                         2.11                        -1.6379999
## 82                            Iraq                         2.07                        -1.7313213
## 195                      Venezuela                         2.04                        -1.9417057
## 12                         Bahamas                         1.50                        -3.6710456
## 149 Saint Vincent &amp; the Grenadines                         1.15                        -2.7379162
## 86                         Jamaica                         0.06                        -2.5695333
## 174                          Syria                        -1.41                        -3.0953525
## 
## $imr_wpp
##                            country imr_wpp_growth1995_2015 perf_imr_wpp_growth1995_2015
## 128                      Nicaragua                  30.120                   -0.8172150
## 32                      Cape Verde                  25.941                   -5.1511974
## 76                        Honduras                  24.615                   -4.6459834
## 81                            Iran                  24.187                   -2.8064882
## 55                     El Salvador                  23.391                   -5.1194119
## 153                   Saudi Arabia                  21.348                    1.8764995
## 171                       Suriname                  18.017                   -7.7247174
## 6                Antigua &amp; Barbuda                  13.822                   -0.6299222
## 135          Palestinian Territory                  13.378                  -11.3890169
## 169                      Sri Lanka                  11.212                   -5.9761791
## 136                         Panama                  10.246                   -9.3125900
## 82                            Iraq                   9.532                  -18.5602455
## 12                         Bahamas                   9.455                   -1.1161171
## 86                         Jamaica                   8.782                  -10.0142976
## 174                          Syria                   8.390                  -15.8266195
## 195                      Venezuela                   8.081                   -9.3163286
## 165                    South Korea                   7.328                    4.0461107
## 26                        Bulgaria                   7.080                   -3.8281385
## 35                           Chile                   6.799                   -2.5202355
## 113                      Mauritius                   6.460                   -6.5648696
## 43                         Croatia                   5.953                    1.3439958
## 107                       Malaysia                   5.922                   -1.2888868
## 41                      Costa Rica                   5.229                   -5.0179147
## 44                            Cuba                   5.138                           NA
## 10                         Austria                   3.546                    7.7229816
## 70                         Grenada                   2.773                  -10.3158384
## 149 Saint Vincent &amp; the Grenadines                   1.916                  -13.1253475
## 25                          Brunei                   1.764                    0.6003328
## 148                    Saint Lucia                   1.748                  -11.7438221
## 157                     Seychelles                   0.897                   -6.0740262
## 
## $mys_ratio_hdr
##          country mys_ratio_hdr_growth1995_2015 perf_mys_ratio_hdr_growth1995_2015
## 81          Iran                   0.339375000                        0.211471764
## 128    Nicaragua                   0.293269231                        0.205600008
## 153 Saudi Arabia                   0.278888889                        0.132330646
## 82          Iraq                   0.192307692                        0.017435455
## 43       Croatia                   0.166386555                        0.064115309
## 113    Mauritius                   0.140601504                        0.048761372
## 10       Austria                   0.137655626                        0.046091022
## 174        Syria                   0.135154062                        0.030489879
## 107     Malaysia                   0.129839747                        0.050511334
## 165  South Korea                   0.090928137                       -0.001254859
## 25        Brunei                   0.084249084                        0.012876261
## 195    Venezuela                   0.079081633                        0.035772451
## 76      Honduras                   0.073924731                        0.031679742
## 55   El Salvador                   0.042777778                       -0.022001923
## 26      Bulgaria                   0.041155704                       -0.006021852
## 41    Costa Rica                   0.037418301                       -0.005285118
## 86       Jamaica                   0.022513441                       -0.008115322
## 44          Cuba                   0.021505376                                 NA
## 35         Chile                  -0.005316742                       -0.050893903
## 169    Sri Lanka                  -0.022807018                       -0.072950267
## 
## $asfr_adol_wpp
##                            country asfr_adol_wpp_growth1995_2015 perf_asfr_adol_wpp_growth1995_2015
## 128                      Nicaragua                        53.419                         17.9640214
## 148                    Saint Lucia                        50.463                         18.4945266
## 153                   Saudi Arabia                        49.452                         21.3973785
## 135          Palestinian Territory                        49.295                         17.8572712
## 70                         Grenada                        48.097                         19.1792355
## 76                        Honduras                        47.388                         14.1338740
## 86                         Jamaica                        36.901                          5.7247741
## 12                         Bahamas                        36.846                          5.5906029
## 81                            Iran                        36.039                         10.4655784
## 41                      Costa Rica                        33.819                          1.7077213
## 149 Saint Vincent &amp; the Grenadines                        33.443                          3.0116501
## 32                      Cape Verde                        33.045                          2.7358784
## 171                       Suriname                        28.907                         -2.3264506
## 55                     El Salvador                        27.685                         -2.1281318
## 6                Antigua &amp; Barbuda                        24.791                         -4.9328592
## 174                          Syria                        24.632                          4.7130102
## 25                          Brunei                        23.832                         -0.7322815
## 26                        Bulgaria                        22.958                         -4.2720931
## 35                           Chile                        14.682                        -13.1339679
## 113                      Mauritius                        14.190                         -7.1100050
## 44                            Cuba                        12.658                                 NA
## 10                         Austria                        11.925                         -1.2393054
## 136                         Panama                        11.135                        -21.2608330
## 43                         Croatia                         9.495                          0.1482466
## 169                      Sri Lanka                         7.446                         -3.8410965
## 195                      Venezuela                         7.119                        -25.0833920
## 157                     Seychelles                         6.788                        -23.1967274
## 107                       Malaysia                         5.943                         -2.6367027
## 165                    South Korea                         2.345                         15.5054961
## 82                            Iraq                       -12.038                        -34.5125277</code></pre>
</div>
<div id="g-h-classification" class="section level3">
<h3>G &gt; H classification</h3>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Performance</span>(<span class="at">category =</span> <span class="st">&quot;G &gt; H&quot;</span>, <span class="at">year =</span> <span class="dv">1995</span>, <span class="at">vars =</span> <span class="fu">c</span>(variables<span class="sc">$</span>health, variables<span class="sc">$</span>gender))</span></code></pre></div>
<pre><code>## $life_exp_wpp
##                country life_exp_wpp_growth1995_2015 perf_life_exp_wpp_growth1995_2015
## 176         Tajikistan                        11.59                         3.8887628
## 58             Estonia                         8.28                         3.2823350
## 23            Botswana                         7.93                        -1.1287422
## 118           Mongolia                         7.70                         1.5594762
## 122            Myanmar                         7.03                         0.7248560
## 11          Azerbaijan                         7.02                         1.3627536
## 24              Brazil                         7.00                         1.9171684
## 96              Latvia                         6.47                         1.1058001
## 8              Armenia                         5.93                         1.8833804
## 91            Kiribati                         5.85                                NA
## 77             Hungary                         5.84                         0.8566287
## 2              Albania                         5.80                         3.1027103
## 36               China                         5.77                         2.2810007
## 150              Samoa                         5.49                                NA
## 51  Dominican Republic                         5.16                         0.4473957
## 74              Guyana                         5.00                                NA
## 185       Turkmenistan                         4.60                        -2.1867276
## 49            Djibouti                         4.53                        -3.2197075
## 102          Lithuania                         4.26                        -0.3154891
## 94          Kyrgyzstan                         4.02                        -1.0350297
## 193         Uzbekistan                         3.96                        -0.9080611
## 89          Kazakhstan                         3.62                        -2.3404482
## 104          Macedonia                         3.62                         0.1884203
## 16             Belarus                         3.00                        -1.7445919
## 115         Micronesia                         3.00                                NA
## 140        Philippines                         2.72                        -1.6455232
## 64               Gabon                         2.69                        -4.9771318
## 181              Tonga                         1.13                                NA
## 123            Namibia                        -0.80                        -7.6495766
## 164       South Africa                        -2.30                        -8.9583696
## 98             Lesotho                       -10.43                       -16.9566239
## 
## $imr_wpp
##                country imr_wpp_growth1995_2015 perf_imr_wpp_growth1995_2015
## 11          Azerbaijan                  50.336                   12.4836623
## 176         Tajikistan                  50.164                   10.8411789
## 118           Mongolia                  44.720                    7.8597153
## 94          Kyrgyzstan                  40.284                    7.1847091
## 89          Kazakhstan                  36.778                    7.5325964
## 193         Uzbekistan                  31.685                   -1.6891165
## 8              Armenia                  30.871                    1.5782088
## 122            Myanmar                  29.016                  -11.2301595
## 36               China                  28.998                    0.4466554
## 185       Turkmenistan                  28.561                   -7.0375832
## 24              Brazil                  26.953                   -0.1234694
## 51  Dominican Republic                  22.017                   -8.0324827
## 64               Gabon                  21.617                  -11.0636537
## 2              Albania                  21.524                   -2.6084387
## 49            Djibouti                  20.429                  -17.9080291
## 91            Kiribati                  18.297                           NA
## 104          Macedonia                  17.611                   -2.7699707
## 58             Estonia                  13.135                    1.4475069
## 74              Guyana                  13.120                           NA
## 140        Philippines                  12.746                  -13.3370769
## 115         Micronesia                  12.560                           NA
## 96              Latvia                  12.398                   -0.1824839
## 102          Lithuania                  12.110                    0.2677959
## 16             Belarus                  11.669                    1.3327291
## 123            Namibia                  11.218                  -19.0805007
## 164       South Africa                   8.283                  -17.9018293
## 77             Hungary                   8.214                    0.4603962
## 150              Samoa                   8.074                           NA
## 23            Botswana                   6.349                  -20.4210048
## 181              Tonga                   2.538                           NA
## 98             Lesotho                  -2.540                  -39.2772389
## 
## $mys_ratio_hdr
##                country mys_ratio_hdr_growth1995_2015 perf_mys_ratio_hdr_growth1995_2015
## 118           Mongolia                  0.1581632653                        0.103094090
## 98             Lesotho                  0.1540880503                        0.156892357
## 123            Namibia                  0.1293350717                        0.078201548
## 122            Myanmar                  0.1139817629                        0.072956712
## 94          Kyrgyzstan                  0.0923757993                        0.039886366
## 58             Estonia                  0.0842653593                        0.039706942
## 89          Kazakhstan                  0.0824742268                        0.024388478
## 2              Albania                  0.0812662414                        0.021324028
## 74              Guyana                  0.0716705295                                 NA
## 11          Azerbaijan                  0.0462962963                       -0.012649509
## 140        Philippines                  0.0439560440                        0.008800213
## 96              Latvia                  0.0256598240                       -0.010887649
## 164       South Africa                  0.0225113122                       -0.032465537
## 102          Lithuania                  0.0202020202                       -0.024607014
## 36               China                  0.0172280294                       -0.044509577
## 8              Armenia                  0.0073179033                       -0.023123581
## 16             Belarus                  0.0067283431                       -0.039117448
## 51  Dominican Republic                  0.0016091954                       -0.025020736
## 77             Hungary                 -0.0009182736                       -0.051781948
## 181              Tonga                 -0.0022269460                                 NA
## 176         Tajikistan                 -0.0043706294                       -0.057162746
## 24              Brazil                 -0.0184633711                       -0.040179006
## 23            Botswana                 -0.0319148936                       -0.070789498
## 64               Gabon                 -0.3934343434                       -0.395144631
## 
## $asfr_adol_wpp
##                country asfr_adol_wpp_growth1995_2015 perf_asfr_adol_wpp_growth1995_2015
## 64               Gabon                        71.596                         29.4761310
## 8              Armenia                        55.225                         28.5484132
## 23            Botswana                        46.999                         15.1613404
## 193         Uzbekistan                        37.056                         13.8703486
## 102          Lithuania                        31.449                         10.1239325
## 58             Estonia                        30.958                          8.8600675
## 115         Micronesia                        29.807                                 NA
## 96              Latvia                        28.216                          7.0254010
## 104          Macedonia                        25.154                          6.2394245
## 94          Kyrgyzstan                        24.814                         -0.8374210
## 91            Kiribati                        24.806                                 NA
## 49            Djibouti                        23.754                          6.7289192
## 16             Belarus                        22.863                          1.5059333
## 89          Kazakhstan                        22.423                         -1.4837099
## 24              Brazil                        19.674                        -10.2561609
## 164       South Africa                        18.343                        -13.2424779
## 77             Hungary                        16.222                         -2.9451258
## 51  Dominican Republic                        15.345                        -18.0878566
## 123            Namibia                        12.704                        -17.2997016
## 122            Myanmar                        12.529                          0.4521098
## 118           Mongolia                        11.837                         -2.0850232
## 36               China                         8.391                          6.9319094
## 181              Tonga                         7.922                                 NA
## 176         Tajikistan                         6.931                        -14.4826060
## 74              Guyana                         5.752                                 NA
## 150              Samoa                         5.418                                 NA
## 185       Turkmenistan                        -0.034                        -12.6233328
## 98             Lesotho                        -1.130                        -26.2436005
## 2              Albania                        -1.997                         -5.9405149
## 140        Philippines                        -6.293                        -26.5138229
## 11          Azerbaijan                       -11.708                        -28.1384794</code></pre>
</div>
<div id="high-classification" class="section level3">
<h3>High classification</h3>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Performance</span>(<span class="at">category =</span> <span class="st">&quot;upp&quot;</span>, <span class="at">year =</span> <span class="dv">1995</span>, <span class="at">vars =</span> <span class="fu">c</span>(variables<span class="sc">$</span>health, variables<span class="sc">$</span>gender))</span></code></pre></div>
<pre><code>## $life_exp_wpp
##                      country life_exp_wpp_growth1995_2015 perf_life_exp_wpp_growth1995_2015
## 97                   Lebanon                         7.54                       4.208014541
## 161                 Slovenia                         6.40                       2.398055630
## 22      Bosnia &amp; Herzegovina                         6.39                       3.973409283
## 141                   Poland                         6.00                       1.914668431
## 142                 Portugal                         5.72                       2.131493191
## 46            Czech Republic                         5.67                       1.186405520
## 159                Singapore                         5.61                       2.142427107
## 103               Luxembourg                         5.37                       0.885477255
## 83                   Ireland                         5.26                       1.582805656
## 178                 Thailand                         5.03                       0.960831593
## 127              New Zealand                         4.97                       1.513979442
## 48                   Denmark                         4.91                       0.899166950
## 85                     Italy                         4.89                       1.544748638
## 168                    Spain                         4.88                       1.953203410
## 62                   Finland                         4.86                       1.206067599
## 175                   Taiwan                         4.84                       0.748652146
## 173              Switzerland                         4.76                       1.185162946
## 84                    Israel                         4.71                       1.356067795
## 9                  Australia                         4.67                       1.331367166
## 160                 Slovakia                         4.63                       0.271752422
## 190           United Kingdom                         4.63                       1.069920816
## 63                    France                         4.60                       1.244087923
## 67                   Germany                         4.46                       0.608684048
## 131                   Norway                         4.32                       0.874781584
## 189     United Arab Emirates                         4.21                      -1.881613189
## 17                   Belgium                         4.12                       0.459630160
## 126              Netherlands                         4.05                       0.597825424
## 31                    Canada                         4.04                       0.638747393
## 192                  Uruguay                         4.02                       0.335029878
## 87                     Japan                         3.90                       1.011350456
## 110                    Malta                         3.85                       1.146780288
## 172                   Sweden                         3.75                       0.604164859
## 69                    Greece                         3.70                       0.763789737
## 78                   Iceland                         3.66                       0.528565654
## 13                   Bahrain                         3.52                      -0.653650118
## 7                  Argentina                         3.51                      -0.230766835
## 15                  Barbados                         3.43                      -0.171597368
## 191 United States of America                         3.29                      -0.965114082
## 143                    Qatar                         3.14                      -0.354457116
## 45                    Cyprus                         2.98                       0.005218632
## 93                    Kuwait                         2.37                      -2.641210883
## 
## $imr_wpp
##                      country imr_wpp_growth1995_2015 perf_imr_wpp_growth1995_2015
## 178                 Thailand                  15.988                   -3.6988616
## 97                   Lebanon                  15.523                   -4.5409134
## 141                   Poland                  11.950                    0.1537548
## 22      Bosnia &amp; Herzegovina                  11.508                   -6.4819885
## 7                  Argentina                  11.173                   -6.0614659
## 192                  Uruguay                  10.003                   -4.5048327
## 13                   Bahrain                   7.950                   -0.9897136
## 143                    Qatar                   7.924                   -0.5986872
## 46            Czech Republic                   6.457                    5.6308813
## 142                 Portugal                   6.177                    4.7791109
## 189     United Arab Emirates                   6.159                    3.6557103
## 160                 Slovakia                   6.157                    0.5579037
## 69                    Greece                   5.166                    5.1374172
## 161                 Slovenia                   5.119                    7.1682623
## 93                    Kuwait                   5.108                   -0.5395942
## 84                    Israel                   5.057                    5.7612027
## 45                    Cyprus                   4.989                    3.4867553
## 85                     Italy                   4.390                    7.2874830
## 17                   Belgium                   4.302                    6.5323763
## 103               Luxembourg                   3.835                    8.4969141
## 168                    Spain                   3.750                    7.5789123
## 78                   Iceland                   3.197                   13.0924902
## 83                   Ireland                   3.191                    7.2979840
## 131                   Norway                   3.067                   10.6399414
## 63                    France                   3.053                    7.8277431
## 110                    Malta                   3.011                    2.5125115
## 127              New Zealand                   2.992                    5.5564138
## 9                  Australia                   2.884                    7.9271383
## 62                   Finland                   2.836                   11.6235560
## 159                Singapore                   2.747                   12.0637042
## 48                   Denmark                   2.742                    8.2882319
## 126              Netherlands                   2.716                    8.5490853
## 191 United States of America                   2.715                    4.0460542
## 172                   Sweden                   2.706                   11.3525502
## 67                   Germany                   2.631                    8.9744356
## 190           United Kingdom                   2.625                    6.8180660
## 87                     Japan                   2.216                   13.3774091
## 173              Switzerland                   2.169                    8.9768174
## 15                  Barbados                   1.973                   -5.1488929
## 31                    Canada                   1.594                    7.4614849
## 175                   Taiwan                   1.160                    8.6002349
## 
## $mys_ratio_hdr
##                      country mys_ratio_hdr_growth1995_2015 perf_mys_ratio_hdr_growth1995_2015
## 93                    Kuwait                   0.201318458                        0.138377572
## 189     United Arab Emirates                   0.161607143                        0.118549606
## 142                 Portugal                   0.151736111                        0.076154021
## 45                    Cyprus                   0.124747475                        0.048998908
## 48                   Denmark                   0.120347395                        0.052192025
## 67                   Germany                   0.087684729                        0.008182759
## 87                     Japan                   0.082166768                        0.020169696
## 69                    Greece                   0.081317765                        0.006259212
## 62                   Finland                   0.078241431                        0.022369713
## 168                    Spain                   0.072261072                        0.004772843
## 15                  Barbados                   0.070187166                        0.023030779
## 85                     Italy                   0.068307906                       -0.002377045
## 31                    Canada                   0.066239316                        0.012367822
## 9                  Australia                   0.059282051                        0.000811882
## 173              Switzerland                   0.059145604                       -0.017549703
## 192                  Uruguay                   0.046190476                        0.007427191
## 83                   Ireland                   0.040711430                       -0.002831784
## 159                Singapore                   0.037296037                       -0.037707321
## 141                   Poland                   0.036234104                       -0.010046239
## 17                   Belgium                   0.025792495                       -0.034121154
## 126              Netherlands                   0.025081081                       -0.039916201
## 63                    France                   0.025042849                       -0.036483448
## 131                   Norway                   0.024806723                       -0.026222876
## 103               Luxembourg                   0.023089431                       -0.045063814
## 84                    Israel                   0.017241379                       -0.033202069
## 172                   Sweden                   0.016260163                       -0.031020188
## 13                   Bahrain                   0.013888889                       -0.033066865
## 161                 Slovenia                   0.010294331                       -0.041680281
## 127              New Zealand                   0.009641026                       -0.041719026
## 7                  Argentina                   0.007369283                       -0.030412572
## 46            Czech Republic                   0.001512573                       -0.050452390
## 190           United Kingdom                  -0.006731946                       -0.054953730
## 191 United States of America                  -0.008481203                       -0.054585453
## 160                 Slovakia                  -0.015037594                       -0.059654026
## 110                    Malta                  -0.023188406                       -0.073046960
## 178                 Thailand                  -0.030448718                       -0.073260887
## 78                   Iceland                  -0.065836941                       -0.106703378
## 143                    Qatar                  -0.082306831                       -0.080199093
## 
## $asfr_adol_wpp
##                      country asfr_adol_wpp_growth1995_2015 perf_asfr_adol_wpp_growth1995_2015
## 143                    Qatar                        32.737                          8.5625068
## 191 United States of America                        31.574                          0.9960145
## 46            Czech Republic                        30.337                          7.8074673
## 97                   Lebanon                        28.063                          9.4482338
## 189     United Arab Emirates                        25.502                         -2.7527880
## 160                 Slovakia                        22.897                          0.1688794
## 45                    Cyprus                        19.171                          5.1508218
## 78                   Iceland                        16.141                         -0.6033095
## 15                  Barbados                        15.198                        -12.3820446
## 141                   Poland                        15.030                          0.2886285
## 161                 Slovenia                        14.792                          3.9301115
## 31                    Canada                        13.647                         -3.0204085
## 22      Bosnia &amp; Herzegovina                        13.529                          7.3469200
## 93                    Kuwait                        13.239                         -1.9256931
## 175                   Taiwan                        12.958                          3.2430798
## 190           United Kingdom                        12.034                         -6.6652161
## 127              New Zealand                        10.469                         -9.3790489
## 142                 Portugal                        10.431                         -1.9558858
## 7                  Argentina                         9.988                        -18.6961937
## 192                  Uruguay                         9.948                        -18.8091760
## 131                   Norway                         9.709                          0.4781870
## 69                    Greece                         8.808                         -0.3386986
## 9                  Australia                         8.573                         -4.9957003
## 13                   Bahrain                         8.318                         -4.2877142
## 67                   Germany                         7.845                         -1.5992842
## 84                    Israel                         7.799                         -4.1901849
## 103               Luxembourg                         6.118                         -1.5163718
## 172                   Sweden                         5.957                          1.8379237
## 83                   Ireland                         5.399                         -3.1272447
## 17                   Belgium                         4.790                          1.4458914
## 48                   Denmark                         4.465                          4.0996927
## 159                Singapore                         3.980                          5.8044345
## 62                   Finland                         3.957                          0.4015450
## 173              Switzerland                         3.044                          6.1919774
## 126              Netherlands                         2.663                          5.5793764
## 85                     Italy                         1.849                          3.6117867
## 63                    France                         1.390                          2.6705565
## 168                    Spain                         0.707                          0.2638633
## 87                     Japan                        -0.730                         11.7612327
## 110                    Malta                        -1.293                         -4.2594156
## 178                 Thailand                        -1.338                        -23.1854048</code></pre>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(data, codebook, categories, variables, df, new, <span class="at">file =</span> <span class="st">&quot;_data/LSCMWG_working_class.RData&quot;</span>)</span></code></pre></div>
</div>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
